--region Initialize
--Game 1 Objects
game1_hogwarts_GUID = 'da2648'
game1_location_GUID = '52a66f'
game1_villain_GUID = '9c2713'
game1_villain_game14_GUID = "8678fa"
game1_darkarts_GUID = '3cf0dd'


--Game 1 German Objects
game1_ger_hogwarts_GUID = '57a44d'
game1_ger_location_GUID = '8abb9d'
game1_ger_villain_GUID = 'dc8583'
game1_ger_darkarts_GUID = '45072b'
harryBoard_GUID = "977479"
nevilleBoard_GUID = "e42646"
hermioneBoard_GUID = "8806a7"
ronBoard_GUID = "63d5ff"

game1_ger_harry_GUID = '156559'
game1_ger_ron_GUID = '977f1b'
game1_ger_neville_GUID = '7d1932'
game1_ger_hermione_GUID = '4333be'

game1_ger_harry_deck_GUID = 'df5778'
game1_ger_ron_deck_GUID = 'a1921c'
game1_ger_neville_deck_GUID = 'c550ab'
game1_ger_hermione_deck_GUID = 'fbf264'

game1_ger_turn1_GUID = '8d13a1'
game1_ger_turn2_GUID = 'b09fe6'
game1_ger_turn3_GUID = '7c0c73'
game1_ger_turn4_GUID = '85c084'

--Game 2 Objects
game2_hogwarts_GUID = 'c9b0ce'
game2_location_GUID = '125b06'
game2_villain_GUID = '7ed58b'
game2_villain_game14_GUID = "84b6c4"
game2_darkarts_GUID = 'aa5db6'
shield_token1_GUID = "f1bb17"
shield_token2_GUID = "e1fdaa"


--Game 2 German Objects
game2_ger_hogwarts_GUID = '28d5ac'
game2_ger_location_GUID = '5270bf'
game2_ger_villain_GUID = '4f7616'
game2_ger_darkarts_GUID = '84582f'

--Game 3 Objects
game3_harry_GUID = '85f201'
game3_ron_GUID = 'a88bde'
game3_neville_GUID = '775e3b'
game3_hermione_GUID = '7a4e09'
game3_location_GUID = 'c140f5'
game3_darkarts_GUID = '7111ce'
game3_hogwarts_GUID = '633b95'
game3_villain_GUID = '36c737'

--Game 3 German Objects
game3_ger_harry_GUID = '4ba2f1'
game3_ger_ron_GUID = '00e7bb'
game3_ger_neville_GUID = '72f3da'
game3_ger_hermione_GUID = '58966c'
game3_ger_location_GUID = '81ce1a'
game3_ger_darkarts_GUID = '0449cb'
game3_ger_hogwarts_GUID = '375376'
game3_ger_villain_GUID = 'ba495a'

--Game 4 Objects
game4_location_GUID = '90de15'
game4_darkarts_GUID = '40e669'
game4_hogwarts_GUID = '4bf2b3'
game4_villain_GUID = 'cfc2bb'
game4_villain_game13_GUID = "fe33a5"
green_die_GUID = "1ce651"
red_die_GUID = "64e216"
blue_die_GUID = "ed2ab4"
yellow_die_GUID = "dcb072"

--Game 4 German Objects
game4_ger_location_GUID = '380cd2'
game4_ger_darkarts_GUID = '91f7d0'
game4_ger_hogwarts_GUID = '7fb6bf'
game4_ger_villain_GUID = '0c05fb'

--Game 5 Objects
game5_location_GUID = '8ec138'
game5_darkarts_GUID = '6c84e9'
game5_hogwarts_GUID = '007494'
game5_villain_GUID = '5b10ea'
game5_voldy_GUID = 'cab279'

--Game 5 German Objects
game5_ger_location_GUID = 'e2cd56'
game5_ger_darkarts_GUID = '852ce6'
game5_ger_hogwarts_GUID = '719381'
game5_ger_villain_GUID = '3f3331'
game5_ger_voldy_GUID = '47ec86'

--Game 6 Objects
game6_location_GUID = 'dc0597'
game6_darkarts_GUID = 'dd35bd'
game6_hogwarts_GUID = '7a2c16'
game6_villain_GUID = '02fad1'
game6_villain_game15_GUID = "e21325"
game6_voldy_GUID = 'eead9f'

--Game 6 German Objects
game6_ger_location_GUID = 'c9eaa2'
game6_ger_darkarts_GUID = 'fc7d16'
game6_ger_hogwarts_GUID = '6474c5'
game6_ger_villain_GUID = '2996e4'
game6_ger_voldy_GUID = 'a0ad40'

--prof cards
profCard1_GUID = 'c035d3'
profCard2_GUID = 'ae20ef'
profCard3_GUID = '2979a6'
profCard4_GUID = '16d8e9'
profCard5_GUID = '25034c'
profCard6_GUID = '4c6bd7'
profCard7_GUID = '975522'
profCard8_GUID = '5ad6a7'
profCard9_GUID = '1e5db8'
profCard10_GUID = '233d88'

--German prof cards
profCard1_ger_GUID = 'a9b134'
profCard2_ger_GUID = 'cdf674'
profCard3_ger_GUID = 'c35c1b'
profCard4_ger_GUID = '3ae97f'
profCard5_ger_GUID = 'a3aaf1'
profCard6_ger_GUID = '7f8ee3'
profCard7_ger_GUID = '4cbaf8'
profCard8_ger_GUID = '09e0e3'
profCard9_ger_GUID = '394f62'
-- profCard10_ger_GUID = ''

--Game 7 German Objects
game7_location_GUID = '3654f8'
game7_darkarts_GUID = 'b64b72'
game7_hogwarts_GUID = 'a8ca17'
game7_horcrux_GUID = 'c7753b'
game7_voldy_GUID = '6e945d'
game7_harry_GUID = 'fa1d47'
game7_ron_GUID = '5d193c'
game7_hermione_GUID = 'dcc426'
game7_neville_GUID = '65b256'
game7_horcrux_token1_GUID = "c8f4b8"
game7_horcrux_token2_GUID = "cf2677"
game7_horcrux_token3_GUID = "f468ba"
game7_horcrux_token4_GUID = "8a2cc2"

--Game 7 German Objects
game7_ger_location_GUID = '74dcce'
game7_ger_darkarts_GUID = 'e1ffb5'
game7_ger_hogwarts_GUID = '568aaa'
game7_ger_horcrux_GUID = '42c58b'
game7_ger_voldy_GUID = 'b54012'
game7_ger_harry_GUID = '31e908'
game7_ger_ron_GUID = 'a89744'
game7_ger_hermione_GUID = 'dbc95b'
game7_ger_neville_GUID = '780a9e'

--Game 8 Objects (Monster Expansion Game 1)
game8_villain_GUID = 'fe2aa5'
game8_location_GUID = 'a1f1fe'
game8_darkarts_GUID = '1683a3'
game8_hogwarts_GUID = 'bd1372'
game8_detention_GUID = "6cb0bf"
game8_harry_GUID = 'd583c1'
game8_ron_GUID = 'c306b7'
game8_hermione_GUID = 'cb34ef'
game8_neville_GUID = 'bfa98c'
game8_luna_GUID = "c286b8"
game8_luna_deck_GUID = "60338b"
game8_encounters_GUID = "9781dc"
game8_harp_token_GUID ="3526da"
game8_banish_portal_GUID = "cf6ca1"


--Game 9 Objects (Monster Expansion Game 2)
game9_villain_GUID = '02353a'
game9_location_GUID = 'b24ffc'
game9_darkarts_GUID = 'cb3694'
game9_hogwarts_GUID = '899243'
game9_encounters_GUID = "39059a"
monster_die_GUID = "945c48"

--Game 10 Objects (Monster Expansion Game 3)
game10_villain_GUID = '6ec245'
game10_location_GUID = '6cccbe'
game10_darkarts_GUID = '78ae7c'
game10_hogwarts_GUID = 'b8935f'
game10_encounters_GUID = "b15a86"
game10_patronus_harry_GUID = "386fc7"
game10_patronus_ron_GUID = "02a8e2"
game10_patronus_hermione_GUID = "776590"
game10_patronus_neville_GUID = "e3411f"
game10_patronus_luna_GUID = "a91d64"


--Game 11 Objects (Monster Expansion Game 4)
game11_villain_GUID = '4621b4'
game11_location_GUID = 'f5e0df'
game11_darkarts_GUID = '0b3da4'
game11_hogwarts_GUID = '7fb3f0'
game11_encounters_GUID = "1b0cae"
game11_voldy_GUID = 'b399c7'

--Game 12 Objects (Potions Expansion Game 1)
game12_villain_GUID = '1ff38b'
game12_villain_alternativ_GUID = "1f490c"
game12_villain_game13_GUID = "182172"
game12_location_GUID = '092df7'
game12_darkarts_GUID = '8a8bd8'
game12_hogwarts_GUID = '36636c'
game12_ginny_GUID = "e71377"
game12_ginny_deck_GUID = "c6c75f"
game12_patronus_ginny_GUID = "5f172d"
game12_encounters_GUID = "82141e"

--Game 13 Objects (Potions Expansion Game 2)
game13_villain_GUID = 'e0ca1c'
game13_villain_alternativ_GUID = "ff2641"
game13_location_GUID = 'd182e2'
game13_darkarts_GUID = 'd1cc03'
game13_hogwarts_GUID = '21b371'
game13_encounters_GUID = "2b4bce"

game13_potion_cards_GUID = "0678fc"
game13_potion_bag_GUID = "552f21"
game13_potion_shelf_GUID = "487fc8"
game13_potion_board_GUID = "284955"
game13_potion_discard_bag_GUID = "c876f0"

--Charm Boards
charmBoard1_GUID = "177e4f"
charmBoard2_GUID = 'e027eb'
charmBoard3_GUID = '6c69d1'
charmBoard4_GUID = '2f6ddb'
charmBoard5_GUID = 'f46f1c'
charmBoard6_GUID = 'b4f7e9'
charmBoard7_GUID = '736528'
charmBoard8_GUID = 'a27778'
charmBoard9_GUID = '935f22'
charmBoard10_GUID = '014470'

--Game 14 Objects (Potions Expansion Game 3)
game14_villain_GUID = '72d145'
game14_villain_alternativ_GUID = "e0a289"
game14_villain_game15_GUID = "31ccb3"
game14_location_GUID = 'c0b9e2'
game14_darkarts_GUID = '363f1b'
game14_hogwarts_GUID = 'eedc82'
game14_encounters_GUID = "385c3b"
game14_potion_cards_GUID = "f6eba1"
game14_potion_shelf_GUID = "454491"

--Game 15 Objects (Potions Expansion Game 4)
game15_villain_GUID = '3dfc67'
game15_villain_alternativ_GUID = "e61918"
game15_location_GUID = '15aaef'
game15_darkarts_GUID = 'c5e2e7'
game15_hogwarts_GUID = 'a8aaee'
game15_encounters_GUID = "d26849"
game15_encounters_token1_GUID = "a03a63"
game15_encounters_token2_GUID = "d9382a"
game15_encounters_token3_GUID = "b97f37"
game15_potion_cards_GUID = "036290"
game15_potion_shelf_GUID = "1eaefb"
game15_potion_bag_GUID = "d7681b"
game15_voldy_GUID = '84d0b5'


--Set Game Number to 1 for default

--Position of the first control token
startDelete = true
english = true
german = false
timer = 0
game_num = 1
currentSkull = 0
pos = {17.63, 1.13, -0.77}
numTimers = 0
harryClicked = false
ronClicked = false
nevilleClicked = false
hermioneClicked = false
harryClicked_prof = false
ronClicked_prof = false
nevilleClicked_prof = false
hermioneClicked_prof = false
harryClicked_char = false
ronClicked_char = false
nevilleClicked_char = false
hermioneClicked_char = false
harryDelete = false
ronDelete = false
hermioneDelete = false
nevilleDelete = false
startHarryDestroy = false
startRonDestroy = false
startHermioneDestroy = false
startNevilleDestroy = false

--Parameters for Hogwarts Cards random
button_parameters_random = {
    click_function = 'buttonClickedRandomize',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Hogwarts Cards Replenish Button
button_paramters_Replenish = {
    click_function = 'buttonClickedReplenish',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Potion Token Replenish Button
button_parameters_Replenish_Potion_Token = {
    click_function = 'buttonClickedReplenishToken',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for DArk Arts Draw Button
button_parameters_DarkArts = {
    click_function = 'buttonClickedDarkArts',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Dark Arts Refill Button
button_parameters_DarkArts_refill = {
    click_function = 'buttonClickedDarkArtsRefill',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Paramters for Destroy Location Button
button_parameters_Location = {
    click_function = 'buttonClickedLocation',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Draw Villain Button
button_parameters_Villain_Draw = {
    click_function = 'buttonClickedVillainDraw',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Defeat Villain 1 Button
button_parameters_Villain1 = {
    click_function = 'buttonClickedVillainDefeat1',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Defeat Villain 2 Button
button_parameters_Villain2 = {
    click_function = 'buttonClickedVillainDefeat2',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Defeat Villain 3 Button
button_parameters_Villain3 = {
    click_function = 'buttonClickedVillainDefeat3',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Start Game Button.
button_parameters_Start = {
    click_function = 'buttonClickedStart',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Start Game Button.
button_parameters_Start_delete = {
    click_function = 'buttonClickedStartDelete',
    function_owner = nil,
    index=1,
    label="Delete unseated Characters âœ”",
    color={1,1,1,255},
    position = {0,0.0,1.7},
    rotation = {0,0,0},
    width = 2700,
    height = 300,
    font_color = {0.192, 0.701, 0.168,255},
    font_size = 200
}

--Parameters for german language
--button_parameters_germanButton = {
--    click_function = 'buttonClickedGerman',
--    function_owner = nil,
--    label="",
--    color={0,0,0,0},
--    position = {0,0.2,0},
--    rotation = {0,0,0},
--    width = 2300,
--    height = 1500,
--}

button_parameters_germanButtonCheck = {
    click_function = 'egal',
    index = 1,
    function_owner = nil,
    label="",
    color={0,0,0,0},
    font_color ={0.192, 0.701, 0.168,255},
    font_size = 500,
    position = {0,0.1,0},
    rotation = {0,0,0},
    width = 1,
    height = 1,
}

--Parameters for Game 1 Button
button_parameters_game1 = {
    click_function = 'buttonClickedGame1',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,

}

--Parameters for Game 2 Button
button_parameters_game2 = {
    click_function = 'buttonClickedGame2',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 3 Button
button_parameters_game3 = {
    click_function = 'buttonClickedGame3',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 4 Button
button_parameters_game4 = {
    click_function = 'buttonClickedGame4',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 5 Button
button_parameters_game5 = {
    click_function = 'buttonClickedGame5',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 6 Button
button_parameters_game6 = {
    click_function = 'buttonClickedGame6',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 7 Button
button_parameters_game7 = {
    click_function = 'buttonClickedGame7',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 8 Button (Monster Expansion 1)
button_parameters_game8 = {
    click_function = 'buttonClickedGame8',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 9 Button (Monster Expansion 2)
button_parameters_game9 = {
    click_function = 'buttonClickedGame9',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 10 Button (Monster Expansion 3)
button_parameters_game10 = {
    click_function = 'buttonClickedGame10',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 11 Button (Monster Expansion 4)
button_parameters_game11 = {
    click_function = 'buttonClickedGame11',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 12 Button (Potion Expansion 1)
button_parameters_game12 = {
    click_function = 'buttonClickedGame12',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 13 Button (Potion Expansion 2)
button_parameters_game13 = {
    click_function = 'buttonClickedGame13',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 14 Button (Potion Expansion 3)
button_parameters_game14 = {
    click_function = 'buttonClickedGame14',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Game 15 Button (Potion Expansion 4)
button_parameters_game15 = {
    click_function = 'buttonClickedGame15',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for Choosing Proficiency Button
button_parameters_proficiency = {
    click_function = 'takeProficiencyCard',
    function_owner = nil,
    label = 'Choose',
    position = {0,0.50,0},
    rotation = {0,0,0},
    width = 350,
    height = 300,
    font_size = 100
}

--Parameters for Choosing Charm Board
button_parameters_charm_board = {
    click_function = 'takeCharmBoard',
    function_owner = nil,
    label = 'Choose',
    position = {1.5,0.1,-0.65},
    rotation = {0,0,0},
    width = 500,
    height = 300,
    font_size = 150
}

--Parameters for Choosing Luna
button_parameters_choose_luna = {
    click_function = 'takeLuna',
    function_owner = nil,
    label = 'Choose',
    position = {0,0.50,0},
    rotation = {0,0,0},
    width = 350,
    height = 300,
    font_size = 100
}

--Parameters for Choosing Ginny
button_parameters_choose_ginny = {
    click_function = 'takeGinny',
    function_owner = nil,
    label = 'Choose',
    position = {0,0.50,0},
    rotation = {0,0,0},
    width = 350,
    height = 300,
    font_size = 100
}

--Parameters for shop card buy Button
button_parameters_buyShopCard = {
    click_function = 'buyShopCard',
    function_owner = nil,
    -- color={0,0,0,0},
    label = 'Buy',
    position = {-0.7,0.50,-1.3},
    rotation = {0,0,0},
    width = 320,
    height = 230,
    font_size = 150

}

--Parameters for potion card take button
button_parameters_buyPotionCard = {
    click_function = 'buyPotionCard',
    index = 0,
    function_owner = nil,
    -- color={0,0,0,0},
    label = 'Take',
    position = {-0.7,0.50,-1.3},
    rotation = {0,0,0},
    width = 340,
    height = 230,
    font_size = 150
}


--Parameters for banishing a potion card
button_parameters_banishPotionCard = {
    click_function = 'banishPotionCard',
    index = 1,
    function_owner = nil,
    -- color={0,0,0,0},
    label = 'Banish',
    position = {0.6,0.50,-1.3},
    rotation = {0,0,0},
    width = 500,
    height = 230,
    font_size = 150
}

--Parameters for Button for Playing Card from Nevilles Hand
button_parameters_play_cardNev = {
    click_function = 'playCardHandNev',
    function_owner = nil,
    label = 'Play',
    position = {0,0.5,-1.35},
    rotation = {0,0,0},
    width = 300,
    height = 200,
    font_size = 100
}

--Parameters for Button for Playing Card from Rons Hand
button_parameters_play_cardRon = {
    click_function = 'playCardHandRon',
    function_owner = nil,
    label = 'Play',
    position = {0,0.5,-1.35},
    rotation = {0,0,0},
    width = 300,
    height = 200,
    font_size = 100
}

--Parameters for Button for Playing Card from Harrys Hand
button_parameters_play_cardHarry = {
    click_function = 'playCardHandHarry',
    function_owner = nil,
    label = 'Play',
    position = {0,0.5,-1.35},
    rotation = {0,0,0},
    width = 300,
    height = 200,
    font_size = 100
}

--Parameters for Button for Playing Card from Hermiones Hand
button_parameters_play_cardHermione = {
    click_function = 'playCardHandHermione',
    function_owner = nil,
    label = 'Play',
    position = {0,0.5,-1.35},
    rotation = {0,0,0},
    width = 300,
    height = 200,
    font_size = 100
}

--Parameters for Button for adding a skull coin to the location
button_parameters_add_skull = {
    click_function = 'addSkull',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 1300,
    height = 1300,
}

--Parameters for Button for removing a skull coin from the location
button_parameters_remove_skull = {
    click_function = 'removeSkull',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 1300,
    height = 1300,
}


--Removed.  May implement back in somehow.
--Parameters for defeating horcrux
--button_parameters_Horcrux = {
--    click_function = 'buttonClickedHorcrux',
--    function_owner = nil,
--    label = 'Defeat Horcrux',
--    position = {0,0.05,0},
--    rotation = {0,90,0},
--    width = 350,
--    height = 100,
--    font_size = 50
--}

--Parameters for Draw 1 Card for Harry
button_parameters_Draw1CardHarry = {
    click_function = 'buttonClickedDraw1CardHarry',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 5 Cards for Harry
button_parameters_Draw5CardsHarry = {
    click_function = 'buttonClickedDraw5CardsHarry',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 1 Card for Ron
button_parameters_Draw1CardRon = {
    click_function = 'buttonClickedDraw1CardRon',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 5 Cards for Ron
button_parameters_Draw5CardsRon = {
    click_function = 'buttonClickedDraw5CardsRon',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 1 Card for Hermione
button_parameters_Draw1CardHermione = {
    click_function = 'buttonClickedDraw1CardHermione',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 5 Cards for Hermione
button_parameters_Draw5CardsHermione = {
    click_function = 'buttonClickedDraw5CardsHermione',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 1 Card for Neville
button_parameters_Draw1CardNeville = {
    click_function = 'buttonClickedDraw1CardNeville',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for Draw 5 Card for Neville
button_parameters_Draw5CardsNeville = {
    click_function = 'buttonClickedDraw5CardsNeville',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for discard Nevilles hand
button_parameters_DiscardCardsNeville = {
    click_function = 'buttonClickedDiscardNeville',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for discard Rons hand
button_parameters_DiscardCardsRon = {
    click_function = 'buttonClickedDiscardRon',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for discard Hermiones hand
button_parameters_DiscardCardsHermione = {
    click_function = 'buttonClickedDiscardHermione',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for discard Harrys hand
button_parameters_DiscardCardsHarry = {
    click_function = 'buttonClickedDiscardHarry',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 2800,
    height = 1200,
}

--Parameters for destroying Harry's play area (if he is not used)
button_parameters_DestroyHarry = {
    click_function = 'buttonClickedDestroyHarry',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for destroying Ron's play area (if he is not used)
button_parameters_DestroyRon = {
    click_function = 'buttonClickedDestroyRon',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for destroying Hermione's play area (if he is not used)
button_parameters_DestroyHermione = {
    click_function = 'buttonClickedDestroyHermione',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}

--Parameters for destroying Neville's play area (if he is not used)
button_parameters_DestroyNeville = {
    click_function = 'buttonClickedDestroyNeville',
    function_owner = nil,
    label="",
    color={0,0,0,0},
    position = {0,0.2,0},
    rotation = {0,0,0},
    width = 3000,
    height = 1200,
}
--endregion end Initialize

--region SaveLoad
function onSave()
    saveStuff()
    return Global.script_state
end

function saveStuff()
    Global.script_state = JSON.encode({game_num, currentSkull, pos[1]})
end


function loadedAfterStart(saved_data)
    --region Load
    if saved_data ~= "" then
        local loaded_data = JSON.decode(saved_data)
        game_num = loaded_data[1]
        currentSkull = loaded_data[2]
        pos[1] = loaded_data[3]
    end
    -- check if game was saved after the start button was destroyed
    if getObjectFromGUID('ad7447') == nil then
        first_setup = true
        replenishPotionTokenButton = getObjectFromGUID("3dd6e0")
        randomButton = getObjectFromGUID("d99bd0")
        replenishButton = getObjectFromGUID('45e188')
        darkArtsButton = getObjectFromGUID('2ac0ff')
        locationButton = getObjectFromGUID('4a6b9a')
        villainButton = getObjectFromGUID('0bf769')
        villainD1Button = getObjectFromGUID('6878aa')

        not_interactable()
        setupBuyShop()
        getTokenPositions()

        if getObjectFromGUID("c876f0") ~=nil then
            setupPotionShop()
        end

        --create draw/discard button if harry isn't deleted
        if getObjectFromGUID('c3482c') ~= nil then
            draw1HarryButton = getObjectFromGUID('c3482c')
            draw5HarryButton = getObjectFromGUID('0b0257')
            discardHarryButton = getObjectFromGUID('a273e8')
            draw1HarryButton.createButton(button_parameters_Draw1CardHarry)
            draw5HarryButton.createButton(button_parameters_Draw5CardsHarry)
            discardHarryButton.createButton(button_parameters_DiscardCardsHarry)
        end
        --create draw/discard button if ron isn't deleted
        if getObjectFromGUID('50a77b') ~= nil then
            draw1RonButton = getObjectFromGUID('50a77b')
            draw5RonButton = getObjectFromGUID('f4a2e0')
            discardRonButton = getObjectFromGUID('fa087a')
            draw1RonButton.createButton(button_parameters_Draw1CardRon)
            draw5RonButton.createButton(button_parameters_Draw5CardsRon)
            discardRonButton.createButton(button_parameters_DiscardCardsRon)
        end
        --create draw/discard button if hermione isn't deleted
        if getObjectFromGUID('7e6b15') ~= nil then
            draw1HermioneButton = getObjectFromGUID('7e6b15')
            draw5HermioneButton = getObjectFromGUID('9f85af')
            discardHermioneButton = getObjectFromGUID('18b311')
            draw1HermioneButton.createButton(button_parameters_Draw1CardHermione)
            draw5HermioneButton.createButton(button_parameters_Draw5CardsHermione)
            discardHermioneButton.createButton(button_parameters_DiscardCardsHermione)
        end
        --create draw/discard button if neville isn't deleted
        if getObjectFromGUID('1671e1') ~= nil then
            draw1NevilleButton = getObjectFromGUID('1671e1')
            draw5NevilleButton = getObjectFromGUID('2ee07b')
            discardNevilleButton = getObjectFromGUID('78a1d6')
            draw1NevilleButton.createButton(button_parameters_Draw1CardNeville)
            draw5NevilleButton.createButton(button_parameters_Draw5CardsNeville)
            discardNevilleButton.createButton(button_parameters_DiscardCardsNeville)
        end

        addLocationSkull = getObjectFromGUID('b9c8c8')
        removeLocationSkull = getObjectFromGUID('38eb6d')

        hogwartsDraw_Zone = getObjectFromGUID('38fedc')
        hogwartsItem01_Zone = getObjectFromGUID('d8e831')
        hogwartsItem02_Zone = getObjectFromGUID('8da437')
        hogwartsItem03_Zone = getObjectFromGUID('ce9b19')
        hogwartsItem04_Zone = getObjectFromGUID('a50703')
        hogwartsItem05_Zone = getObjectFromGUID('506bb2')
        hogwartsItem06_Zone = getObjectFromGUID('a0bb22')

        --Potion Token Objects (Zones)
        potionToken01_Zone = getObjectFromGUID('5808ca')
        potionToken02_Zone = getObjectFromGUID('19ed21')
        potionToken03_Zone = getObjectFromGUID('52b168')
        potionToken04_Zone = getObjectFromGUID('4e9a53')
        potionToken05_Zone = getObjectFromGUID('df74e5')
        potionToken06_Zone = getObjectFromGUID('9ff3e4')
        potionToken07_Zone = getObjectFromGUID('c97737')
        potionToken08_Zone = getObjectFromGUID('e65f33')
        potionToken09_Zone = getObjectFromGUID('117ff0')
        potionToken10_Zone = getObjectFromGUID('ecd2e7')
        --Potion card zones
        potionToken11_Zone = getObjectFromGUID('5c326b')
        potionToken12_Zone = getObjectFromGUID('5fc6f5')

        --Dark Arts Cards Objects (Zones)
        darkArtsDraw_Zone = getObjectFromGUID('c9f7c8')
        darkArtsDiscard_Zone = getObjectFromGUID('fd307f')

        --Location Objects (Zones)
        location_Zone = getObjectFromGUID('59e006')
        locationDiscard_Zone = getObjectFromGUID('b36ff3')

        --Villain Objects (Zones)
        villainDraw_Zone = getObjectFromGUID('540d52')
        villainDiscard_Zone = getObjectFromGUID('309eda')
        villain1_Zone = getObjectFromGUID('a841f0')
        villain2_Zone = getObjectFromGUID('b03e47')
        villain3_Zone = getObjectFromGUID('6dd532')

        HarryDraw_Zone = getObjectFromGUID('5d7a24')
        HarryDiscard_Zone = getObjectFromGUID('2545c0')
        HarryHand_Zone = getObjectFromGUID('9a0cc7')
        RonDraw_Zone = getObjectFromGUID('5d8df4')
        RonDiscard_Zone = getObjectFromGUID('71b60e')
        RonHand_Zone = getObjectFromGUID('3c3455')
        HermioneDraw_Zone = getObjectFromGUID('84f93e')
        HermioneDiscard_Zone = getObjectFromGUID('969401')
        HermioneHand_Zone = getObjectFromGUID('1ac1ae')
        NevilleDraw_Zone = getObjectFromGUID('61f15b')
        NevilleDiscard_Zone = getObjectFromGUID('9835d6')
        NevilleHand_Zone = getObjectFromGUID('6baece')

        horcrux_draw_Zone = getObjectFromGUID('1cc789')
        encounters_draw_Zone = getObjectFromGUID('cb8399')
        potionBoard_Zone = getObjectFromGUID('dbc80e')
        potionBag_Zone = getObjectFromGUID('3c6046')
        potionShelf_Zone = getObjectFromGUID('069b19')
        potionCards_Zone = getObjectFromGUID('112fd5')
        potionTokenDiscard_Zone = getObjectFromGUID('89a9b9')
        replenishToken_Zone = getObjectFromGUID('8b8dfb')


        if game_num >= 3 then
            villainD2Button = getObjectFromGUID('8a41fe')
            villainD2Button.createButton(button_parameters_Villain2)
        end

        --Only Activate Villain Button 3 if game 5 or higher is selected
        if game_num >= 5 then
            villainD3Button = getObjectFromGUID('d4f4d4')
            villainD3Button.createButton(button_parameters_Villain3)
        end

        if game_num >= 13 then
            replenishPotionTokenButton_GUID = "3dd6e0"
            getObjectFromGUID(replenishPotionTokenButton_GUID).createButton(button_parameters_Replenish_Potion_Token)
        end
        randomButton.createButton(button_parameters_random)
        replenishButton.createButton(button_paramters_Replenish)
        locationButton.createButton(button_parameters_Location)
        villainButton.createButton(button_parameters_Villain_Draw)
        villainD1Button.createButton(button_parameters_Villain1)
        darkArtsButton.createButton(button_parameters_DarkArts)
        addLocationSkull.createButton(button_parameters_add_skull)
        removeLocationSkull.createButton(button_parameters_remove_skull)

        --Refill Button Parameters h1-h6 = Hogwarts card 1 through 6
        h1Refill_parameters = {
            position = {hogwartsItem01_Zone.getPosition().x, hogwartsItem01_Zone.getPosition().y, hogwartsItem01_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h2Refill_parameters = {
            position = {hogwartsItem02_Zone.getPosition().x, hogwartsItem02_Zone.getPosition().y, hogwartsItem02_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h3Refill_parameters = {
            position = {hogwartsItem03_Zone.getPosition().x, hogwartsItem03_Zone.getPosition().y, hogwartsItem03_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h4Refill_parameters = {
            position = {hogwartsItem04_Zone.getPosition().x, hogwartsItem04_Zone.getPosition().y, hogwartsItem04_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h5Refill_parameters = {
            position = {hogwartsItem05_Zone.getPosition().x, hogwartsItem05_Zone.getPosition().y, hogwartsItem05_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h6Refill_parameters = {
            position = {hogwartsItem06_Zone.getPosition().x, hogwartsItem06_Zone.getPosition().y, hogwartsItem06_Zone.getPosition().z},
            flip = true,
            top = true
        }


        --Refill Button Parameters Potion Token 1 to 10
        pt1Refill_parameters = {
            position = {potionToken01_Zone.getPosition().x, potionToken01_Zone.getPosition().y, potionToken01_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt2Refill_parameters = {
            position = {potionToken02_Zone.getPosition().x, potionToken02_Zone.getPosition().y, potionToken02_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt3Refill_parameters = {
            position = {potionToken03_Zone.getPosition().x, potionToken03_Zone.getPosition().y, potionToken03_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt4Refill_parameters = {
            position = {potionToken04_Zone.getPosition().x, potionToken04_Zone.getPosition().y, potionToken04_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt5Refill_parameters = {
            position = {potionToken05_Zone.getPosition().x, potionToken05_Zone.getPosition().y, potionToken05_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt6Refill_parameters = {
            position = {potionToken06_Zone.getPosition().x, potionToken06_Zone.getPosition().y, potionToken06_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt7Refill_parameters = {
            position = {potionToken07_Zone.getPosition().x, potionToken07_Zone.getPosition().y, potionToken07_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt8Refill_parameters = {
            position = {potionToken08_Zone.getPosition().x, potionToken08_Zone.getPosition().y, potionToken08_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt9Refill_parameters = {
            position = {potionToken09_Zone.getPosition().x, potionToken09_Zone.getPosition().y, potionToken09_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt10Refill_parameters = {
            position = {potionToken10_Zone.getPosition().x, potionToken10_Zone.getPosition().y, potionToken10_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt11Refill_parameters = {
            position = {potionToken11_Zone.getPosition().x, potionToken11_Zone.getPosition().y, potionToken11_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt12Refill_parameters = {
            position = {potionToken12_Zone.getPosition().x, potionToken12_Zone.getPosition().y, potionToken12_Zone.getPosition().z},
            flip = true,
            top = true
        }
        --Parameters when discarding Location card
        locationDiscard_parameters = {
            position = {locationDiscard_Zone.getPosition().x, locationDiscard_Zone.getPosition().y, locationDiscard_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when discarding Dark Arts Card
        darkArtsRefill_parameters = {
            position = {darkArtsDiscard_Zone.getPosition().x, darkArtsDiscard_Zone.getPosition().y, darkArtsDiscard_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when drawing villains
        villainDraw1_parameters = {
            position = {villain1_Zone.getPosition().x, villain1_Zone.getPosition().y, villain1_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when drawing villain 2
        villainDraw2_parameters = {
            position = {villain2_Zone.getPosition().x, villain2_Zone.getPosition().y, villain2_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when drawing villain 3
        villainDraw3_parameters = {
            position = {villain3_Zone.getPosition().x, villain3_Zone.getPosition().y, villain3_Zone.getPosition().z},
            flip = true,
            top = true
        }

        drawParms_Harry = ({drawZone = HarryDraw_Zone, pcolor = 'Blue', handZone = HarryHand_Zone})
        addParms_Harry = ({handZone = HarryHand_Zone, playParameters = button_parameters_play_cardHarry})

        drawParms_Ron = ({drawZone = RonDraw_Zone, pcolor = 'Red', handZone = RonHand_Zone})
        addParms_Ron = ({handZone = RonHand_Zone, playParameters = button_parameters_play_cardRon})

        drawParms_Hermione = ({drawZone = HermioneDraw_Zone, pcolor = 'Green', handZone = HermioneHand_Zone})
        addParms_Hermione = ({handZone = HermioneHand_Zone, playParameters = button_parameters_play_cardHermione})

        drawParms_Neville = ({drawZone = NevilleDraw_Zone, pcolor = 'White', handZone = NevilleHand_Zone})
        addParms_Neville = ({handZone = NevilleHand_Zone, playParameters = button_parameters_play_cardNev})
    end
    --endregion Load
end
--endregion Save

--on loading of game
function onload(saved_data)
    if getObjectFromGUID('ad7447') ~= nil then
        getObjectFromGUID("f2ff18").interactable = false
        getObjectFromGUID("5dd4cf").interactable = false
        getObjectFromGUID("50a7ef").interactable = false
        getObjectFromGUID("c57c2a").interactable = false
        getObjectFromGUID("7a0eba").interactable = false
        first_setup = false
        getTokenPositions()

        game1Button = getObjectFromGUID('f21cd8')
        game2Button = getObjectFromGUID('14f1a0')
        game3Button = getObjectFromGUID('a1b15e')
        game4Button = getObjectFromGUID('e84f2e')
        game5Button = getObjectFromGUID('8f6f1d')
        game6Button = getObjectFromGUID('f4686c')
        game7Button = getObjectFromGUID('fe3906')
        game8Button = getObjectFromGUID('3de612')
        game9Button = getObjectFromGUID('a334ca')
        game10Button = getObjectFromGUID('f1a019')
        game11Button = getObjectFromGUID('6d745b')
        game12Button = getObjectFromGUID('8358e6')
        game13Button = getObjectFromGUID('28728f')
        game14Button = getObjectFromGUID('9efc6d')
        game15Button = getObjectFromGUID('339fd8')

        startButton = getObjectFromGUID('ad7447')
        --horcruxButton = getObjectFromGUID('871421')
        --Removed - may implement back in somehow.
        draw1HarryButton = getObjectFromGUID('c3482c')
        draw5HarryButton = getObjectFromGUID('0b0257')
        discardHarryButton = getObjectFromGUID('a273e8')
        draw1RonButton = getObjectFromGUID('50a77b')
        draw5RonButton = getObjectFromGUID('f4a2e0')
        discardRonButton = getObjectFromGUID('fa087a')
        draw1HermioneButton = getObjectFromGUID('7e6b15')
        draw5HermioneButton = getObjectFromGUID('9f85af')
        discardHermioneButton = getObjectFromGUID('18b311')
        draw1NevilleButton = getObjectFromGUID('1671e1')
        draw5NevilleButton = getObjectFromGUID('2ee07b')
        discardNevilleButton = getObjectFromGUID('78a1d6')

        -- destroyRonAreaButton = getObjectFromGUID('f16d90')
        -- destroyNevilleAreaButton = getObjectFromGUID('c91fdf')
        -- destroyHarryAreaButton = getObjectFromGUID('299b65')
        -- destroyHermioneAreaButton = getObjectFromGUID('2abbcb')

        --Hogwarts Cards Objects (Zones)
        ginnyDraw_Zone = getObjectFromGUID('6b867c')
        ginnyDeckDraw_Zone = getObjectFromGUID('ca55f1')
        ginnyPatronusDraw_Zone = getObjectFromGUID("acc70a")

        lunaDraw_Zone = getObjectFromGUID('b57724')
        lunaDeckDraw_Zone = getObjectFromGUID('8466bf')
        lunaPatronusDraw_Zone = getObjectFromGUID("c3e665")
        detentionDraw_Zone = getObjectFromGUID('4ae258')

        hogwartsDraw_Zone = getObjectFromGUID('38fedc')
        hogwartsItem01_Zone = getObjectFromGUID('d8e831')
        hogwartsItem02_Zone = getObjectFromGUID('8da437')
        hogwartsItem03_Zone = getObjectFromGUID('ce9b19')
        hogwartsItem04_Zone = getObjectFromGUID('a50703')
        hogwartsItem05_Zone = getObjectFromGUID('506bb2')
        hogwartsItem06_Zone = getObjectFromGUID('a0bb22')

        --Potion Token Objects (Zones)
        potionToken01_Zone = getObjectFromGUID('5808ca')
        potionToken02_Zone = getObjectFromGUID('19ed21')
        potionToken03_Zone = getObjectFromGUID('52b168')
        potionToken04_Zone = getObjectFromGUID('4e9a53')
        potionToken05_Zone = getObjectFromGUID('df74e5')
        potionToken06_Zone = getObjectFromGUID('9ff3e4')
        potionToken07_Zone = getObjectFromGUID('c97737')
        potionToken08_Zone = getObjectFromGUID('e65f33')
        potionToken09_Zone = getObjectFromGUID('117ff0')
        potionToken10_Zone = getObjectFromGUID('ecd2e7')
        --Potion card zones
        potionToken11_Zone = getObjectFromGUID('5c326b')
        potionToken12_Zone = getObjectFromGUID('5fc6f5')


        --Dark Arts Cards Objects (Zones)
        darkArtsDraw_Zone = getObjectFromGUID('c9f7c8')
        darkArtsDiscard_Zone = getObjectFromGUID('fd307f')

        --Location Objects (Zones)
        location_Zone = getObjectFromGUID('59e006')
        locationDiscard_Zone = getObjectFromGUID('b36ff3')

        --Villain Objects (Zones)
        villainDraw_Zone = getObjectFromGUID('540d52')
        villainDiscard_Zone = getObjectFromGUID('309eda')
        villain1_Zone = getObjectFromGUID('a841f0')
        villain2_Zone = getObjectFromGUID('b03e47')
        villain3_Zone = getObjectFromGUID('6dd532')

        --Starting Decks
        harryStart = getObjectFromGUID('e159c0')
        hermioneStart = getObjectFromGUID('a62764')
        ronStart = getObjectFromGUID('aab3b4')
        nevilleStart = getObjectFromGUID('432bc1')

        --Draw and Discard Zones
        HarryDraw_Zone = getObjectFromGUID('5d7a24')
        HarryDiscard_Zone = getObjectFromGUID('2545c0')
        HarryHand_Zone = getObjectFromGUID('9a0cc7')
        RonDraw_Zone = getObjectFromGUID('5d8df4')
        RonDiscard_Zone = getObjectFromGUID('71b60e')
        RonHand_Zone = getObjectFromGUID('3c3455')
        HermioneDraw_Zone = getObjectFromGUID('84f93e')
        HermioneDiscard_Zone = getObjectFromGUID('969401')
        HermioneHand_Zone = getObjectFromGUID('1ac1ae')
        NevilleDraw_Zone = getObjectFromGUID('61f15b')
        NevilleDiscard_Zone = getObjectFromGUID('9835d6')
        NevilleHand_Zone = getObjectFromGUID('6baece')

        --Character Card Zones
        harryChar_Zone = getObjectFromGUID('a08081')
        hermioneChar_Zone = getObjectFromGUID('14c4fb')
        ronChar_Zone = getObjectFromGUID('744a0d')
        nevilleChar_Zone = getObjectFromGUID('4594bb')
        extraChar_Zone = getObjectFromGUID("75d840")

        --TurnOrder Zone
        harryTurn_Zone = getObjectFromGUID('627925')
        hermioneTurn_Zone = getObjectFromGUID('f8bae1')
        ronTurn_Zone = getObjectFromGUID('fb38fe')
        nevilleTurn_Zone = getObjectFromGUID('df2d03')

        --Character charm Board Zones
        harryCharm_Zone = getObjectFromGUID('50ea11')
        hermioneCharm_Zone = getObjectFromGUID('0e04ba')
        ronCharm_Zone = getObjectFromGUID('a497f5')
        nevilleCharm_Zone = getObjectFromGUID('56f0fa')

        --Game 1 Objects
        game1_bag = getObjectFromGUID('60102f')
        game1_ger_bag = getObjectFromGUID("e3a65e")

        --Game 2 Objects
        game2_bag = getObjectFromGUID('93b0ea')
        game2_ger_bag = getObjectFromGUID("f16173")

        --Game 3 Objects
        game3_bag = getObjectFromGUID('37507f')
        game3_ger_bag = getObjectFromGUID("9092c6")

        --Game 4 Objects
        game4_bag = getObjectFromGUID('2143ad')
        game4_ger_bag = getObjectFromGUID("096e6b")

        --Game 5 Objects
        game5_bag = getObjectFromGUID('f02dc9')
        game5_ger_bag = getObjectFromGUID("047851")

        --Game 6 Objects
        game6_bag = getObjectFromGUID('838113')
        game6_proficiency_Zone = getObjectFromGUID('a26ef5')
        game6_ger_bag = getObjectFromGUID("ac27fd")

        --Game 7 Objects
        game7_bag = getObjectFromGUID('2378c7')
        game7_ger_bag = getObjectFromGUID("433737")

        --Game 8 Objects (Monster Expansion 1)
        game8_bag = getObjectFromGUID('c8d8ef')

        --Game 9 Objects (Monster Expansion 2)
        game9_bag = getObjectFromGUID('cd497c')

        --Game 10 Objects (Monster Expansion 3)
        game10_bag = getObjectFromGUID('2b22fa')

        --Game 11 Objects (Monster Expansion 4)
        game11_bag = getObjectFromGUID('7a911b')

        --Game 12 Objects (Potion Expansion 1)
        game12_charmBoard_Zone = getObjectFromGUID('6146cd')
        game12_bag = getObjectFromGUID("ee3273")

        --Game 13 Objects (Potion Expansion 2)
        game13_bag = getObjectFromGUID("456249")
        replenishPotionTokenButton_GUID = "3dd6e0"

        --Game 14 Objects (Potion Expansion 3)
        game14_bag = getObjectFromGUID("f4dab0")

        --Game 15 Objects (Potion Expansion 4)
        game15_bag = getObjectFromGUID("56e582")


        --Object Zones
        horcrux_draw_Zone = getObjectFromGUID('1cc789')
        encounters_draw_Zone = getObjectFromGUID('cb8399')
        potionBoard_Zone = getObjectFromGUID('dbc80e')
        potionBag_Zone = getObjectFromGUID('3c6046')
        potionShelf_Zone = getObjectFromGUID('069b19')
        potionCards_Zone = getObjectFromGUID('112fd5')
        potionTokenDiscard_Zone = getObjectFromGUID('89a9b9')
        replenishToken_Zone = getObjectFromGUID('8b8dfb')

        charmBoard1_Zone = getObjectFromGUID('f67fba')
        charmBoard2_Zone = getObjectFromGUID('6d0ed3')
        charmBoard3_Zone = getObjectFromGUID('67cd91')
        charmBoard4_Zone = getObjectFromGUID('b30404')
        charmBoard5_Zone = getObjectFromGUID('bdf57d')
        charmBoard6_Zone = getObjectFromGUID('cc109b')
        charmBoard7_Zone = getObjectFromGUID('59aeab')
        charmBoard8_Zone = getObjectFromGUID('b9dea6')
        charmBoard9_Zone = getObjectFromGUID('7215e6')
        charmBoard10_Zone = getObjectFromGUID('dae073')

        prof1_Zone = getObjectFromGUID('8db254')
        prof2_Zone = getObjectFromGUID('a30668')
        prof3_Zone = getObjectFromGUID('39f2e8')
        prof4_Zone = getObjectFromGUID('3d1d00')
        prof5_Zone = getObjectFromGUID('9bd71c')
        prof6_Zone = getObjectFromGUID('0ebc60')
        prof7_Zone = getObjectFromGUID('b96d75')
        prof8_Zone = getObjectFromGUID('e3caf8')
        prof9_Zone = getObjectFromGUID('53eaa6')
        prof10_Zone = getObjectFromGUID('0aa334')

        --Proficiency Cards
        profCard1 = getObjectFromGUID('c035d3')
        profCard2 = getObjectFromGUID('ae20ef')
        profCard3 = getObjectFromGUID('2979a6')
        profCard4 = getObjectFromGUID('16d8e9')
        profCard5 = getObjectFromGUID('25034c')
        profCard6 = getObjectFromGUID('4c6bd7')
        profCard7 = getObjectFromGUID('975522')
        profCard8 = getObjectFromGUID('5ad6a7')
        profCard9 = getObjectFromGUID('1e5db8')
        profCard10 = getObjectFromGUID('233d88')


        --CharacterZones
        harryZone = getObjectFromGUID('2512a7')
        ronZone = getObjectFromGUID('2b5b18')
        hermioneZone = getObjectFromGUID('d453ca')
        nevilleZone = getObjectFromGUID('cb41ea')

        game1Button.createButton(button_parameters_game1)
        game2Button.createButton(button_parameters_game2)
        game3Button.createButton(button_parameters_game3)
        game4Button.createButton(button_parameters_game4)
        game5Button.createButton(button_parameters_game5)
        game6Button.createButton(button_parameters_game6)
        game7Button.createButton(button_parameters_game7)
        game8Button.createButton(button_parameters_game8)
        game9Button.createButton(button_parameters_game9)
        game10Button.createButton(button_parameters_game10)
        game11Button.createButton(button_parameters_game11)
        game12Button.createButton(button_parameters_game12)
        game13Button.createButton(button_parameters_game13)
        game14Button.createButton(button_parameters_game14)
        game15Button.createButton(button_parameters_game15)

        --Refill Button Parameters h1-h6 = Hogwarts card 1 through 6
        h1Refill_parameters = {
            position = {hogwartsItem01_Zone.getPosition().x, hogwartsItem01_Zone.getPosition().y, hogwartsItem01_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h2Refill_parameters = {
            position = {hogwartsItem02_Zone.getPosition().x, hogwartsItem02_Zone.getPosition().y, hogwartsItem02_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h3Refill_parameters = {
            position = {hogwartsItem03_Zone.getPosition().x, hogwartsItem03_Zone.getPosition().y, hogwartsItem03_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h4Refill_parameters = {
            position = {hogwartsItem04_Zone.getPosition().x, hogwartsItem04_Zone.getPosition().y, hogwartsItem04_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h5Refill_parameters = {
            position = {hogwartsItem05_Zone.getPosition().x, hogwartsItem05_Zone.getPosition().y, hogwartsItem05_Zone.getPosition().z},
            flip = true,
            top = true
        }

        h6Refill_parameters = {
            position = {hogwartsItem06_Zone.getPosition().x, hogwartsItem06_Zone.getPosition().y, hogwartsItem06_Zone.getPosition().z},
            flip = true,
            top = true
        }


        --Refill Button Parameters Potion Token 1 to 10
        pt1Refill_parameters = {
            position = {potionToken01_Zone.getPosition().x, potionToken01_Zone.getPosition().y, potionToken01_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt2Refill_parameters = {
            position = {potionToken02_Zone.getPosition().x, potionToken02_Zone.getPosition().y, potionToken02_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt3Refill_parameters = {
            position = {potionToken03_Zone.getPosition().x, potionToken03_Zone.getPosition().y, potionToken03_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt4Refill_parameters = {
            position = {potionToken04_Zone.getPosition().x, potionToken04_Zone.getPosition().y, potionToken04_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt5Refill_parameters = {
            position = {potionToken05_Zone.getPosition().x, potionToken05_Zone.getPosition().y, potionToken05_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt6Refill_parameters = {
            position = {potionToken06_Zone.getPosition().x, potionToken06_Zone.getPosition().y, potionToken06_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt7Refill_parameters = {
            position = {potionToken07_Zone.getPosition().x, potionToken07_Zone.getPosition().y, potionToken07_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt8Refill_parameters = {
            position = {potionToken08_Zone.getPosition().x, potionToken08_Zone.getPosition().y, potionToken08_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt9Refill_parameters = {
            position = {potionToken09_Zone.getPosition().x, potionToken09_Zone.getPosition().y, potionToken09_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt10Refill_parameters = {
            position = {potionToken10_Zone.getPosition().x, potionToken10_Zone.getPosition().y, potionToken10_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt11Refill_parameters = {
            position = {potionToken11_Zone.getPosition().x, potionToken11_Zone.getPosition().y, potionToken11_Zone.getPosition().z},
            flip = true,
            top = true
        }

        pt12Refill_parameters = {
            position = {potionToken12_Zone.getPosition().x, potionToken12_Zone.getPosition().y, potionToken12_Zone.getPosition().z},
            flip = true,
            top = true
        }
        --Parameters when discarding Location card
        locationDiscard_parameters = {
            position = {locationDiscard_Zone.getPosition().x, locationDiscard_Zone.getPosition().y, locationDiscard_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when discarding horcrux
        --horcruxDiscard_parameters = {
        --    position = {horcrux_discard_Zone.getPosition().x, horcrux_discard_Zone.getPosition().y, horcrux_discard_Zone.getPosition().z},
        --    flip = true,
        --    top = true
        --}

        --Parameters when discarding Dark Arts Card
        darkArtsRefill_parameters = {
            position = {darkArtsDiscard_Zone.getPosition().x, darkArtsDiscard_Zone.getPosition().y, darkArtsDiscard_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when drawing villains
        villainDraw1_parameters = {
            position = {villain1_Zone.getPosition().x, villain1_Zone.getPosition().y, villain1_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when drawing villain 2
        villainDraw2_parameters = {
            position = {villain2_Zone.getPosition().x, villain2_Zone.getPosition().y, villain2_Zone.getPosition().z},
            flip = true,
            top = true
        }

        --Parameters when drawing villain 3
        villainDraw3_parameters = {
            position = {villain3_Zone.getPosition().x, villain3_Zone.getPosition().y, villain3_Zone.getPosition().z},
            flip = true,
            top = true
        }

        drawParms_Harry = ({drawZone = HarryDraw_Zone, pcolor = 'Blue', handZone = HarryHand_Zone})
        addParms_Harry = ({handZone = HarryHand_Zone, playParameters = button_parameters_play_cardHarry})

        drawParms_Ron = ({drawZone = RonDraw_Zone, pcolor = 'Red', handZone = RonHand_Zone})
        addParms_Ron = ({handZone = RonHand_Zone, playParameters = button_parameters_play_cardRon})

        drawParms_Hermione = ({drawZone = HermioneDraw_Zone, pcolor = 'Green', handZone = HermioneHand_Zone})
        addParms_Hermione = ({handZone = HermioneHand_Zone, playParameters = button_parameters_play_cardHermione})

        drawParms_Neville = ({drawZone = NevilleDraw_Zone, pcolor = 'White', handZone = NevilleHand_Zone})
        addParms_Neville = ({handZone = NevilleHand_Zone, playParameters = button_parameters_play_cardNev})

        -- destroyHarryAreaButton.createButton(button_parameters_DestroyHarry)
        -- destroyRonAreaButton.createButton(button_parameters_DestroyRon)
        -- destroyHermioneAreaButton.createButton(button_parameters_DestroyHermione)
        -- destroyNevilleAreaButton.createButton(button_parameters_DestroyNeville)
    else
        loadedAfterStart(saved_data)
    end
end


--region button functions
--Button used to replenish hogwarts cards
function buttonClickedReplenish()
    if hogwartsDraw_Zone.getObjects()[1] == nil then
        broadcastToAll("Hogwarts cards empty!", {r=0.856, g=0.1, b=0.094})
    else
        resetDeck()
        delayedCall('delayedReplenish',0.5)
    end
    delayedCall('setupBuyShop',2.5)
end

function delayedReplenish()
    hogwartsRefresh(hogwartsItem01_Zone, hogwartsDraw_Zone, h1Refill_parameters)
    hogwartsRefresh(hogwartsItem02_Zone, hogwartsDraw_Zone, h2Refill_parameters)
    hogwartsRefresh(hogwartsItem03_Zone, hogwartsDraw_Zone, h3Refill_parameters)
    hogwartsRefresh(hogwartsItem04_Zone, hogwartsDraw_Zone, h4Refill_parameters)
    hogwartsRefresh(hogwartsItem05_Zone, hogwartsDraw_Zone, h5Refill_parameters)
    hogwartsRefresh(hogwartsItem06_Zone, hogwartsDraw_Zone, h6Refill_parameters)
end

--region Button used to replenish potion tokens
function buttonClickedReplenishToken()
    for i, v in pairs(potionBag_Zone.getObjects()) do
        if v.tag == 'Bag' then
            discardBag = v
            v2 = getObjectFromGUID(discardBag.getGUID())
            if #v.getObjects() == 0 then
                d_bag = getObjectFromGUID(game13_potion_discard_bag_GUID)
                for i=1, d_bag.getQuantity() do
                    v2.putObject(d_bag.takeObject())
                end
                broadcastToAll("Potion tokens empty - collecting discard", {r=0.192, g=0.701, b=0.168})
            else
                v2.shuffle()

                --move tokens down to zone 9
                if potionToken09_Zone.getObjects()[1] == nil then
                    if potionToken07_Zone.getObjects()[1] ~= nil then
                        potionToken07_Zone.getObjects()[1].setPosition(potionToken09_Zone.getPosition())
                    elseif potionToken05_Zone.getObjects()[1] ~= nil then
                        potionToken05_Zone.getObjects()[1].setPosition(potionToken09_Zone.getPosition())
                    elseif potionToken03_Zone.getObjects()[1] ~= nil then
                        potionToken03_Zone.getObjects()[1].setPosition(potionToken09_Zone.getPosition())
                    elseif potionToken01_Zone.getObjects()[1] ~= nil then
                        potionToken01_Zone.getObjects()[1].setPosition(potionToken09_Zone.getPosition())
                    end
                end

                --move tokens down to zone 10
                if potionToken10_Zone.getObjects()[1] == nil then
                    if potionToken08_Zone.getObjects()[1] ~= nil then
                        potionToken08_Zone.getObjects()[1].setPosition(potionToken10_Zone.getPosition())
                    elseif potionToken06_Zone.getObjects()[1] ~= nil then
                        potionToken06_Zone.getObjects()[1].setPosition(potionToken10_Zone.getPosition())
                    elseif potionToken04_Zone.getObjects()[1] ~= nil then
                        potionToken04_Zone.getObjects()[1].setPosition(potionToken10_Zone.getPosition())
                    elseif potionToken02_Zone.getObjects()[1] ~= nil then
                        potionToken02_Zone.getObjects()[1].setPosition(potionToken10_Zone.getPosition())
                    end
                end
                delayedCall('tokenOn7',0.2)
            end
        end
    end
    if potionCards_Zone.getObjects()[1] == nil then
        broadcastToAll("Potion cards empty!", {r=0.443, g=0.231, b=0.09})
    else
        potionTokenRefresh(potionToken11_Zone, potionCards_Zone, pt11Refill_parameters)

        potionTokenRefresh(potionToken12_Zone, potionCards_Zone, pt12Refill_parameters)
        delayedCall('setupPotionShop',2)
    end
end

function tokenOn7()
    if potionToken07_Zone.getObjects()[1] == nil then
        if potionToken05_Zone.getObjects()[1] ~= nil then
            potionToken05_Zone.getObjects()[1].setPosition(potionToken07_Zone.getPosition())
        elseif potionToken03_Zone.getObjects()[1] ~= nil then
            potionToken03_Zone.getObjects()[1].setPosition(potionToken07_Zone.getPosition())
        elseif potionToken01_Zone.getObjects()[1] ~= nil then
            potionToken01_Zone.getObjects()[1].setPosition(potionToken07_Zone.getPosition())
        end
    end

    if potionToken08_Zone.getObjects()[1] == nil then
        if potionToken06_Zone.getObjects()[1] ~= nil then
            potionToken06_Zone.getObjects()[1].setPosition(potionToken08_Zone.getPosition())
        elseif potionToken04_Zone.getObjects()[1] ~= nil then
            potionToken04_Zone.getObjects()[1].setPosition(potionToken08_Zone.getPosition())
        elseif potionToken02_Zone.getObjects()[1] ~= nil then
            potionToken02_Zone.getObjects()[1].setPosition(potionToken08_Zone.getPosition())
        end
    end

    delayedCall('tokenOn5',0.2)
end

function tokenOn5()
    if potionToken05_Zone.getObjects()[1] == nil then
        if potionToken03_Zone.getObjects()[1] ~= nil then
            potionToken03_Zone.getObjects()[1].setPosition(potionToken05_Zone.getPosition())
        elseif potionToken01_Zone.getObjects()[1] ~= nil then
            potionToken01_Zone.getObjects()[1].setPosition(potionToken05_Zone.getPosition())
        end
    end

    if potionToken06_Zone.getObjects()[1] == nil then
        if potionToken04_Zone.getObjects()[1] ~= nil then
            potionToken04_Zone.getObjects()[1].setPosition(potionToken06_Zone.getPosition())
        elseif potionToken02_Zone.getObjects()[1] ~= nil then
            potionToken02_Zone.getObjects()[1].setPosition(potionToken06_Zone.getPosition())
        end
    end

    delayedCall('tokenOn3',0.2)
end

function tokenOn3()
    if potionToken03_Zone.getObjects()[1] == nil then
        if potionToken01_Zone.getObjects()[1] ~= nil then
            potionToken01_Zone.getObjects()[1].setPosition(potionToken03_Zone.getPosition())
        end
    end

    if potionToken04_Zone.getObjects()[1] == nil then
        if potionToken02_Zone.getObjects()[1] ~= nil then
            potionToken02_Zone.getObjects()[1].setPosition(potionToken04_Zone.getPosition())
        end
    end

    delayedCall('tokensOn1and2',0.2)
end

function tokensOn1and2()
    potionTokenRefresh(potionToken01_Zone, potionBag_Zone, pt1Refill_parameters)
    potionTokenRefresh(potionToken02_Zone, potionBag_Zone, pt2Refill_parameters)
    potionTokenRefresh(potionToken03_Zone, potionBag_Zone, pt3Refill_parameters)
    potionTokenRefresh(potionToken04_Zone, potionBag_Zone, pt4Refill_parameters)
    potionTokenRefresh(potionToken05_Zone, potionBag_Zone, pt5Refill_parameters)
    potionTokenRefresh(potionToken06_Zone, potionBag_Zone, pt6Refill_parameters)
    potionTokenRefresh(potionToken07_Zone, potionBag_Zone, pt7Refill_parameters)
    potionTokenRefresh(potionToken08_Zone, potionBag_Zone, pt8Refill_parameters)
    potionTokenRefresh(potionToken09_Zone, potionBag_Zone, pt9Refill_parameters)
    potionTokenRefresh(potionToken10_Zone, potionBag_Zone, pt10Refill_parameters)
end
--endregion Button used to replenish potion tokens

--Button used to randomize hogwarts cards
function buttonClickedRandomize()
    if confirm == true then
        if setupFinished == true then
            random_zone = getObjectFromGUID("d4dd12")
            all = random_zone.getObjects()
            for i, v in pairs(all) do
                v.setLock(false)
                hogwartsDraw_Zone.getObjects()[1].putObject(v)
            end
            delayedCall('buttonClickedReplenish',1.5)
            delayedCall('setupBuyShop',4)
            confirm = false
        end
    else
        Wait.time(resetTime, 5)
        confirm = true
        broadcastToAll("Press again to confirm!", {r=1, g=1, b=1})
    end
end

function resetDeck()
    hogwartsDraw_Zone.getObjects()[1].shuffle()
    hogwartsDraw_Zone.getObjects()[1].setPosition({hogwartsDraw_Zone.getPosition().x, hogwartsDraw_Zone.getPosition().y-1, hogwartsDraw_Zone.getPosition().z})
    hogwartsDraw_Zone.getObjects()[1].setRotation({hogwartsDraw_Zone.getRotation().x ,hogwartsDraw_Zone.getRotation().y+180, hogwartsDraw_Zone.getRotation().z+180})
end

--reset after a time
function resetTime()
    confirm = false
    confirm_click_neville = false
    confirm_click_ron = false
    confirm_click_hermione = false
    confirm_click_harry = false
end

--Button when drawing dark arts card
function buttonClickedDarkArts()
    playDarkArts()
    --darkArtsDraw = darkArtsDraw_Zone.getObjects()[1]
    --
    --for i, v in pairs(darkArtsDraw_Zone.getObjects()) do
    --    if v.tag == 'Deck' then
    --        darkArtsDraw.takeObject(darkArtsRefill_parameters)
    --    elseif v.tag == 'Card' then
    --        darkArtsDraw.flip()
    --        darkArtsDraw.setPositionSmooth({darkArtsDiscard_Zone.getPosition().x, darkArtsDiscard_Zone.getPosition().y, darkArtsDiscard_Zone.getPosition().z})
    --        darkArtsButton.clearButtons()
    --        darkArtsButton.createButton(button_parameters_DarkArts_refill)
    --    end
    --end

end

--Button when refilling Dark Arts deck
function buttonClickedDarkArtsRefill()
    darkArtsDiscard = darkArtsDiscard_Zone.getObjects()[1]
    darkArtsDiscard.flip()
    darkArtsDiscard.shuffle()
    darkArtsDiscard.setPositionSmooth({darkArtsDraw_Zone.getPosition().x, darkArtsDraw_Zone.getPosition().y, darkArtsDraw_Zone.getPosition().z})
    darkArtsButton.clearButtons()
    darkArtsButton.createButton(button_parameters_DarkArts)
end

-- for i, v in pairs(skullToken) do
--

function buttonClickedLocation()
    skulls = currentSkull
    currentSkull = 0
    -- saveStuff()
    if skulls > 0 then
        print(skulls)
        for i = skulls, 1, -1 do
            skullToken[i].setPosition(skullPosition[i])
        end
        Wait.time(function() buttonClickedLocation1() end, 0.5)
    elseif skulls == 0 then
        buttonClickedLocation1()
    end
end

--Button when destroying location
function buttonClickedLocation1()
    for i, v in pairs(location_Zone.getObjects()) do
        if v.tag == 'Tile' then
            location_Zone.getObjects()[i].destroyObject()
        end

        if v.tag == 'Deck' then
            location_Zone.getObjects()[i].takeObject(locationDiscard_parameters)
            delayedCall('locationInteractFalse',1)
        elseif v.tag == 'Card' then
            location_Zone.getObjects()[i].flip()
            group({locationDiscard_Zone.getObjects()[1], location_Zone.getObjects()[i]})
            broadcastToAll("Sorry - Game Over", {r=1, g=0, b=0})
        end
    end
end

--Setting location to uninteractable
function locationInteractFalse()
    for i, v in pairs(location_Zone.getObjects()) do
        location_Zone.getObjects()[i].interactable = false
    end
end

function getTokenPositions()

    token0 = getObjectFromGUID("28d337")
    token1 = getObjectFromGUID("0a4925")
    token2 = getObjectFromGUID("fc9b65")
    token3 = getObjectFromGUID("9ba1a3")
    token4 = getObjectFromGUID("e60808")
    token5 = getObjectFromGUID("6dd0fc")
    token6 = getObjectFromGUID("ba9bf6")
    token7 = getObjectFromGUID("846c6b")

    pos0 = {24.85, 1.05, -5.26}
    pos1 = {24.35, 1.05, -5.26}
    pos2 = {23.85, 1.05, -5.26}
    pos3 = {23.35, 1.05, -5.26}
    pos4 = {24.85, 1.05, -4.76}
    pos5 = {24.35, 1.05, -4.76}
    pos6 = {23.85, 1.05, -4.76}
    pos7 = {23.35, 1.05, -4.76}

    skullToken = {token0, token1, token2, token3, token4, token5, token6, token7}
    skullPosition = {pos0, pos1, pos2, pos3, pos4, pos5, pos6, pos7}

end

--add Skull Token
function setSkull(pos)
    --locationSkullBag.takeObject({position = pos, rotation= {0.00, 0.00, 0.00}})
    skullToken[currentSkull].setPosition(pos)
end

function mehrPos(check)
    if check == 1 then
        pos[1] = pos[1] - 0.475
    elseif check == -1 then
        pos[1] = pos[1] + 0.475
    end
end

function andersZ(currentSkull)

    if currentSkull % 2 == 0 and not currentSkull == 1 then
        pos[3] = -0.89
    else
        pos[3] = -0.77
    end
end

function addSkull()
    if currentSkull == 0 then
        pos[1] = 17.63
        currentSkull = currentSkull + 1
        andersZ(currentSkull)
        setSkull(pos)
        broadcastToAll("Control token added!", {r=1, g=1, b=1})
    elseif currentSkull>0 and currentSkull < 8 then
        mehrPos(1)
        currentSkull = currentSkull + 1
        andersZ(currentSkull)
        setSkull(pos)
        broadcastToAll("Control token added!", {r=1, g=1, b=1})
    elseif currentSkull == 8 then
        broadcastToAll("Maximum number of control token reached!", {r=1, g=0, b=0})
    end
    saveStuff()
end

--set Skull Token back to original position
function deleteSkull(currentSkull)
    skullToken[currentSkull].setPosition(skullPosition[currentSkull])
end
--remove Skull Token
function removeSkull()

    if currentSkull == 0 then
        broadcastToAll("There is nothing to remove!", {r=1, g=0, b=0})
    else
        broadcastToAll("Control token removed!", {r=1, g=1, b=1})
        mehrPos(-1)
        deleteSkull(currentSkull)
        currentSkull = currentSkull - 1
    end
    saveStuff()
end

function addCounter(OBJ)--
    if OBJ.script_code == "" then
        if game_num >= 8 then
            obj_script = [[
CONFIG = {
    MIN_VALUE = 0,
    MAX_VALUE = 25,
    FONT_COLOR = {0.856, 0.1, 0.094,255},
    FONT_COLOR2 = {0.905, 0.898, 0.172,255},
    FONT_SIZE = 150,
    COLOR_HEX = "#000000",
    VALUE = 0,
    VALUE2 = 0,
}

function onload(saved_data)
    if saved_data ~= "" then
        local loaded_data = JSON.decode(saved_data)
        CONFIG = loaded_data
    end
    createAll()
end

function updateSave()
    saved_data = JSON.encode(CONFIG)
    self.script_state = saved_data
end

function createAll()
    local scale = {x=1.5, y=1.5, z=1.5}
    local thickness = self.getBoundsNormalized().size.y
    if self.name == "Custom_Tile" then
        thickness = thickness*2
        scale = {1, 1, 1}
    end
    self.createButton({
      label=tostring(CONFIG.VALUE),
      click_function="add_subtract",
      tooltip=ttText,
      function_owner=self,
      position={0.85, 0.5, 0.70},
      height=300,
      width=200,
      scale=scale,
      font_size=CONFIG.FONT_SIZE,
      font_color=CONFIG.FONT_COLOR,
      color={0,0,0,0}
      })

      self.createButton({
        label=tostring(CONFIG.VALUE2),
        click_function="add_subtract2",
        tooltip=ttText,
        index=1,
        function_owner=self,
        position={0.33, 0.5, 0.70},
        height=300,
        width=200,
        scale=scale,
        font_size=CONFIG.FONT_SIZE,
        font_color=CONFIG.FONT_COLOR2,
        color={0,0,0,0}
        })
    setTooltips()
end


function add_subtract(_obj, _color, alt_click)
    mod = alt_click and -1 or 1
    new_value = math.min(math.max(CONFIG.VALUE + mod, CONFIG.MIN_VALUE), CONFIG.MAX_VALUE)
    if CONFIG.VALUE ~= new_value then
        CONFIG.VALUE = new_value
        updateVal()
        updateSave()
    end
end

function add_subtract2(_obj, _color, alt_click)
    mod = alt_click and -1 or 1
    new_value2 = math.min(math.max(CONFIG.VALUE2 + mod, CONFIG.MIN_VALUE), CONFIG.MAX_VALUE)
    if CONFIG.VALUE2 ~= new_value2 then
        CONFIG.VALUE2 = new_value2
        updateVal2()
        updateSave()
    end
end

function updateVal()
    self.editButton({
        index = 0,
        label = tostring(CONFIG.VALUE)
        })
end

function updateVal2()
    self.editButton({
        index = 1,
        label = tostring(CONFIG.VALUE2)
        })
end

function setTooltips()
    self.editButton({
        index = 0,
        value = tostring(CONFIG.VALUE),
        })
    self.editButton({
        index = 1,
        value = tostring(CONFIG.VALUE2),
        })
end
            ]]
        elseif game_num <= 7 then
            obj_script = [[
    CONFIG = {
        MIN_VALUE = 0,
        MAX_VALUE = 25,
        FONT_COLOR = {0.856, 0.1, 0.094,255},
        FONT_SIZE = 150,
        COLOR_HEX = "#000000",
        AttackTokens = 0,
    }

    function onload(saved_data)
        if saved_data ~= "" then
            local loaded_data = JSON.decode(saved_data)
            CONFIG = loaded_data
        end
        createAll()
    end

    function updateSave()
        saved_data = JSON.encode(CONFIG)
        self.script_state = saved_data
    end

    function createAll()
        local scale = {x=1.5, y=1.5, z=1.5}
        local thickness = self.getBoundsNormalized().size.y
        if self.name == "Custom_Tile" then
            thickness = thickness*2
            scale = {1, 1, 1}
        end
        self.createButton({
          label=tostring(CONFIG.AttackTokens),
          click_function="add_subtract",
          tooltip=ttText,
          function_owner=self,
          position={0.85, 0.5, 0.70},
          height=300,
          width=200,
          scale=scale,
          font_size=CONFIG.FONT_SIZE,
          font_color=CONFIG.FONT_COLOR,
          color={0,0,0,0}
          })
          self.createButton({
        label = "Assign",
        click_function = "AssignAttackToken",
        function_owner = nil,
        --color={0,0,0,0},
        index = 5,
        position = {0, 0.5, 0.70},--{16.50, 1.05, 5.00},{-1.6, 0.1, 1.1}
        rotation = {0,0,0},
        width = 520,
        height = 80,
        --scale={x=1.5, y=1.5, z=1.5},
        font_size = 50,
        --font_color={1,1,1,95},
        tooltip="Assign Attack token"
    })
        setTooltips()
    end

    function add_subtract(_obj, _color, alt_click)
        mod = alt_click and -1 or 1
        new_value = math.min(math.max(CONFIG.AttackTokens + mod, CONFIG.MIN_VALUE), CONFIG.MAX_VALUE)
        if CONFIG.AttackTokens ~= new_value then
            CONFIG.AttackTokens = new_value
            updateVal()
            updateSave()
        end
    end

    function setAttack(num)
        CONFIG.AttackTokens = num
        updateVal()
        updateSave()
    end

    function updateVal()
        self.editButton({
            index = 0,
            label = tostring(CONFIG.AttackTokens)
            })
    end


    function setTooltips()
        self.editButton({
            index = 0,
            value = tostring(CONFIG.AttackTokens),
            })
    end
                ]]
        end
        OBJ.script_code = obj_script
        OBJ.reload()
    end
end

--Button for drawing Villain(s).  There are 3 possible villains - calling the function 3 times for game 1, 3 and 5.
function buttonClickedVillainDraw()
    villainDraw(villain1_Zone,villainDraw1_parameters,1)
    villainDraw(villain2_Zone,villainDraw2_parameters,3)
    villainDraw(villain3_Zone,villainDraw3_parameters,5)

    if game_num >= 5 then
        delayedCall('checkBottomVillain',1)
    end
end

--Villain Draw Function.  Used when clicking the 'Draw Villain' button.
function villainDraw(vilPlace_Zone, vilDraw_Param, game_check)
    local VillainDrawObject = ""
    if vilPlace_Zone.getObjects()[1] == nil and game_num >= game_check then
        for i, v in pairs(villainDraw_Zone.getObjects()) do
            if v.tag == 'Deck' then
                VillainDrawObject = villainDraw_Zone.getObjects()[i].takeObject(vilDraw_Param)
            elseif v.tag == 'Card' then
                VillainDrawObject = villainDraw_Zone.getObjects()[i]
                if game_num <= 4 then
                    villainDraw_Zone.getObjects()[i].flip()
                    villainDraw_Zone.getObjects()[i].setPositionSmooth({vilPlace_Zone.getPosition().x, vilPlace_Zone.getPosition().y, vilPlace_Zone.getPosition().z})
                end
            end
        end

        AddVillain(VillainDrawObject.guid)
        --AddAssignButtonToVillain(VillainDrawObject)

        villparms = ({vilZone = vilPlace_Zone})
        delayedCallParam('lockVillain',1.5, villparms)
        if game_num >= 5 then
            delayedCall('checkBottomVillain',2)
        end
    end
end

--Locking Villain
function lockVillain(villparms)
    for i, v in pairs(villparms.vilZone.getObjects()) do
        if v.tag == 'Card' then
            villparms.vilZone.getObjects()[i].lock()
            addCounter(villparms.vilZone.getObjects()[i])
            AddAssignButtonToVillain(villparms.vilZone.getObjects()[i])
        end
    end
end

--Function to check to see if there is only 1 villain remaining after refilling villains.  This is needed for Games 5, 6, 7 to flip over bottom Voldemort Card.
function checkBottomVillain()
    for i, v in pairs(villainDraw_Zone.getObjects()) do
        if v.tag == 'Card' and v.tag ~= "Deck" then
            voldylock = v
            villainDraw_Zone.getObjects()[i].flip()
            addCounter(villainDraw_Zone.getObjects()[i])
            delayedCall('lockVoldy',2)
        end
    end
end

function lockVoldy()
    voldylock.setLock(true)
end

--Button for defeating villain 1.
function buttonClickedVillainDefeat1()
    defeatVillain(villain1_Zone)
end

--Button for defeating villain 2
function buttonClickedVillainDefeat2()
    defeatVillain(villain2_Zone)
end

--Button for defeating villain 3
function buttonClickedVillainDefeat3()
    defeatVillain(villain3_Zone)
end

--Function for defeating a villain - passing in Zone (whether villain 1, 2, or 3)
function defeatVillain(vilZone)
    for i,v in pairs(vilZone.getObjects()) do
        if v.tag == 'Tile' then
            vilZone.getObjects()[i].destroyObject()
        elseif v.tag == 'Card' then
            vilZone.getObjects()[i].clearButtons()
            vilZone.getObjects()[i].script_code = ""

            vilZone.getObjects()[i].unlock()
            vilZone.getObjects()[i].flip()
            vilZone.getObjects()[i].setPositionSmooth({villainDiscard_Zone.getPosition().x, villainDiscard_Zone.getPosition().y, villainDiscard_Zone.getPosition().z})
        end
    end

end
--endregion button functions

--region After start button creation
--Buttons are only for testing. They should be deleted after automation has been made
--Creates all the buttons used after the game is chosen.
function createPlayButtons()
    if game_num >= 13 then
        getObjectFromGUID(replenishPotionTokenButton_GUID).createButton(button_parameters_Replenish_Potion_Token)
    end
    replenishPotionTokenButton = getObjectFromGUID("3dd6e0")
    randomButton = getObjectFromGUID("d99bd0")
    replenishButton = getObjectFromGUID('45e188')
    darkArtsButton = getObjectFromGUID('2ac0ff')
    locationButton = getObjectFromGUID('4a6b9a')
    villainButton = getObjectFromGUID('0bf769')
    villainD1Button = getObjectFromGUID('6878aa')
    villainD2Button = getObjectFromGUID('8a41fe')
    villainD3Button = getObjectFromGUID('d4f4d4')
    addLocationSkull = getObjectFromGUID('b9c8c8')
    removeLocationSkull = getObjectFromGUID('38eb6d')

    randomButton.createButton(button_parameters_random)
    replenishButton.createButton(button_paramters_Replenish)
    locationButton.createButton(button_parameters_Location)
    villainButton.createButton(button_parameters_Villain_Draw)
    villainD1Button.createButton(button_parameters_Villain1)
    darkArtsButton.createButton(button_parameters_DarkArts)
    addLocationSkull.createButton(button_parameters_add_skull)
    removeLocationSkull.createButton(button_parameters_remove_skull)

    for i, v in pairs(location_Zone.getObjects()) do
        location_Zone.getObjects()[i].setLock(true)
    end

    --Only Activate Villain Button 2 if game 3 or higher is selected
    if game_num >= 3 then
        villainD2Button.createButton(button_parameters_Villain2)
    end

    --Only Activate Villain Button 3 if game 5 or higher is selected
    if game_num >= 5 then
        villainD3Button.createButton(button_parameters_Villain3)
    end

    if game_num < 3 then
        villainD2Button.destroyObject()
        villainD3Button.destroyObject()
    elseif game_num < 5 then
        villainD3Button.destroyObject()
    end

end
--endregion After start button creation

--English language
function buttonClickedEnglish()
    if english == false then
        Notes.setNotes([[
        [b]QUICK START:[/b]

Choose the "Hero" you want to play
(Luna will be available at the Monster Expansion 1 and Ginny at the Potion Expansion 1)

Choose the Game you want to play
(It is recommended to start with Game 1)

Wait until the Setup is finished

Read the rules located at the top of the table if you are not familiar with the game

If necessary choose a proficieny (Game 6) and a charm board (Potion Expansion 1)

Press Start


[b]Check the Notebook for more detailed Scripting Explanation[/b]
        ]])
        englishButton.editButton({index =1, label = "âœ“"})
        english = true
        germanButton.editButton({index =1, label = ""})
        german = false

        game8Button.setInvisibleTo({})
        game8Button.createButton(button_parameters_game8)
        game9Button.setInvisibleTo({})
        game9Button.createButton(button_parameters_game9)
        game10Button.setInvisibleTo({})
        game10Button.createButton(button_parameters_game10)
        game11Button.setInvisibleTo({})
        game11Button.createButton(button_parameters_game11)
        game12Button.setInvisibleTo({})
        game12Button.createButton(button_parameters_game12)
        game13Button.setInvisibleTo({})
        game13Button.createButton(button_parameters_game13)
        game14Button.setInvisibleTo({})
        game14Button.createButton(button_parameters_game14)
        game15Button.setInvisibleTo({})
        game15Button.createButton(button_parameters_game15)
    end
end

--region before start buttons functions
--Game 1
function buttonClickedGame1()
    game_num = 1
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game1_bag, location_Zone, game1_location_GUID)
    delayedCall('setupGame1Cards', 0)
    delayedCall('shuffleCards', 3)
end

--Game 2
function buttonClickedGame2()
    game_num = 2
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game2_bag, location_Zone, game2_location_GUID)
    delayedCall('setupGame1Cards', 0)
    delayedCall('setupGame2Cards', 0.1)
    delayedCall('shuffleCards', 3)
end

--Game 3
function buttonClickedGame3()
    game_num = 3
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game3_bag, location_Zone, game3_location_GUID)
    delayedCall('setupGame1Cards', 0)
    delayedCall('setupGame2Cards', 0.1)
    delayedCall('setupGame3Cards', 0.2)
    delayedCall('shuffleCards', 4)
end

--Game 4
function buttonClickedGame4()
    game_num = 4
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game4_bag, location_Zone, game4_location_GUID)
    delayedCall('setupGame1Cards', 0)
    delayedCall('setupGame2Cards', 0.2)
    delayedCall('setupGame3Cards', 0.4)
    delayedCall('setupGame4Cards', 0.6)
    delayedCall('shuffleCards', 4)
end

--Game 5
function buttonClickedGame5()
    game_num = 5
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game5_bag, location_Zone, game5_location_GUID)
    takeFromBag(game5_bag, villainDraw_Zone, game5_voldy_GUID)
    delayedCall('setupGame1Cards', 0)
    delayedCall('setupGame2Cards', 0.1)
    delayedCall('setupGame3Cards', 0.2)
    delayedCall('setupGame4Cards', 0.3)
    delayedCall('setupGame5Cards', 0.4)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 4)
end

--Game 6
function buttonClickedGame6()
    game_num = 6
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game6_bag, location_Zone, game6_location_GUID)
    takeFromBag(game6_bag, villainDraw_Zone, game6_voldy)
    delayedCall('setupGame1Cards', 0)
    delayedCall('setupGame2Cards', 0.1)
    delayedCall('setupGame3Cards', 0.2)
    delayedCall('setupGame4Cards', 0.3)
    delayedCall('setupGame5Cards', 0.4)
    delayedCall('setupGame6Cards', 0.5)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 4)
end

--Game 7
function buttonClickedGame7()
    game_num = 7
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    destroyButtons()
    takeFromBag(game7_bag, location_Zone, game7_location_GUID)
    takeFromBag(game7_bag, villainDraw_Zone, game7_voldy_GUID)
    delayedCall('setupGame1Cards', 0)
    delayedCall('setupGame2Cards', 0.1)
    delayedCall('setupGame3Cards', 0.2)
    delayedCall('setupGame4Cards', 0.3)
    delayedCall('setupGame5Cards', 0.4)
    delayedCall('setupGame6Cards', 0.5)
    delayedCall('setupGame7Cards', 0.6)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 4)
end

--Game 8 (Monster Expansion 1)
function buttonClickedGame8()
    game_num = 8
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 5
    destroyButtons()
    takeFromBag(game8_bag, location_Zone, game8_location_GUID)
    takeFromBag(game8_bag, encounters_draw_Zone, game8_encounters_GUID)
    delayedCall('randomVillains', 0)
    delayedCall('setupGame8Cards', 3)
    takeFromBag(game5_bag, villainDraw_Zone, game5_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 5)
end

--Game 9 (Monster Expansion 2)
function buttonClickedGame9()
    game_num = 9
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 8
    destroyButtons()
    takeFromBag(game9_bag, location_Zone, game9_location_GUID)
    takeFromBag(game9_bag, encounters_draw_Zone, game9_encounters_GUID)
    delayedCall('setupGame8Cards', 0)
    delayedCall('randomVillains', 0.1)
    delayedCall('setupGame9Cards', 3)
    takeFromBag(game6_bag, villainDraw_Zone, game6_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 5)
end

--Game 10 (Monster Expansion 3)
function buttonClickedGame10()
    game_num = 10
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 7
    destroyButtons()
    takeFromBag(game10_bag, location_Zone, game10_location_GUID)
    takeFromBag(game10_bag, encounters_draw_Zone, game10_encounters_GUID)
    delayedCall('setupGame8Cards', 0)
    delayedCall('setupGame9Cards', 0.5)
    delayedCall('setupGame10Cards', 3)
    delayedCall('randomVillains', 0.1)
    takeFromBag(game7_bag, villainDraw_Zone, game7_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 5)
end

--Game 11 (Monster Expansion 4)
function buttonClickedGame11()
    game_num = 11
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 8
    destroyButtons()
    takeFromBag(game11_bag, location_Zone, game11_location_GUID)
    takeFromBag(game11_bag, encounters_draw_Zone, game11_encounters_GUID)
    takeFromBag(game15_bag, horcrux_draw_Zone, game15_encounters_token1_GUID)
    takeFromBag(game15_bag, horcrux_draw_Zone, game15_encounters_token2_GUID)
    takeFromBag(game15_bag, horcrux_draw_Zone, game15_encounters_token3_GUID)
    delayedCall('randomVillains', 0)
    delayedCall('setupGame8Cards', 0.5)
    delayedCall('setupGame9Cards', 1)
    delayedCall('setupGame10Cards', 1.5)
    delayedCall('setupGame11Cards', 3)
    takeFromBag(game11_bag, villainDraw_Zone, game11_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 5)
end

--Game 12 (Potion Expansion 1)
function buttonClickedGame12()
    game_num = 12
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 4
    destroyButtons()
    takeFromBag(game12_bag, location_Zone, game12_location_GUID)
    takeFromBag(game12_bag, encounters_draw_Zone, game12_encounters_GUID)
    delayedCall('randomVillains', 0)
    delayedCall('setupGame12Cards', 2.5)
    takeFromBag(game5_bag, villainDraw_Zone, game5_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 6)
end

--Game 13 (Potion Expansion 2)
function buttonClickedGame13()
    game_num = 13
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 3
    destroyButtons()
    takeFromBag(game13_bag, location_Zone, game13_location_GUID)
    takeFromBag(game13_bag, encounters_draw_Zone, game13_encounters_GUID)
    delayedCall('randomVillains', 0)
    delayedCall('setupGame12Cards', 2.5)
    delayedCall('setupGame13Cards', 3)
    takeFromBag(game6_bag, villainDraw_Zone, game6_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 6)
end

--Game 14 (Potion Expansion 3)
function buttonClickedGame14()
    game_num = 14
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 5
    destroyButtons()
    takeFromBag(game14_bag, location_Zone, game14_location_GUID)
    takeFromBag(game14_bag, encounters_draw_Zone, game14_encounters_GUID)

    delayedCall('randomVillains', 0)
    delayedCall('setupGame12Cards', 2.5)
    delayedCall('setupGame13Cards', 3)
    delayedCall('setupGame14Cards', 3.5)
    takeFromBag(game7_bag, villainDraw_Zone, game7_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 6)
end

--Game 15 (Potion Expansion 4)
function buttonClickedGame15()
    game_num = 15
    setupAddons()
    broadcastToAll("Setup started, please wait...", {r=0.18, g=0.53, b=1})
    startButton.createButton(button_parameters_Start)
    startButton.createButton(button_parameters_Start_delete)
    saveStuff()
    num_villains = 8
    destroyButtons()
    takeFromBag(game15_bag, location_Zone, game15_location_GUID)
    takeFromBag(game15_bag, encounters_draw_Zone, game15_encounters_GUID)
    takeFromBag(game15_bag, horcrux_draw_Zone, game15_encounters_token1_GUID)
    takeFromBag(game15_bag, horcrux_draw_Zone, game15_encounters_token2_GUID)
    takeFromBag(game15_bag, horcrux_draw_Zone, game15_encounters_token3_GUID)
    delayedCall('randomVillains', 0)
    delayedCall('setupGame12Cards', 3)
    delayedCall('setupGame13Cards', 3.1)
    delayedCall('setupGame14Cards', 3.2)
    delayedCall('setupGame15Cards', 3.3)
    takeFromBag(game15_bag, villainDraw_Zone, game15_voldy_GUID)
    delayedCall('flipVillain', 1.5)
    delayedCall('shuffleCards', 6)
end

function randomVillains()
    if game_num <13 or game_num >13 then
        takeFromBag(game4_bag, villainDiscard_Zone, game4_villain_GUID)
    end
    if game_num <13 and game_num ~= 12 then
        takeFromBag(game2_bag, villainDiscard_Zone, game2_villain_GUID)
    end
    if game_num ~= 12 then
        takeFromBag(game3_bag, villainDiscard_Zone, game3_villain_GUID)
        takeFromBag(game5_bag, villainDiscard_Zone, game5_villain_GUID)
    end
    if game_num < 14 and game_num ~= 12 then
        takeFromBag(game1_bag, villainDiscard_Zone, game1_villain_GUID)
        takeFromBag(game6_bag, villainDiscard_Zone, game6_villain_GUID)
    end
    if game_num >11 then
        takeFromBag(game8_bag, villainDiscard_Zone, game8_villain_GUID)
        takeFromBag(game9_bag, villainDiscard_Zone, game9_villain_GUID)
        takeFromBag(game10_bag, villainDiscard_Zone, game10_villain_GUID)
        takeFromBag(game11_bag, villainDiscard_Zone, game11_villain_GUID)
    end

    if game_num == 12 then
        takeFromBag(game2_bag, villainDiscard_Zone, game2_villain_game14_GUID)

    end

    if game_num == 13 then
        takeFromBag(game4_bag, villainDiscard_Zone, game4_villain_game13_GUID)
        takeFromBag(game2_bag, villainDiscard_Zone, game2_villain_game14_GUID)
        takeFromBag(game12_bag, villainDiscard_Zone, game12_villain_game13_GUID)
    end
    if game_num == 14 then
        takeFromBag(game6_bag, villainDiscard_Zone, game6_villain_game15_GUID)
        takeFromBag(game1_bag, villainDiscard_Zone, game1_villain_game14_GUID)
        takeFromBag(game2_bag, villainDiscard_Zone, game2_villain_game14_GUID)
        takeFromBag(game13_bag, villainDiscard_Zone, game13_villain_GUID)
    end
    if game_num == 15 then
        takeFromBag(game6_bag, villainDiscard_Zone, game6_villain_game15_GUID)
        takeFromBag(game14_bag, villainDiscard_Zone, game14_villain_game15_GUID)
    end
    delayedCall('removeVillains', 2)
end

function removeVillains()
    villainDeck = villainDiscard_Zone.getObjects()[1]
    villainDeck.shuffle()
    Wait.time(function() villainDeck.cut(villainDeck.getQuantity() - num_villains)[2].destruct() end, 1)
end

--Function when clicking 'Choose' on proficiency card
function takeProficiencyCard(clicked_object, player)
    local char
    if player == 'White' then
        char = 'Neville'
    elseif player == 'Green' then
        char = 'Hermione'
    elseif player == 'Blue' then
        char = 'Harry'
    elseif player == 'Red' then
        char = 'Ron'
    end

    if char == 'Neville' and nevilleClicked_prof == false then
        for i, v in pairs(nevilleTurn_Zone.getObjects()) do
            nevilleTurn_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({nevilleTurn_Zone.getPosition().x, nevilleTurn_Zone.getPosition().y, nevilleTurn_Zone.getPosition().z})
        clicked_object.rotate({0,0,0})
        nevilleClicked_prof = true
        clicked_object.clearButtons()
    elseif char == 'Neville' and nevilleClicked_prof == true then
        broadcastToColor("You have already chosen a Proficiency Card!", "White", {r=1,g=0,b=0})
    elseif char == 'Ron' and ronClicked_prof == false then
        for i, v in pairs(ronTurn_Zone.getObjects()) do
            ronTurn_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({ronTurn_Zone.getPosition().x, ronTurn_Zone.getPosition().y, ronTurn_Zone.getPosition().z})
        clicked_object.rotate({0,0,0})
        ronClicked_prof = true
        clicked_object.clearButtons()
    elseif char == 'Ron' and ronClicked_prof == true then
        broadcastToColor("You have already chosen a Proficiency Card!", "Red", {r=1,g=0,b=0})
    elseif char == 'Harry' and harryClicked_prof == false then
        for i, v in pairs(harryTurn_Zone.getObjects()) do
            harryTurn_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({harryTurn_Zone.getPosition().x, harryTurn_Zone.getPosition().y, harryTurn_Zone.getPosition().z})
        harryClicked_prof = true
        clicked_object.clearButtons()
    elseif char == 'Harry' and harryClicked_prof == true then
        broadcastToColor("You have already chosen a Proficiency Card!", "Blue", {r=1,g=0,b=0})
    elseif char == 'Hermione' and hermioneClicked_prof == false then
        for i, v in pairs(hermioneTurn_Zone.getObjects()) do
            hermioneTurn_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({hermioneTurn_Zone.getPosition().x, hermioneTurn_Zone.getPosition().y, hermioneTurn_Zone.getPosition().z})
        hermioneClicked_prof = true
        clicked_object.clearButtons()
    elseif char == 'Hermione' and hermioneClicked_prof == true then
        broadcastToColor("You have already chosen a Proficiency Card!", "Green", {r=1,g=0,b=0})
    end
end

--Function when clicking 'Choose' on a Charm board
function takeCharmBoard(clicked_object, player)
    local char
    if player == 'White' then
        char = 'Neville'
    elseif player == 'Green' then
        char = 'Hermione'
    elseif player == 'Blue' then
        char = 'Harry'
    elseif player == 'Red' then
        char = 'Ron'
    end



    if char == 'Neville' and nevilleClicked == false then
        for i, v in pairs(nevilleCharm_Zone.getObjects()) do
            nevilleCharm_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({nevilleCharm_Zone.getPosition().x, nevilleCharm_Zone.getPosition().y, nevilleCharm_Zone.getPosition().z})
        clicked_object.rotate({0,0,0})
        nevilleClicked = true
        clicked_object.clearButtons()
    elseif char == 'Neville' and nevilleClicked == true then
        broadcastToColor("You have already chosen a Charm Board", "White", {r=1,g=0,b=0})
    elseif char == 'Ron' and ronClicked == false then
        for i, v in pairs(ronCharm_Zone.getObjects()) do
            ronCharm_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({ronCharm_Zone.getPosition().x, ronCharm_Zone.getPosition().y, ronCharm_Zone.getPosition().z})
        clicked_object.rotate({0,0,0})
        ronClicked = true
        clicked_object.clearButtons()
    elseif char == 'Ron' and ronClicked == true then
        broadcastToColor("You have already chosen a Charm Board!", "Red", {r=1,g=0,b=0})
    elseif char == 'Harry' and harryClicked == false then
        for i, v in pairs(harryCharm_Zone.getObjects()) do
            harryCharm_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({harryCharm_Zone.getPosition().x, harryCharm_Zone.getPosition().y, harryCharm_Zone.getPosition().z})
        harryClicked = true
        clicked_object.clearButtons()
    elseif char == 'Harry' and harryClicked == true then
        broadcastToColor("You have already chosen a Charm Board!", "Blue", {r=1,g=0,b=0})
    elseif char == 'Hermione' and hermioneClicked == false then
        for i, v in pairs(hermioneCharm_Zone.getObjects()) do
            hermioneCharm_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPosition({hermioneCharm_Zone.getPosition().x, hermioneCharm_Zone.getPosition().y, hermioneCharm_Zone.getPosition().z})
        hermioneClicked = true
        clicked_object.clearButtons()
    elseif char == 'Hermione' and hermioneClicked == true then
        broadcastToColor("You have already chosen a Charm Board", "Green", {r=1,g=0,b=0})
    end
end

--Function when clicking 'Choose' on Luna
function takeLuna(clicked_object, player)
    local char
    if player == 'White' then
        char = 'Neville'
    elseif player == 'Green' then
        char = 'Hermione'
    elseif player == 'Blue' then
        char = 'Harry'
    elseif player == 'Red' then
        char = 'Ron'
    end

    if char == 'Neville' and nevilleClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(nevilleTurn_Zone.getObjects()) do
                nevilleTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game10_patronus_luna_GUID).setPositionSmooth({nevilleTurn_Zone.getPosition().x, nevilleTurn_Zone.getPosition().y, nevilleTurn_Zone.getPosition().z})
        end
        for i, v in pairs(nevilleChar_Zone.getObjects()) do
            nevilleChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(NevilleDraw_Zone.getObjects()) do
            NevilleDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({nevilleChar_Zone.getPosition().x, nevilleChar_Zone.getPosition().y, nevilleChar_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).setPosition({NevilleDraw_Zone.getPosition().x, NevilleDraw_Zone.getPosition().y, NevilleDraw_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).flip()
        getObjectFromGUID(game8_luna_deck_GUID).shuffle()
        nevilleClicked_char = true
        clicked_object.clearButtons()

    elseif char == 'Ron' and ronClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(ronTurn_Zone.getObjects()) do
                ronTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game10_patronus_luna_GUID).setPositionSmooth({ronTurn_Zone.getPosition().x, ronTurn_Zone.getPosition().y, ronTurn_Zone.getPosition().z})
        end
        for i, v in pairs(ronChar_Zone.getObjects()) do
            ronChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(RonDraw_Zone.getObjects()) do
            RonDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({ronChar_Zone.getPosition().x, ronChar_Zone.getPosition().y, ronChar_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).setPosition({RonDraw_Zone.getPosition().x, RonDraw_Zone.getPosition().y, RonDraw_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).flip()
        getObjectFromGUID(game8_luna_deck_GUID).shuffle()
        ronClicked_char = true
        clicked_object.clearButtons()
    elseif char == 'Harry' and harryClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(harryTurn_Zone.getObjects()) do
                harryTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game10_patronus_luna_GUID).setPositionSmooth({harryTurn_Zone.getPosition().x, harryTurn_Zone.getPosition().y, harryTurn_Zone.getPosition().z})
        end
        for i, v in pairs(harryChar_Zone.getObjects()) do
            harryChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(HarryDraw_Zone.getObjects()) do
            HarryDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({harryChar_Zone.getPosition().x, harryChar_Zone.getPosition().y, harryChar_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).setPosition({HarryDraw_Zone.getPosition().x, HarryDraw_Zone.getPosition().y, HarryDraw_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).flip()
        getObjectFromGUID(game8_luna_deck_GUID).shuffle()
        harryClicked_char = true
        clicked_object.clearButtons()
    elseif char == 'Hermione' and hermioneClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(hermioneTurn_Zone.getObjects()) do
                hermioneTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game10_patronus_luna_GUID).setPositionSmooth({hermioneTurn_Zone.getPosition().x, hermioneTurn_Zone.getPosition().y, hermioneTurn_Zone.getPosition().z})
        end
        for i, v in pairs(hermioneChar_Zone.getObjects()) do
            hermioneChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(HermioneDraw_Zone.getObjects()) do
            HermioneDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({hermioneChar_Zone.getPosition().x, hermioneChar_Zone.getPosition().y, hermioneChar_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).setPosition({HermioneDraw_Zone.getPosition().x, HermioneDraw_Zone.getPosition().y, HermioneDraw_Zone.getPosition().z})
        getObjectFromGUID(game8_luna_deck_GUID).flip()
        getObjectFromGUID(game8_luna_deck_GUID).shuffle()
        hermioneClicked_char = true
        clicked_object.clearButtons()
    end
end

--Function when clicking 'Choose' on Ginny
function takeGinny(clicked_object, player)
    local char
    if player == 'White' then
        char = 'Neville'
    elseif player == 'Green' then
        char = 'Hermione'
    elseif player == 'Blue' then
        char = 'Harry'
    elseif player == 'Red' then
        char = 'Ron'
    end

    if char == 'Neville' and nevilleClicked_char == false then
        for i, v in pairs(nevilleTurn_Zone.getObjects()) do
            nevilleTurn_Zone.getObjects()[i].destroyObject()
        end
        getObjectFromGUID(game12_patronus_ginny_GUID).setPositionSmooth({nevilleTurn_Zone.getPosition().x, nevilleTurn_Zone.getPosition().y, nevilleTurn_Zone.getPosition().z})
        for i, v in pairs(nevilleChar_Zone.getObjects()) do
            nevilleChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(NevilleDraw_Zone.getObjects()) do
            NevilleDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({nevilleChar_Zone.getPosition().x, nevilleChar_Zone.getPosition().y, nevilleChar_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).setPosition({NevilleDraw_Zone.getPosition().x, NevilleDraw_Zone.getPosition().y, NevilleDraw_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).flip()
        getObjectFromGUID(game12_ginny_deck_GUID).shuffle()
        nevilleClicked_char = true
        clicked_object.clearButtons()

    elseif char == 'Ron' and ronClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(ronTurn_Zone.getObjects()) do
                ronTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game12_patronus_ginny_GUID).setPositionSmooth({ronTurn_Zone.getPosition().x, ronTurn_Zone.getPosition().y, ronTurn_Zone.getPosition().z})
        end
        for i, v in pairs(ronChar_Zone.getObjects()) do
            ronChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(RonDraw_Zone.getObjects()) do
            RonDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({ronChar_Zone.getPosition().x, ronChar_Zone.getPosition().y, ronChar_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).setPosition({RonDraw_Zone.getPosition().x, RonDraw_Zone.getPosition().y, RonDraw_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).flip()
        getObjectFromGUID(game12_ginny_deck_GUID).shuffle()
        ronClicked_char = true
        clicked_object.clearButtons()
    elseif char == 'Harry' and harryClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(harryTurn_Zone.getObjects()) do
                harryTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game12_patronus_ginny_GUID).setPositionSmooth({harryTurn_Zone.getPosition().x, harryTurn_Zone.getPosition().y, harryTurn_Zone.getPosition().z})
        end
        for i, v in pairs(harryChar_Zone.getObjects()) do
            harryChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(HarryDraw_Zone.getObjects()) do
            HarryDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({harryChar_Zone.getPosition().x, harryChar_Zone.getPosition().y, harryChar_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).setPosition({HarryDraw_Zone.getPosition().x, HarryDraw_Zone.getPosition().y, HarryDraw_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).flip()
        getObjectFromGUID(game12_ginny_deck_GUID).shuffle()
        harryClicked_char = true
        clicked_object.clearButtons()
    elseif char == 'Hermione' and hermioneClicked_char == false then
        if game_num >= 10 then
            for i, v in pairs(hermioneTurn_Zone.getObjects()) do
                hermioneTurn_Zone.getObjects()[i].destroyObject()
            end
            getObjectFromGUID(game12_patronus_ginny_GUID).setPositionSmooth({hermioneTurn_Zone.getPosition().x, hermioneTurn_Zone.getPosition().y, hermioneTurn_Zone.getPosition().z})
        end
        for i, v in pairs(hermioneChar_Zone.getObjects()) do
            hermioneChar_Zone.getObjects()[i].destroyObject()
        end
        for i, v in pairs(HermioneDraw_Zone.getObjects()) do
            HermioneDraw_Zone.getObjects()[i].destroyObject()
        end
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({hermioneChar_Zone.getPosition().x, hermioneChar_Zone.getPosition().y, hermioneChar_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).setPosition({HermioneDraw_Zone.getPosition().x, HermioneDraw_Zone.getPosition().y, HermioneDraw_Zone.getPosition().z})
        getObjectFromGUID(game12_ginny_deck_GUID).flip()
        getObjectFromGUID(game12_ginny_deck_GUID).shuffle()
        hermioneClicked_char = true
        clicked_object.clearButtons()
    end
end
--endregion before start buttons functions
-- function test()
--     getObjectFromGUID("0a8189").setPosition({37.60, 5.25, 23.35})
-- end

--region setup functions
function setupGame1Cards()
    --if english == true then
        takeFromBag(game1_bag, hogwartsDraw_Zone, game1_hogwarts_GUID)
        takeFromBag(game1_bag, villainDiscard_Zone, game1_villain_GUID)
        takeFromBag(game1_bag, darkArtsDraw_Zone, game1_darkarts_GUID)
    --elseif german == true then
    --    takeFromBag(game1_ger_bag, hogwartsDraw_Zone, game1_ger_hogwarts_GUID)
    --    takeFromBag(game1_ger_bag, villainDiscard_Zone, game1_ger_villain_GUID)
    --    takeFromBag(game1_ger_bag, darkArtsDraw_Zone, game1_ger_darkarts_GUID)
        --replace harry board
        --if harryDelete == false then
        --    --TODO heart icons get stuck
        --    getObjectFromGUID("0a8189").setLock(true)
        --    getObjectFromGUID("16e28f").destruct()
        --    game1_ger_bag.takeObject({position = {34.00, 1.10, 24.50}, guid = harryBoard_GUID, smooth = false}).setLock(true)
        --    Wait.time(function() getObjectFromGUID("0a8189").setPosition({37.60, 2.25, 23.35}) end, 3)
        --    Wait.time(function() getObjectFromGUID("0a8189").setLock(false) end, 3)
        --    harryTurn_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, harryTurn_Zone, game1_ger_turn1_GUID)
        --    harryChar_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, harryChar_Zone, game1_ger_harry_GUID)
        --    HarryDraw_Zone.getObjects()[1].destroyObject()
        --    takeFromBagFlip(game1_ger_bag, HarryDraw_Zone, game1_ger_harry_deck_GUID)
        --end
        --
        ----replace ron board
        --if ronDelete == false then
        --    getObjectFromGUID("e396fd").setLock(true)
        --    getObjectFromGUID("bb06fe").destruct()
        --    game1_ger_bag.takeObject({position = {2.00, 1.10, 24.50}, guid = ronBoard_GUID, smooth = false}).setLock(true)
        --    Wait.time(function() getObjectFromGUID("e396fd").setPosition({5.65, 2.25, 23.34}) end, 3)
        --    Wait.time(function() getObjectFromGUID("e396fd").setLock(false) end, 3)
        --    ronTurn_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, ronTurn_Zone, game1_ger_turn2_GUID)
        --    ronChar_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, ronChar_Zone, game1_ger_ron_GUID)
        --    RonDraw_Zone.getObjects()[1].destroyObject()
        --    takeFromBagFlip(game1_ger_bag, RonDraw_Zone, game1_ger_ron_deck_GUID)
        --end
        ----replace hermione board
        --if hermioneDelete == false then
        --    getObjectFromGUID("0b826d").setLock(true)
        --    getObjectFromGUID("71ab61").destruct()
        --    game1_ger_bag.takeObject({position = {-14.00, 1.10, 24.50}, guid = hermioneBoard_GUID, smooth = false}).setLock(true)
        --    Wait.time(function() getObjectFromGUID("0b826d").setPosition({-10.37, 2.25, 23.35}) end, 3)
        --    Wait.time(function() getObjectFromGUID("0b826d").setLock(false) end, 3)
        --    hermioneTurn_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, hermioneTurn_Zone, game1_ger_turn3_GUID)
        --    hermioneChar_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, hermioneChar_Zone, game1_ger_hermione_GUID)
        --    HermioneDraw_Zone.getObjects()[1].destroyObject()
        --    takeFromBagFlip(game1_ger_bag, HermioneDraw_Zone, game1_ger_hermione_deck_GUID)
        --end
        ----replace neville board
        --if nevilleDelete == false then
        --    getObjectFromGUID("710623").setLock(true)
        --    getObjectFromGUID("81b64f").destruct()
        --    game1_ger_bag.takeObject({position = {18.00, 1.10, 24.50}, guid = nevilleBoard_GUID, smooth = false}).setLock(true)
        --    Wait.time(function() getObjectFromGUID("710623").setPosition({21.63, 2.25, 23.33}) end, 3)
        --    Wait.time(function() getObjectFromGUID("710623").setLock(false) end, 3)
        --    nevilleTurn_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, nevilleTurn_Zone, game1_ger_turn4_GUID)
        --    nevilleChar_Zone.getObjects()[1].destroyObject()
        --    takeFromBag(game1_ger_bag, nevilleChar_Zone, game1_ger_neville_GUID)
        --    NevilleDraw_Zone.getObjects()[1].destroyObject()
        --    takeFromBagFlip(game1_ger_bag, NevilleDraw_Zone, game1_ger_neville_deck_GUID)
        --end
    --end
end

--Taking game 2 cards from game 2 bag.  Used for every game that is 2 or higher
function setupGame2Cards()
    takeFromBag(game2_bag, hogwartsDraw_Zone, game2_hogwarts_GUID)
    takeFromBag(game2_bag, villainDiscard_Zone, game2_villain_GUID)
    takeFromBag(game2_bag, darkArtsDraw_Zone, game2_darkarts_GUID)
end

--Taking game 3 cards from game 3 bag.  Used for every game that is 3 or higher.  Also moves new character cards unless game 7 is selected (new character cards are in game 7)
function setupGame3Cards()
    takeFromBag(game3_bag, hogwartsDraw_Zone, game3_hogwarts_GUID)
    takeFromBag(game3_bag, villainDiscard_Zone, game3_villain_GUID)
    takeFromBag(game3_bag, darkArtsDraw_Zone, game3_darkarts_GUID)

    if game_num < 7 then
        if harryDelete == false then
            harryChar_Zone.getObjects()[1].destroyObject()
            takeFromBag(game3_bag, harryChar_Zone, game3_harry_GUID)
        end
        if ronDelete == false then
            ronChar_Zone.getObjects()[1].destroyObject()
            takeFromBag(game3_bag, ronChar_Zone, game3_ron_GUID)
        end
        if hermioneDelete == false then
            hermioneChar_Zone.getObjects()[1].destroyObject()
            takeFromBag(game3_bag, hermioneChar_Zone, game3_hermione_GUID)
        end
        if nevilleDelete == false then
            nevilleChar_Zone.getObjects()[1].destroyObject()
            takeFromBag(game3_bag, nevilleChar_Zone, game3_neville_GUID)
        end
    end
end

--Taking game 4 cards from game 4 bag.  Used for every game that is 4 or higher
function setupGame4Cards()
    takeFromBag(game4_bag, hogwartsDraw_Zone, game4_hogwarts_GUID)
    takeFromBag(game4_bag, villainDiscard_Zone, game4_villain_GUID)
    takeFromBag(game4_bag, darkArtsDraw_Zone, game4_darkarts_GUID)
end

--Taking game 5 cards from game 5 bag.  Used for every game that is 5 or higher
function setupGame5Cards()
    takeFromBag(game5_bag, hogwartsDraw_Zone, game5_hogwarts_GUID)
    takeFromBag(game5_bag, villainDiscard_Zone, game5_villain_GUID)
    takeFromBag(game5_bag, darkArtsDraw_Zone, game5_darkarts_GUID)
end

--Taking game 6 cards from game 6 bag.  Used for every game that is 6 or higher
function setupGame6Cards()
    takeFromBag(game6_bag, hogwartsDraw_Zone, game6_hogwarts_GUID)
    takeFromBag(game6_bag, villainDiscard_Zone, game6_villain_GUID)
    takeFromBag(game6_bag, darkArtsDraw_Zone, game6_darkarts_GUID)
end

--Taking game 7 cards from game 7 bag.  Used for game 7 only
function setupGame7Cards()
    takeFromBag(game7_bag, darkArtsDraw_Zone, game7_darkarts_GUID)
    takeFromBag(game7_bag, hogwartsDraw_Zone, game7_hogwarts_GUID)
    takeFromBag(game7_bag, horcrux_draw_Zone, game7_horcrux_GUID)
    if harryDelete == false then
        harryChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game7_bag, harryChar_Zone, game7_harry_GUID)
    end
    if ronDelete == false then
        ronChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game7_bag, ronChar_Zone, game7_ron_GUID)
    end
    if hermioneDelete == false then
        hermioneChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game7_bag, hermioneChar_Zone, game7_hermione_GUID)
    end
    if nevilleDelete == false then
        nevilleChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game7_bag, nevilleChar_Zone, game7_neville_GUID)
    end
end

function setupDarkArts()
    takeFromBagTimed(game1_bag, darkArtsDraw_Zone, game1_darkarts_GUID)
    takeFromBagTimed(game2_bag, darkArtsDraw_Zone, game2_darkarts_GUID)
    takeFromBagTimed(game3_bag, darkArtsDraw_Zone, game3_darkarts_GUID)
    takeFromBagTimed(game4_bag, darkArtsDraw_Zone, game4_darkarts_GUID)
    takeFromBagTimed(game5_bag, darkArtsDraw_Zone, game5_darkarts_GUID)
    takeFromBagTimed(game6_bag, darkArtsDraw_Zone, game6_darkarts_GUID)
    if game_num <=11 then
        takeFromBagTimed(game7_bag, darkArtsDraw_Zone, game7_darkarts_GUID, true)
    else
        takeFromBagTimed(game7_bag, darkArtsDraw_Zone, game7_darkarts_GUID)
        takeFromBagTimed(game8_bag, darkArtsDraw_Zone, game8_darkarts_GUID)
        takeFromBagTimed(game9_bag, darkArtsDraw_Zone, game9_darkarts_GUID)
        takeFromBagTimed(game10_bag, darkArtsDraw_Zone, game10_darkarts_GUID)
        takeFromBagTimed(game11_bag, darkArtsDraw_Zone, game11_darkarts_GUID, true)
    end
end

function setupHogwarts()
    takeFromBagTimed(game1_bag, hogwartsDraw_Zone, game1_hogwarts_GUID)
    takeFromBagTimed(game2_bag, hogwartsDraw_Zone, game2_hogwarts_GUID)
    takeFromBagTimed(game3_bag, hogwartsDraw_Zone, game3_hogwarts_GUID)
    takeFromBagTimed(game4_bag, hogwartsDraw_Zone, game4_hogwarts_GUID)
    takeFromBagTimed(game5_bag, hogwartsDraw_Zone, game5_hogwarts_GUID)
    takeFromBagTimed(game6_bag, hogwartsDraw_Zone, game6_hogwarts_GUID)
    if game_num <=11 then
        takeFromBagTimed(game7_bag, hogwartsDraw_Zone, game7_hogwarts_GUID, true)
    else
        takeFromBagTimed(game7_bag, hogwartsDraw_Zone, game7_hogwarts_GUID)
        takeFromBagTimed(game8_bag, hogwartsDraw_Zone, game8_hogwarts_GUID)
        takeFromBagTimed(game9_bag, hogwartsDraw_Zone, game9_hogwarts_GUID)
        takeFromBagTimed(game10_bag, hogwartsDraw_Zone, game10_hogwarts_GUID)
        takeFromBagTimed(game11_bag, hogwartsDraw_Zone, game11_hogwarts_GUID, true)
    end
end

function setupGame8Cards()
    setupDarkArts()
    setupHogwarts()
    takeFromBag(game8_bag, detentionDraw_Zone, game8_detention_GUID)
    takeFromBag(game8_bag, darkArtsDraw_Zone, game8_darkarts_GUID)
    takeFromBag(game8_bag, hogwartsDraw_Zone, game8_hogwarts_GUID)
    takeFromBag(game8_bag, lunaDraw_Zone, game8_luna_GUID)
    takeFromBag(game8_bag, lunaDeckDraw_Zone, game8_luna_deck_GUID)
    if game_num == 8 or game_num == 9 then
        delayedCall('setupLunaButton', 5)
    end
    takeFromBag(game8_bag, villainDiscard_Zone, game8_villain_GUID)
    if harryDelete == false then
        harryChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, harryChar_Zone, game8_harry_GUID)
    end
    if ronDelete == false then
        ronChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, ronChar_Zone, game8_ron_GUID)
    end
    if hermioneDelete == false then
        hermioneChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, hermioneChar_Zone, game8_hermione_GUID)
    end
    if nevilleDelete == false then
        nevilleChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, nevilleChar_Zone, game8_neville_GUID)
    end
    if game_num < 11 then

    end
end

function setupGame9Cards()
    takeFromBag(game9_bag, darkArtsDraw_Zone, game9_darkarts_GUID)
    takeFromBag(game9_bag, hogwartsDraw_Zone, game9_hogwarts_GUID)
    takeFromBag(game9_bag, villainDiscard_Zone, game9_villain_GUID)
end

function setupGame10Cards()
    if harryDelete == false then
        harryTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, harryTurn_Zone, game10_patronus_harry_GUID)
    end
    if ronDelete == false then
        ronTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, ronTurn_Zone, game10_patronus_ron_GUID)
    end
    if hermioneDelete == false then
        hermioneTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, hermioneTurn_Zone, game10_patronus_hermione_GUID)
    end
    if nevilleDelete == false then
        nevilleTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, nevilleTurn_Zone, game10_patronus_neville_GUID)
    end

    takeFromBag(game10_bag, lunaPatronusDraw_Zone, game10_patronus_luna_GUID)
    if game_num >= 10 then
        delayedCall('setupLunaButton', 5)
    end
    takeFromBag(game10_bag, darkArtsDraw_Zone, game10_darkarts_GUID)
    takeFromBag(game10_bag, hogwartsDraw_Zone, game10_hogwarts_GUID)
    takeFromBag(game10_bag, villainDiscard_Zone, game10_villain_GUID)
end

function setupGame11Cards()
    takeFromBag(game11_bag, darkArtsDraw_Zone, game11_darkarts_GUID)
    takeFromBag(game11_bag, hogwartsDraw_Zone, game11_hogwarts_GUID)
    takeFromBag(game11_bag, villainDiscard_Zone, game11_villain_GUID)
end

function setupGame12Cards()
    setupDarkArts()
    setupHogwarts()
    delayedCall('setupLunaButton', 7)
    delayedCall('setupProficiency', 7)
    delayedCall('setupGinnyButton', 7)
    if harryDelete == false then
        harryTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, harryTurn_Zone, game10_patronus_harry_GUID)
        harryChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, harryChar_Zone, game8_harry_GUID)
    end
    if ronDelete == false then
        ronTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, ronTurn_Zone, game10_patronus_ron_GUID)
        ronChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, ronChar_Zone, game8_ron_GUID)
    end
    if hermioneDelete == false then
        hermioneTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, hermioneTurn_Zone, game10_patronus_hermione_GUID)
        hermioneChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, hermioneChar_Zone, game8_hermione_GUID)
    end
    if nevilleDelete == false then
        nevilleTurn_Zone.getObjects()[1].destroyObject()
        takeFromBag(game10_bag, nevilleTurn_Zone, game10_patronus_neville_GUID)
        nevilleChar_Zone.getObjects()[1].destroyObject()
        takeFromBag(game8_bag, nevilleChar_Zone, game8_neville_GUID)
    end

    if game_num == 12 then
        takeFromBag(game12_bag, villainDiscard_Zone, game12_villain_alternativ_GUID)
    end
    takeFromBag(game8_bag, detentionDraw_Zone, game8_detention_GUID)
    takeFromBag(game8_bag, lunaDraw_Zone, game8_luna_GUID)
    takeFromBag(game8_bag, lunaDeckDraw_Zone, game8_luna_deck_GUID)
    takeFromBag(game10_bag, lunaPatronusDraw_Zone, game10_patronus_luna_GUID)
    takeFromBag(game12_bag, ginnyDraw_Zone, game12_ginny_GUID)
    takeFromBag(game12_bag, ginnyDeckDraw_Zone, game12_ginny_deck_GUID)
    takeFromBag(game12_bag, ginnyPatronusDraw_Zone, game12_patronus_ginny_GUID)
    takeFromBag(game12_bag, darkArtsDraw_Zone, game12_darkarts_GUID)
    takeFromBag(game12_bag, hogwartsDraw_Zone, game12_hogwarts_GUID)

end

function setupGame13Cards()
    if game_num == 13 then
        takeFromBag(game13_bag, villainDiscard_Zone, game13_villain_alternativ_GUID)
    end
    takeFromBag(game13_bag, potionBoard_Zone, game13_potion_board_GUID)
    takeFromBag(game13_bag, darkArtsDraw_Zone, game13_darkarts_GUID)
    takeFromBag(game13_bag, hogwartsDraw_Zone, game13_hogwarts_GUID)
    delayedCall('setupGame13Potion', 0.5)
end

function setupGame13Potion()
    if game_num == 13 or game_num == 14 then
        takeFromBag(game13_bag, potionBag_Zone, game13_potion_bag_GUID)
    end
    if game_num == 13 then
        takeFromBag(game13_bag, potionShelf_Zone, game13_potion_shelf_GUID)
    end
    takeFromBag(game13_bag, potionTokenDiscard_Zone, game13_potion_discard_bag_GUID)
    takeFromBag(game13_bag, potionCards_Zone, game13_potion_cards_GUID)
    takeFromBag(game13_bag, replenishToken_Zone, replenishPotionTokenButton_GUID)
end

function setupGame14Cards()
    if game_num == 14 then
        takeFromBag(game14_bag, villainDiscard_Zone, game14_villain_alternativ_GUID)
    end
    takeFromBag(game14_bag, darkArtsDraw_Zone, game14_darkarts_GUID)
    takeFromBag(game14_bag, hogwartsDraw_Zone, game14_hogwarts_GUID)
    delayedCall('setupGame14Potion', 0.5)
end

function setupGame14Potion()
    if game_num == 14 then
        takeFromBag(game14_bag, potionShelf_Zone, game14_potion_shelf_GUID)
    end
    takeFromBag(game14_bag, potionCards_Zone, game14_potion_cards_GUID)
end

function setupGame15Cards()
    if game_num == 15 then
        takeFromBag(game15_bag, villainDiscard_Zone, game15_villain_alternativ_GUID)
    end
    takeFromBag(game15_bag, darkArtsDraw_Zone, game15_darkarts_GUID)
    takeFromBag(game15_bag, hogwartsDraw_Zone, game15_hogwarts_GUID)
    delayedCall('setupGame15Potion', 0.5)
end

function setupGame15Potion()
    takeFromBag(game15_bag, potionCards_Zone, game15_potion_cards_GUID)
    takeFromBag(game15_bag, potionShelf_Zone, game15_potion_shelf_GUID)
    takeFromBag(game15_bag, potionBag_Zone, game15_potion_bag_GUID)
end

function setupAddons()

    pos_game1_rule = {34.00, 8, -37.00}
    pos_game2to7_rule = {21.50, 8, -37.00}
    pos_game8_rule = {14.00, 8, -37.00}
    pos_game9to11_rule = {4.00, 8, -37.00}
    pos_game12_rule = {-6.00, 8, -37.00}
    pos_game13to15_rule = {-13.50, 8, -37.00}
    rule_rot = {50.00, 0.00, 0.00}

    game1_rule = "568d8b"
    game1_ger_rule = "654b58"
    game2to7_rule = "0bdb4b"
    game2to7_ger_rule = "394986"
    game8_rule = "6668c9"
    game9to11_rule = "a5608a"
    game12_rule = "b95fa9"
    game13to15_rule = "c7c153"

    if game_num >=1 then
        addLocationSkull_GUID = 'b9c8c8'
        removeLocationSkull_GUID = '38eb6d'
        randomButton_GUID = "d99bd0"
        replenishButton_GUID = '45e188'
        darkArtsButton_GUID = '2ac0ff'
        locationButton_GUID = '4a6b9a'
        villainButton_GUID = '0bf769'
        villainD1Button_GUID = '6878aa'
        villainD2Button_GUID = '8a41fe'
        villainD3Button_GUID = 'd4f4d4'

        game1_bag.take_Object({guid = addLocationSkull_GUID, position = {16.00, 1.05, -5.00}, smooth=false})
        game1_bag.take_Object({guid = removeLocationSkull_GUID, position = {14.50, 1.05, -5.00}, smooth=false})
        game1_bag.take_Object({guid = randomButton_GUID, position = {-1.00, 1.05, -5.50}, smooth=false})
        game1_bag.take_Object({guid = replenishButton_GUID, position = {-1.00, 1.05, 11.00}, smooth=false})
        game1_bag.take_Object({guid = darkArtsButton_GUID, position = {8.75, 1.05, -5.50}, smooth=false})
        game1_bag.take_Object({guid = locationButton_GUID, position = {20.17, 1.05, -5.00}, smooth=false})
        game1_bag.take_Object({guid = villainButton_GUID, position = {21.00, 1.05, 2.50}, smooth=false})
        game1_bag.take_Object({guid = villainD1Button_GUID, position = {16.50, 1.05, 9.00}, smooth=false})
        game1_bag.take_Object({guid = villainD2Button_GUID, position = {12.00, 1.05, 9.00}, smooth=false})
        game1_bag.take_Object({guid = villainD3Button_GUID, position = {7.50, 1.05, 9.00}, smooth=false})

        token0 = "28d337"
        token1 = "0a4925"
        token2 = "fc9b65"
        token3 = "9ba1a3"
        token4 = "e60808"
        token5 = "6dd0fc"
        token6 = "ba9bf6"
        token7 = "846c6b"

        pos0 = {24.85, 1.05, -5.26}
        pos1 = {24.35, 1.05, -5.26}
        pos2 = {23.85, 1.05, -5.26}
        pos3 = {23.35, 1.05, -5.26}
        pos4 = {24.85, 1.05, -4.76}
        pos5 = {24.35, 1.05, -4.76}
        pos6 = {23.85, 1.05, -4.76}
        pos7 = {23.35, 1.05, -4.76}

        game1_bag.take_Object({guid = token0, position = pos0, smooth=false})
        game1_bag.take_Object({guid = token1, position = pos1, smooth=false})
        game1_bag.take_Object({guid = token2, position = pos2, smooth=false})
        game1_bag.take_Object({guid = token3, position = pos3, smooth=false})
        game1_bag.take_Object({guid = token4, position = pos4, smooth=false})
        game1_bag.take_Object({guid = token5, position = pos5, smooth=false})
        game1_bag.take_Object({guid = token6, position = pos6, smooth=false})
        game1_bag.take_Object({guid = token7, position = pos7, smooth=false})

        delayedCall("not_interactable",2)
        delayedCall("getTokenPositions", 2)

        game1_bag.take_Object({guid = game1_rule, position = pos_game1_rule, rotation=rule_rot ,smooth=false}).setLock(true)

    end

    if game_num >1 then
        game2_bag.take_Object({guid = shield_token1_GUID, position = {24.81, 1.10, 2.51}, smooth=false})
        game2_bag.take_Object({guid = shield_token2_GUID, position = {24.81, 1.50, 2.51}, smooth=false})
        if english == true then
            game2_bag.take_Object({guid = game2to7_rule, position = pos_game2to7_rule, rotation=rule_rot , smooth=false}).setLock(true)
        elseif german == true then
            game2_ger_bag.take_Object({guid = game2to7_ger_rule, position = pos_game2to7_rule, rotation=rule_rot , smooth=false}).setLock(true)
        end
    end

    if game_num >= 4 then
        game4_bag.take_Object({guid = green_die_GUID, position = {30.50, 1.06, 2.50}, smooth=false})
        game4_bag.take_Object({guid = red_die_GUID, position = {38.00, 1.06, 2.50}, smooth=false})
        game4_bag.take_Object({guid = yellow_die_GUID, position = {35.50, 1.06, 2.50}, smooth=false})
        game4_bag.take_Object({guid = blue_die_GUID, position = {33.00, 1.06, 2.50}, smooth=false})
    end

    if game_num >= 6 and english == true then
        takeFromBag(game6_bag, prof1_Zone, profCard1_GUID)
        takeFromBag(game6_bag, prof2_Zone, profCard2_GUID)
        takeFromBag(game6_bag, prof3_Zone, profCard3_GUID)
        takeFromBag(game6_bag, prof4_Zone, profCard4_GUID)
        takeFromBag(game6_bag, prof5_Zone, profCard5_GUID)
        takeFromBag(game6_bag, prof6_Zone, profCard6_GUID)
        takeFromBag(game6_bag, prof7_Zone, profCard7_GUID)
        takeFromBag(game6_bag, prof8_Zone, profCard8_GUID)
        takeFromBag(game6_bag, prof9_Zone, profCard9_GUID)
        takeFromBag(game6_bag, prof10_Zone, profCard10_GUID)
        delayedCall('setupProficiency', 6)
    end

    if game_num >= 6 and german == true then
        takeFromBag(game6_ger_bag, prof1_Zone, profCard1_ger_GUID)
        takeFromBag(game6_ger_bag, prof2_Zone, profCard2_ger_GUID)
        takeFromBag(game6_ger_bag, prof3_Zone, profCard3_ger_GUID)
        takeFromBag(game6_ger_bag, prof4_Zone, profCard4_ger_GUID)
        takeFromBag(game6_ger_bag, prof5_Zone, profCard5_ger_GUID)
        takeFromBag(game6_ger_bag, prof6_Zone, profCard6_ger_GUID)
        takeFromBag(game6_ger_bag, prof7_Zone, profCard7_ger_GUID)
        takeFromBag(game6_ger_bag, prof8_Zone, profCard8_ger_GUID)
        takeFromBag(game6_ger_bag, prof9_Zone, profCard9_ger_GUID)
        delayedCall('setupProficiency', 6)
    end

    if game_num >= 7 then
        game7_bag.take_Object({guid = game7_horcrux_token1_GUID, position = {27.10, 1.10, 6.00}, smooth=false})
        game7_bag.take_Object({guid = game7_horcrux_token2_GUID, position = {26.00, 1.10, 6.00}, smooth=false})
        game7_bag.take_Object({guid = game7_horcrux_token3_GUID, position = {27.10, 1.10, 7.10}, smooth=false})
        game7_bag.take_Object({guid = game7_horcrux_token4_GUID, position = {26.00, 1.10, 7.10}, smooth=false})
    end

    if game_num >= 8 then
        game8_bag.take_Object({guid = game8_banish_portal_GUID, position = {-14.00, 1.31, 8.34}, smooth=false})
        game8_bag.take_Object({guid = game8_harp_token_GUID, position = {29.02, 1.05, 6.37}, smooth=false})
        game8_bag.take_Object({guid = game8_rule, position = pos_game8_rule, rotation=rule_rot , smooth=false}).setLock(true)
    end

    if game_num >= 9 then
        game9_bag.take_Object({guid = monster_die_GUID, position = {28.00, 1.06, 2.50}, smooth=false})
        game9_bag.take_Object({guid = game9to11_rule, position = pos_game9to11_rule, rotation=rule_rot , smooth=false}).setLock(true)
    end

    if game_num >= 12 then
        game12_bag.take_Object({guid = game12_rule, position = pos_game12_rule, rotation=rule_rot , smooth=false}).setLock(true)
        takeFromBag(game12_bag, charmBoard1_Zone, charmBoard1_GUID)
        takeFromBag(game12_bag, charmBoard2_Zone, charmBoard2_GUID)
        takeFromBag(game12_bag, charmBoard3_Zone, charmBoard3_GUID)
        takeFromBag(game12_bag, charmBoard4_Zone, charmBoard4_GUID)
        takeFromBag(game12_bag, charmBoard5_Zone, charmBoard5_GUID)
        takeFromBag(game12_bag, charmBoard6_Zone, charmBoard6_GUID)
        takeFromBag(game12_bag, charmBoard7_Zone, charmBoard7_GUID)
        takeFromBag(game12_bag, charmBoard8_Zone, charmBoard8_GUID)
        takeFromBag(game12_bag, charmBoard9_Zone, charmBoard9_GUID)
        takeFromBag(game12_bag, charmBoard10_Zone, charmBoard10_GUID)
        delayedCall('setupCharmBoard', 7)
    end

    if game_num >= 13 then
        game13_bag.take_Object({guid = game13to15_rule, position = pos_game13to15_rule, rotation=rule_rot , smooth=false}).setLock(true)
    end
end
--Setting up the proficiency Cards and the buttons for them.
function setupProficiency()
    if english == true then
        charmBoard_GUIDs = {
            profCard1_GUID,
            profCard2_GUID,
            profCard3_GUID,
            profCard4_GUID,
            profCard5_GUID,
            profCard6_GUID,
            profCard7_GUID,
            profCard8_GUID,
            profCard9_GUID,
            profCard10_GUID
        }
    elseif german == true then
        charmBoard_GUIDs = {
            profCard1_ger_GUID,
            profCard2_ger_GUID,
            profCard3_ger_GUID,
            profCard4_ger_GUID,
            profCard5_ger_GUID,
            profCard6_ger_GUID,
            profCard7_ger_GUID,
            profCard8_ger_GUID,
            profCard9_ger_GUID,
        }
    end
    for _,guid in pairs(charmBoard_GUIDs) do
        getObjectFromGUID(guid).createButton(button_parameters_proficiency)
        getObjectFromGUID(guid).setLock(true)
    end
end

--Setting up the Charm board and the buttons for them.
function setupCharmBoard()
    charmBoard_GUIDs = {
        charmBoard1_GUID,
        charmBoard2_GUID,
        charmBoard3_GUID,
        charmBoard4_GUID,
        charmBoard5_GUID,
        charmBoard6_GUID,
        charmBoard7_GUID,
        charmBoard8_GUID,
        charmBoard9_GUID,
        charmBoard10_GUID
    }

    for _,guid in pairs(charmBoard_GUIDs) do
        getObjectFromGUID(guid).createButton(button_parameters_charm_board)
        getObjectFromGUID(guid).setLock(true)
    end
end

function setupLunaButton()
    getObjectFromGUID(game8_luna_GUID).setLock(true)
    getObjectFromGUID(game8_luna_GUID).createButton(button_parameters_choose_luna)
end

function setupGinnyButton()
    getObjectFromGUID(game12_ginny_GUID).setLock(true)
    getObjectFromGUID(game12_ginny_GUID).createButton(button_parameters_choose_ginny)
end

function setupBuyShop()
    if first_setup == false then
        first_setup = true
        if game_num >= 6 and game_num <= 11 then
            broadcastToAll("GAME " .. game_num .. " : Setup finished!", {r=0, g=1, b=0})
            Wait.time(function() broadcastToAll("Choose Proficiency and press Start Game!", {r=1, g=1, b=1}) end, 1.5)
        elseif game_num <6 then
            broadcastToAll(" GAME " .. game_num .. " : Setup finished, press Start Game!", {r=0, g=1, b=0})
        elseif game_num >= 12 then
            broadcastToAll("GAME " .. game_num .. " : Setup finished!", {r=0, g=1, b=0})
            Wait.time(function() broadcastToAll("Choose Proficiency, Charm Board and press Start Game!", {r=1, g=1, b=1}) end, 1.5)
        end
    end
    buy_zone = getObjectFromGUID("d4dd12")
    cards = buy_zone.getObjects()
    for k, obj in pairs(cards) do
        card = getObjectFromGUID (obj.getGUID())
        card.createButton(button_parameters_buyShopCard)
        card.setLock(true)
        setupFinished = true
    end
end

function setupPotionShop()
    buy_zone = getObjectFromGUID("5c326b")
    cards = buy_zone.getObjects()
    for k, obj in pairs(cards) do
        card = getObjectFromGUID (obj.getGUID())
        card.createButton(button_parameters_buyPotionCard)
        card.createButton(button_parameters_banishPotionCard)
        card.setLock(true)
    end

    buy_zone1 = getObjectFromGUID("5fc6f5")
    cards1 = buy_zone1.getObjects()
    for k1, obj1 in pairs(cards1) do
        card1 = getObjectFromGUID (obj1.getGUID())
        card1.createButton(button_parameters_buyPotionCard)
        card1.createButton(button_parameters_banishPotionCard)
        card1.setLock(true)
    end
end
--endregion setup functions

--Function that starts the game, when done picking proficiencies
function buttonClickedStart()
    if setupFinished == true then
        if Player.Blue.seated or Player.White.seated or Player.Red.seated or Player.Green.seated then
            SetupGameData()

            handblue = Player.Blue.getHandObjects()
            if  Player.Blue.seated and #handblue == 0 and startHarryDestroy == false and harryDelete == false then
                buttonClickedDraw5CardsHarry()
            elseif Player.Blue.seated == false and startHarryDestroy == false and harryDelete == false and startDelete == true then
                startHarryDestroy = true
                buttonClickedDestroyHarry()
            end

            handgreen = Player.Green.getHandObjects()
            if Player.Green.seated and #handgreen == 0 and startHermioneDestroy == false and hermioneDelete == false then
                buttonClickedDraw5CardsHermione()
            elseif not Player.Green.seated and startHermioneDestroy == false and hermioneDelete == false and startDelete == true then
                startHermioneDestroy = true
                buttonClickedDestroyHermione()
            end

            handwhite = Player.White.getHandObjects()
            if Player.White.seated and #handwhite == 0 and startNevilleDestroy == false and nevilleDelete == false then
                buttonClickedDraw5CardsNeville()
            elseif not Player.White.seated and startNevilleDestroy == false and nevilleDelete == false and startDelete == true then
                startNevilleDestroy = true
                buttonClickedDestroyNeville()
            end

            handred = Player.Red.getHandObjects()
            if Player.Red.seated and #handred == 0 and startRonDestroy == false and ronDelete == false then
                buttonClickedDraw5CardsRon()
            elseif not Player.Red.seated and startRonDestroy == false and ronDelete == false and startDelete == true then
                startRonDestroy = true
                buttonClickedDestroyRon()
            end


            checkCharmBoard()
            -- delayedCall('checkCharmBoard', 1)

            if nevilleCharmfinished and harryCharmfinished and hermioneCharmfinished and ronCharmfinished then

                if harryDelete == false then
                    -- destroyHarryAreaButton.destroyObject()
                    harryTurn_Zone.getObjects()[1].setLock(true)
                    harryChar_Zone.getObjects()[1].setLock(true)
                    if game_num >= 12 and harryClicked == true then
                        harryCharm_Zone.getObjects()[1].setLock(true)
                    end
                end

                if hermioneDelete == false then
                    -- destroyHermioneAreaButton.destroyObject()
                    hermioneTurn_Zone.getObjects()[1].setLock(true)
                    hermioneChar_Zone.getObjects()[1].setLock(true)
                    if game_num >= 12 and hermioneClicked == true then
                        hermioneCharm_Zone.getObjects()[1].setLock(true)
                    end
                end

                if nevilleDelete == false then
                    -- destroyNevilleAreaButton.destroyObject()
                    nevilleTurn_Zone.getObjects()[1].setLock(true)
                    nevilleChar_Zone.getObjects()[1].setLock(true)
                    if game_num >= 12 and nevilleClicked == true then
                        nevilleCharm_Zone.getObjects()[1].setLock(true)
                    end
                end

                if ronDelete == false then
                    -- destroyRonAreaButton.destroyObject()
                    ronTurn_Zone.getObjects()[1].setLock(true)
                    ronChar_Zone.getObjects()[1].setLock(true)
                    if game_num >= 12 and ronClicked == true then
                        ronCharm_Zone.getObjects()[1].setLock(true)
                    end
                end


                for i,v in pairs(game6_proficiency_Zone.getObjects()) do
                    game6_proficiency_Zone.getObjects()[i].destroyObject()
                end

                for i,v in pairs(game12_charmBoard_Zone.getObjects()) do
                    game12_charmBoard_Zone.getObjects()[i].destroyObject()
                end



                startButton.destroyObject()
                createPlayButtons()

                for i,v in pairs(extraChar_Zone.getObjects()) do
                    extraChar_Zone.getObjects()[i].destroyObject()
                end

                if game_num >= 4 then
                    getObjectFromGUID(green_die_GUID).setLock(true)
                    getObjectFromGUID(red_die_GUID).setLock(true)
                    getObjectFromGUID(yellow_die_GUID).setLock(true)
                    getObjectFromGUID(blue_die_GUID).setLock(true)
                end

                if game_num >= 8 then
                    getObjectFromGUID(game8_banish_portal_GUID).setLock(true)
                    getObjectFromGUID(game8_banish_portal_GUID).createButton({
                        index = 0,
                        label = "Banish Portal",
                        click_function = "egal",
                        function_owner = nil,
                        position = {0, 1.2, -3.8},
                        rotation = {-30, 0, 0},
                        height = 10,
                        width = 10,
                        font_size = 600,
                        font_color = {0.118, 0.53, 1,255},
                        color = {0, 0, 0, 0}
                    })
                end

                if game_num >= 9 then
                    getObjectFromGUID(monster_die_GUID).setLock(true)
                end
                broadcastToAll("Game started, have fun!", {r=1, g=1, b=1})
            else
                broadcastToAll("Choose your Charm Board!", {r=1, g=0, b=0})
            end
        else
            broadcastToAll("No one is seated, please choose a color", {r=1, g=1, b=1})

        end
    else
        broadcastToAll("Setup not finished!", {r=1, g=0, b=0})
    end
end

--region General Use functions
--Function to delay another function by x seconds (delayTime)
function delayedCall(funcName, delayTime)
    local uniqueID = 'timer'..numTimers
    numTimers = numTimers + 1
    Timer.create({
        identifier = uniqueID,
        function_name = funcName,
        delay = delayTime
    })
end

--Function used to flip the villain over when in game 5 or higher - to flip voldemort over (he needs to be face up in the draw pile - at the bottom of the deck.)
function flipVillain()
    villainDraw_Zone.getObjects()[1].flip()
end

--Destroys the buttons used to select a game, after a game is selected.
function destroyButtons()
    game1Button.destroyObject()
    game2Button.destroyObject()
    game3Button.destroyObject()
    game4Button.destroyObject()
    game5Button.destroyObject()
    game6Button.destroyObject()
    game7Button.destroyObject()
    game8Button.destroyObject()
    game9Button.destroyObject()
    game10Button.destroyObject()
    game11Button.destroyObject()
    game12Button.destroyObject()
    game13Button.destroyObject()
    game14Button.destroyObject()
    game15Button.destroyObject()
end

--Sets up the cards and shuffles them after a game is chosen and after all cards have moved to their proper location.
function shuffleCards()
    hogwartsDraw_Zone.getObjects()[1].flip()
    darkArtsDraw_Zone.getObjects()[1].flip()
    villainDiscard_Zone.getObjects()[1].flip()
    hogwartsDraw_Zone.getObjects()[1].shuffle()
    darkArtsDraw_Zone.getObjects()[1].shuffle()
    villainDiscard_Zone.getObjects()[1].shuffle()
    villainDiscard_Zone.getObjects()[1].setPositionSmooth({villainDraw_Zone.getPosition().x, villainDraw_Zone.getPosition().y, villainDraw_Zone.getPosition().z})
    if harryDelete == false then
        draw1HarryButton.createButton(button_parameters_Draw1CardHarry)
        draw5HarryButton.createButton(button_parameters_Draw5CardsHarry)
        discardHarryButton.createButton(button_parameters_DiscardCardsHarry)
        if HarryDraw_Zone.getObjects()[1] ~= nil then
            HarryDraw_Zone.getObjects()[1].shuffle()
        else
            broadcastToAll("Error, there is no Harry Deck!", {r=1,g=0,b=0})
        end
    end
    if hermioneDelete == false then
        draw1HermioneButton.createButton(button_parameters_Draw1CardHermione)
        draw5HermioneButton.createButton(button_parameters_Draw5CardsHermione)
        discardHermioneButton.createButton(button_parameters_DiscardCardsHermione)
        if HermioneDraw_Zone.getObjects()[1] ~= nil then
            HermioneDraw_Zone.getObjects()[1].shuffle()
        else
            broadcastToAll("Error, there is no Hermione Deck!", {r=1,g=0,b=0})
        end
    end
    if ronDelete == false then
        draw1RonButton.createButton(button_parameters_Draw1CardRon)
        draw5RonButton.createButton(button_parameters_Draw5CardsRon)
        discardRonButton.createButton(button_parameters_DiscardCardsRon)
        if RonDraw_Zone.getObjects()[1] ~= nil then
            RonDraw_Zone.getObjects()[1].shuffle()
        else
            broadcastToAll("Error, there is no Ron Deck!", {r=1,g=0,b=0})
        end
    end
    if nevilleDelete == false then
        draw1NevilleButton.createButton(button_parameters_Draw1CardNeville)
        draw5NevilleButton.createButton(button_parameters_Draw5CardsNeville)
        discardNevilleButton.createButton(button_parameters_DiscardCardsNeville)
        if NevilleDraw_Zone.getObjects()[1] ~= nil then
            NevilleDraw_Zone.getObjects()[1].shuffle()
        else
            broadcastToAll("Error, there is no Neville Deck!", {r=1,g=0,b=0})
        end
    end

    -- if game_num < 6 then
    --     for i,v in pairs(game6_proficiency_Zone.getObjects()) do
    --         game6_proficiency_Zone.getObjects()[i].destroyObject()
    --     end
    -- end

    if game_num >= 13 then
        for i, v in pairs(potionCards_Zone.getObjects()) do
            if v.tag == 'Deck' then
                getObjectFromGUID(v.getGUID()).flip()
                getObjectFromGUID(v.getGUID()).shuffle()
            end
        end
        getObjectFromGUID(game13_potion_discard_bag_GUID).setLock(true)
        if game_num == 13 then
            getObjectFromGUID(game13_potion_bag_GUID).shuffle()
            getObjectFromGUID(game13_potion_board_GUID).setLock(true)
            getObjectFromGUID(game13_potion_shelf_GUID).setLock(true)
            getObjectFromGUID(replenishPotionTokenButton_GUID).setLock(true)
        end
        if game_num == 14 then
            getObjectFromGUID(game13_potion_bag_GUID).shuffle()
            getObjectFromGUID(game13_potion_board_GUID).setLock(true)
            getObjectFromGUID(game14_potion_shelf_GUID).setLock(true)
            getObjectFromGUID(replenishPotionTokenButton_GUID).setLock(true)
        end
        if game_num == 15 then
            getObjectFromGUID(game15_potion_bag_GUID).shuffle()
            getObjectFromGUID(game13_potion_board_GUID).setLock(true)
            getObjectFromGUID(game15_potion_shelf_GUID).setLock(true)
            getObjectFromGUID(replenishPotionTokenButton_GUID).setLock(true)
        end
    end


    game1_bag.destroyObject()
    game2_bag.destroyObject()
    game3_bag.destroyObject()
    game4_bag.destroyObject()
    game5_bag.destroyObject()
    game6_bag.destroyObject()
    game7_bag.destroyObject()
    game8_bag.destroyObject()
    game9_bag.destroyObject()
    game10_bag.destroyObject()
    game11_bag.destroyObject()
    game12_bag.destroyObject()
    game13_bag.destroyObject()
    game14_bag.destroyObject()
    game15_bag.destroyObject()

    delayedCall('buttonClickedReplenish',1.5)
    delayedCall('buttonClickedVillainDraw',1.5)
    if game_num >= 13 then
        delayedCall('buttonClickedReplenishToken',1.5)
    end
end

--Takes <objGUID> from <bagName> and puts it in Zone <setArea>.
function takeFromBagTimed(bagName, setArea, objGUID, restartTimer)
    Wait.Time(function() bagName.takeObject({position = {setArea.getPosition().x, setArea.getPosition().y, setArea.getPosition().z}, guid = objGUID, smooth = false}) end, timer)
    timer = timer + 0.1
    if restartTimer ~= nil and restartTimer == true then
        timer = 0
    end
end

function takeFromBag(bagName, setArea, objGUID)
    bagName.takeObject({position = {setArea.getPosition().x, setArea.getPosition().y, setArea.getPosition().z}, guid = objGUID, smooth = false})
end

function takeFromBagFlip(bagName, setArea, objGUID)
    bagName.takeObject({position = {setArea.getPosition().x, setArea.getPosition().y, setArea.getPosition().z}, guid = objGUID, smooth = false, rotation = {0,0,180}})
end
--endregion General Use functions

--region After Start functions
--Function to draw any hogwarts cards that are needed to fill the 6 slots.
function hogwartsRefresh(cardZone, drawZone, refillParameter)
    if cardZone.getObjects()[1] == nil then
        for i, v in pairs(drawZone.getObjects()) do
            if v.tag == 'Deck' then
                drawZone.getObjects()[i].takeObject(refillParameter)
            elseif v.tag == 'Card' then
                drawZone.getObjects()[i].flip()
                drawZone.getObjects()[i].setPositionSmooth({cardZone.getPosition().x, cardZone.getPosition().y, cardZone.getPosition().z})
            end
        end
    end
end

function potionTokenRefresh(cardZone, drawZone, refillParameter)
    if cardZone.getObjects()[1] == nil then
        for i, v in pairs(potionBag_Zone.getObjects()) do
            if v.tag == 'Bag' then
                discardBag = v
                v2 = getObjectFromGUID(discardBag.getGUID())
                v3 = getObjectFromGUID(discardBag)
                if #v.getObjects() == 0 then
                    d_bag = getObjectFromGUID(game13_potion_discard_bag_GUID)
                    for i=1, d_bag.getQuantity() do
                        v2.putObject(d_bag.takeObject())
                    end
                    broadcastToAll("Potion tokens empty - collecting discard", {r=0.192, g=0.701, b=0.168})
                    collectDiscardToken(cardZone, drawZone, refillParameter)
                else
                    collectDiscardToken(cardZone, drawZone, refillParameter)
                end
            end
        end
    end
    if cardZone == potionToken11_Zone and cardZone.getObjects()[1] == nil then
        buy_zone_discard = getObjectFromGUID("5615e2")
        for i, v in pairs(buy_zone_discard.getObjects()) do
            getObjectFromGUID(game13_potion_discard_bag_GUID).putObject(v)
        end
    end
    if cardZone == potionToken12_Zone and cardZone.getObjects()[1] == nil then
        buy_zone_discard1 = getObjectFromGUID("4716b1")
        for i1, v1 in pairs(buy_zone_discard1.getObjects()) do
            getObjectFromGUID(game13_potion_discard_bag_GUID).putObject(v1)
        end
    end
end

function collectDiscardToken(cardZone, drawZone, refillParameter)
    for i, v in pairs(drawZone.getObjects()) do
        if v.tag == 'Bag' or v.tag == 'Deck' then
            drawZone.getObjects()[i].takeObject(refillParameter)
        elseif v.tag == 'Card' then
            drawZone.getObjects()[i].flip()
            drawZone.getObjects()[i].setPositionSmooth({cardZone.getPosition().x, cardZone.getPosition().y, cardZone.getPosition().z})
        end
    end
end

--function returnPlayer(clicked_object, player)
--    local char
--    if player == 'White' then
--        char = 'Neville'
--    elseif player == 'Green' then
--        char = 'Hermione'
--    elseif player == 'Blue' then
--        char = 'Harry'
--    elseif player == 'Red' then
--        char = 'Ron'
--    end
--    return char
--end

--Function when clicking 'buy' on a shop card
function buyShopCard(clicked_object, player)
    local char
    if Players[ActiveGameData.PlayersTurn.index].Color ~= player then
        print("Only active player can buy Hogwarts cards. Active player is " .. ActiveGameData.PlayersTurn.Name)
        return
    end
    local HogwartsCard = GetCardFromGUID(clicked_object.guid)
    if HogwartsCard.InfluenceCost > Players[ActiveGameData.PlayersTurn.index].Influence then
        print("Not enough Influence to Buy this card")
        return
    end
    if player == 'White' then
        char = 'Neville'
    elseif player == 'Green' then
        char = 'Hermione'
    elseif player == 'Blue' then
        char = 'Harry'
    elseif player == 'Red' then
        char = 'Ron'
    end

    if char == 'Neville' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({NevilleDiscard_Zone.getPosition().x, NevilleDiscard_Zone.getPosition().y, NevilleDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    elseif char == 'Ron' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({RonDiscard_Zone.getPosition().x, RonDiscard_Zone.getPosition().y, RonDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    elseif char == 'Harry' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({HarryDiscard_Zone.getPosition().x, HarryDiscard_Zone.getPosition().y, HarryDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    elseif char == 'Hermione' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({HermioneDiscard_Zone.getPosition().x, HermioneDiscard_Zone.getPosition().y, HermioneDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    end
    Players[ActiveGameData.PlayersTurn.index].Influence = Players[ActiveGameData.PlayersTurn.index].Influence - HogwartsCard.InfluenceCost
    UpdatePlayerStats()
    ResolveTriggers('OnCardAcquire(' .. HogwartsCard.Type .. ')')
end

--Function when clicking 'take' on a potion card
function buyPotionCard(clicked_object, player)
    local char
    if player == 'White' then
        char = 'Neville'
    elseif player == 'Green' then
        char = 'Hermione'
    elseif player == 'Blue' then
        char = 'Harry'
    elseif player == 'Red' then
        char = 'Ron'
    end

    if char == 'Neville' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({NevilleDiscard_Zone.getPosition().x, NevilleDiscard_Zone.getPosition().y, NevilleDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    elseif char == 'Ron' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({RonDiscard_Zone.getPosition().x, RonDiscard_Zone.getPosition().y, RonDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    elseif char == 'Harry' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({HarryDiscard_Zone.getPosition().x, HarryDiscard_Zone.getPosition().y, HarryDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    elseif char == 'Hermione' then
        clicked_object.setLock(false)
        clicked_object.setPositionSmooth({HermioneDiscard_Zone.getPosition().x, HermioneDiscard_Zone.getPosition().y, HermioneDiscard_Zone.getPosition().z})
        clicked_object.clearButtons()
    end
end

--Function when clicking 'banish' on a potion card
function banishPotionCard(clicked_object)
    clicked_object.setLock(false)
    clicked_object.setPositionSmooth({-14.00, 2.25, 8.34})
end

function checkCharmBoard()
    if game_num >= 12 then
        if nevilleClicked == true and nevilleDelete == false then
            nevilleCharmfinished = true
        elseif nevilleDelete == true then
            nevilleCharmfinished = true
        end

        if harryClicked == true and harryDelete == false then
            harryCharmfinished = true
        elseif harryDelete == true then
            harryCharmfinished = true
        end

        if hermioneClicked == true and hermioneDelete == false then
            hermioneCharmfinished = true
        elseif hermioneDelete == true then
            hermioneCharmfinished = true
        end

        if ronClicked == true and ronDelete == false then
            ronCharmfinished = true
        elseif ronDelete == true then
            ronCharmfinished = true
        end
    else
        nevilleCharmfinished = true
        harryCharmfinished = true
        hermioneCharmfinished = true
        ronCharmfinished = true
    end
end

function buttonClickedStartDelete()
    if startDelete == true then
        startDelete = false
        startButton.editButton({index=1, label = "Delete unseated Characters âœ˜", font_color = {0.856, 0.1, 0.094,255}})
    elseif  startDelete == false then
        startDelete = true
        startButton.editButton({index=1, label = "Delete unseated Characters âœ”", font_color = {0.192, 0.701, 0.168,255}})
    end
end



--Function for destroying horcrux
--removed from game - may implement again somehow
--function buttonClickedHorcrux()
--    for i, v in pairs(horcrux_draw_Zone.getObjects()) do
--        if v.tag == 'Deck' then
--            horcrux_draw_Zone.getObjects()[i].takeObject(horcruxDiscard_parameters)
--        elseif v.tag == 'Card' then
--            horcrux_draw_Zone.getObjects()[i].flip()
--            horcrux_draw_Zone.getObjects()[i].setPositionSmooth({horcrux_discard_Zone.getPosition().x, horcrux_discard_Zone.getPosition().y, horcrux_discard_Zone.getPosition().z})
--        end
--    end
--end

--Harry Card Functions----------------------------------------------------------------------------------------------------------------------------------------------------

--clicking Draw 1 card button
function buttonClickedDraw1CardHarry()
    -- if harryDelete == false then
    --     harryDelete = true
    --     destroyHarryAreaButton.destroyObject()
    -- end

    buttonDraw1(HarryDraw_Zone, HarryDiscard_Zone, drawParms_Harry, addParms_Harry)
end

--clicking draw 5 card button
function buttonClickedDraw5CardsHarry()
    -- if harryDelete == false then
    --     harryDelete = true
    --     destroyHarryAreaButton.destroyObject()
    -- end

    buttonDraw5(HarryDraw_Zone, HarryDiscard_Zone, drawParms_Harry, addParms_Harry)
end

--function when clicking discard hand
function buttonClickedDiscardHarry()
    for i, v in pairs(HarryHand_Zone.getObjects()) do
        if v.tag == 'Card' or  v.tag == "Deck" then
            HarryHand_Zone.getObjects()[i].setPosition({HarryDiscard_Zone.getPosition().x, HarryDiscard_Zone.getPosition().y, HarryDiscard_Zone.getPosition().z})
            HarryHand_Zone.getObjects()[i].interactable = true
            HarryHand_Zone.getObjects()[i].removeTag("Played")
            HarryHand_Zone.getObjects()[i].clearButtons()
        end
    end
end

--function when clicking the 'play' button on a card in the hand
function playCardHandHarry(object_clicked)
    object_clicked.clearButtons()
end

--Ron Card Functions----------------------------------------------------------------------------------------------------------------------------------------------------

--clicking Draw 1 card button
function buttonClickedDraw1CardRon()
    -- if ronDelete == false then
    --     ronDelete = true
    --     destroyRonAreaButton.destroyObject()
    -- end

    buttonDraw1(RonDraw_Zone, RonDiscard_Zone, drawParms_Ron, addParms_Ron)
end

--clicking draw 5 card button
function buttonClickedDraw5CardsRon()
    -- if ronDelete == false then
    --     ronDelete = true
    --     destroyRonAreaButton.destroyObject()
    -- end

    buttonDraw5(RonDraw_Zone, RonDiscard_Zone, drawParms_Ron, addParms_Ron)
end

--function when clicking discard hand
function buttonClickedDiscardRon()
    for i, v in pairs(RonHand_Zone.getObjects()) do
        if v.tag == 'Card' or  v.tag == "Deck" then
            RonHand_Zone.getObjects()[i].setPosition({RonDiscard_Zone.getPosition().x, RonDiscard_Zone.getPosition().y, RonDiscard_Zone.getPosition().z})
            RonHand_Zone.getObjects()[i].interactable = true
            RonHand_Zone.getObjects()[i].removeTag("Played")
            RonHand_Zone.getObjects()[i].clearButtons()
        end
    end
end

--function when clicking the 'play' button on a card in the hand
function playCardHandRon(object_clicked)
    object_clicked.clearButtons()
end


--Hermione Card Functions----------------------------------------------------------------------------------------------------------------------------------------------------

--clicking Draw 1 card button
function buttonClickedDraw1CardHermione()
    -- if hermioneDelete == false then
    --     hermioneDelete = true
    --     destroyHermioneAreaButton.destroyObject()
    -- end

    buttonDraw1(HermioneDraw_Zone, HermioneDiscard_Zone, drawParms_Hermione, addParms_Hermione)
end

--clicking draw 5 card button
function buttonClickedDraw5CardsHermione()
    -- if hermioneDelete == false then
    --     hermioneDelete = true
    --     destroyHermioneAreaButton.destroyObject()
    -- end
    buttonDraw5(HermioneDraw_Zone, HermioneDiscard_Zone, drawParms_Hermione, addParms_Hermione)
end

--function when clicking discard hand
function buttonClickedDiscardHermione()
    for i, v in pairs(HermioneHand_Zone.getObjects()) do
        if v.tag == 'Card' or  v.tag == "Deck" then
            HermioneHand_Zone.getObjects()[i].setPosition({HermioneDiscard_Zone.getPosition().x, HermioneDiscard_Zone.getPosition().y, HermioneDiscard_Zone.getPosition().z})
            HermioneHand_Zone.getObjects()[i].interactable = true
            HermioneHand_Zone.getObjects()[i].removeTag("Played")
            HermioneHand_Zone.getObjects()[i].clearButtons()
        end
    end
end

--function when clicking the 'play' button on a card in the hand
function playCardHandHermione(object_clicked)
    object_clicked.clearButtons()
end
--Neville Card Functions----------------------------------------------------------------------------------------------------------------------------------------------------

--clicking Draw 1 card button
function buttonClickedDraw1CardNeville()
    -- if nevilleDelete == false then
    --     nevilleDelete = true
    --     destroyNevilleAreaButton.destroyObject()
    -- end

    buttonDraw1(NevilleDraw_Zone, NevilleDiscard_Zone, drawParms_Neville, addParms_Neville)
end

--clicking draw 5 card button
function buttonClickedDraw5CardsNeville()
    -- if nevilleDelete == false then
    --     nevilleDelete = true
    --     destroyNevilleAreaButton.destroyObject()
    -- end

    buttonDraw5(NevilleDraw_Zone, NevilleDiscard_Zone, drawParms_Neville, addParms_Neville)
end

--function when clicking discard hand
function buttonClickedDiscardNeville()
    for i, v in pairs(NevilleHand_Zone.getObjects()) do
        if v.tag == 'Card' or  v.tag == "Deck" then
            NevilleHand_Zone.getObjects()[i].setPosition({NevilleDiscard_Zone.getPosition().x, NevilleDiscard_Zone.getPosition().y, NevilleDiscard_Zone.getPosition().z})
            -- new code added #new
            NevilleHand_Zone.getObjects()[i].interactable = true
            NevilleHand_Zone.getObjects()[i].removeTag("Played")
            -- end
            NevilleHand_Zone.getObjects()[i].clearButtons()
        end
    end
end

--function when clicking the 'play' button on a card in the hand
function playCardHandNev(object_clicked)
    object_clicked.clearButtons()
end

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

--function to shuffle discard pile
function shuffleDiscard(discardZone, drawZone)
    if discardZone.getObjects()[1] == nil then
        broadcastToAll("No more cards!", {r=1, g=0, b=0})
    else
        discardZone.getObjects()[1].flip()
        discardZone.getObjects()[1].shuffle()
        discardZone.getObjects()[1].setPositionSmooth({drawZone.getPosition().x, drawZone.getPosition().y, drawZone.getPosition().z})
    end
end

--Reusable function for drawing 1 card
function buttonDraw1(charDrawZone, charDiscardZone, drawParms, addParms)
    for i, v in pairs(drawParms.handZone.getObjects()) do
        if v.tag == 'Card' or  v.tag == "Deck" then
            drawParms.handZone.getObjects()[i].setVar('addPlayButtonVar', 'no')
        end
    end

    if charDrawZone.getObjects()[1] == nil then
        shuffleDiscard(charDiscardZone,charDrawZone)
        delayedCallParam('drawSingleCard',1, drawParms)
    else
        drawSingleCard(drawParms)
    end
end

--Reusable function for drawing 5 cards
function buttonDraw5(charDrawZone, charDiscardZone, drawParms, addParms)
    local cardsLeft
    local cardRemainder
    cardsLeft = 0
    cardRemainder = 0

    for i, v in pairs(drawParms.handZone.getObjects()) do
        if v.tag == 'Card' then
            drawParms.handZone.getObjects()[i].setVar('addPlayButtonVar', 'no')
        end
    end

    if charDrawZone.getObjects()[1] == nil then
        cardsLeft = 0
    elseif charDrawZone.getObjects()[1].getQuantity() == -1 then
        cardsLeft = 1
    else
        cardsLeft = charDrawZone.getObjects()[1].getQuantity()
    end

    if cardsLeft > 5 then
        cardsLeft = 5
    else
        cardRemainder = 5 - cardsLeft
    end

    for i=1, cardsLeft do
        drawSingleCard(drawParms)
    end

    for i=1, cardRemainder do
        delayedCallParam('drawSingleCard', 1, drawParms)
    end

    if cardRemainder > 0 then
        shuffleDiscard(charDiscardZone,charDrawZone)
    end
end

--drawing a single card
function drawSingleCard(drawParms)
    for i, v in pairs(drawParms.drawZone.getObjects()) do
        if v.tag == 'Deck' then
            drawParms.drawZone.getObjects()[1].dealToColor(1,drawParms.pcolor)
        elseif v.tag == 'Card' then
            drawParms.drawZone.getObjects()[1].flip()
            drawParms.drawZone.getObjects()[1].setPositionSmooth({drawParms.handZone.getPosition().x-8, drawParms.handZone.getPosition().y, drawParms.handZone.getPosition().z+6})
        end
    end
end

--adding buttons to cards in hand
-- function addButtonsHand(addParms)
--     for i, v in pairs(addParms.handZone.getObjects()) do
--         if v.tag == 'Card' then
--             if addParms.handZone.getObjects()[i].getVar('addPlayButtonVar') == nil then
--                 --addParms.handZone.getObjects()[i].clearButtons()
--                 addParms.handZone.getObjects()[i].createButton(addParms.playParameters)
--             end
--             addParms.handZone.getObjects()[i].setVar('addPlayButtonVar', nil)
--         end
--     end
-- end

--creating timer with parameters (params)
function delayedCallParam(funcName, delayTime, params)
    local uniqueID = 'timer2'..numTimers
    numTimers = numTimers + 1
    Timer.create({
        identifier = uniqueID,
        function_name = funcName,
        parameters = params,
        delay = delayTime
    })
end

--Destroying all objects in harry's play area
function buttonClickedDestroyHarry()
    if confirm_click_harry == true or startHarryDestroy == true then
        harryDelete = true
        -- destroyHarryAreaButton.destroyObject()
        for i, v in pairs(harryZone.getObjects()) do
            harryZone.getObjects()[i].unlock()
            harryZone.getObjects()[i].destroyObject()
        end
    else
        broadcastToAll("Press again delete Harry!", {r=0.856, g=0.1, b=0.094})
        confirm_click_harry = true
        Wait.time(resetTime, 5)
    end
end

--Destroying all objects in hermione's play area
function buttonClickedDestroyHermione()
    if confirm_click_hermione == true or startHermioneDestroy == true then
        hermioneDelete = true
        -- destroyHermioneAreaButton.destroyObject()
        for i, v in pairs(hermioneZone.getObjects()) do
            hermioneZone.getObjects()[i].unlock()
            hermioneZone.getObjects()[i].destroyObject()
        end
    else
        broadcastToAll("Press again to delete Hermione!", {r=0.856, g=0.1, b=0.094})
        confirm_click_hermione = true
        Wait.time(resetTime, 5)
    end
end

--Destroying all objects in Ron's play area
function buttonClickedDestroyRon()
    if confirm_click_ron == true or startRonDestroy == true then
        ronDelete = true
        -- destroyRonAreaButton.destroyObject()
        for i, v in pairs(ronZone.getObjects()) do
            ronZone.getObjects()[i].unlock()
            ronZone.getObjects()[i].destroyObject()
        end
    else
        broadcastToAll("Press again to delete Ron", {r=0.856, g=0.1, b=0.094})
        confirm_click_ron = true
        Wait.time(resetTime, 5)
    end
end

--Destroying all objects in neville's play area
function buttonClickedDestroyNeville()
    if confirm_click_neville == true or startNevilleDestroy == true then
        nevilleDelete = true
        -- destroyNevilleAreaButton.destroyObject()
        for i, v in pairs(nevilleZone.getObjects()) do
            nevilleZone.getObjects()[i].unlock()
            nevilleZone.getObjects()[i].destroyObject()
        end
    else
        broadcastToAll("Press again to delete Neville!", {r=0.856, g=0.1, b=0.094})
        confirm_click_neville = true
        Wait.time(resetTime, 5)
    end
end
--endregion After Start functions

--Beginning of the new code
--region Setup functions
Locations =
{
    {["Name"]="Diagon Alley",["GamePackID"]=1,["Nr"]=1,["VillainControlTokens"]=4,["DarkArtsCardDraw"]=1,["OnRevealEffects"]=""},
    {["Name"]="Mirror of Erised",["GamePackID"]=1,["Nr"]=2,["VillainControlTokens"]=4,["DarkArtsCardDraw"]=1,["OnRevealEffects"]=""}
}


function SetupGameData()
    print("debug")
    Players = {}
    if Player.Blue.seated == true then
        AddPlayer("Blue","Harry",
                getObjectFromGUID("16e28f"),
                "9a0cc7",
                {"7784b4","3d1c13","e9ff0c","3f57b7","e0e7c2","4bcd31","7424c1","0ab487","d67475","3531c8","a4a96e","8025ae" },
                "2545c0",
                "5d7a24"
        )
    end
    if Player.White.seated == true then
        AddPlayer("White","Neville",
                getObjectFromGUID("81b64f"),
                "6baece",
                {"92c76b","0777f2","314c15","836512","34e2c0","1660fe","4d9a93","a75154","85456c","2c569d","55bcf8","252e17"},
                "9835d6",
                "61f15b"
        )
    end
    if Player.Red.seated == true then
        AddPlayer("Red","Ron",
                getObjectFromGUID("bb06fe"),
                "3c3455",
                {"98da10","729a67","471020","f62e12","2c9f9d","d5c837","225640","d0f6eb","4d3082","757e1b","cd8034","dd1359"},
                "71b60e",
                "5d8df4"
        )
    end
    if Player.Green.seated == true then
        AddPlayer("Green","Hermione",
                getObjectFromGUID("71ab61"),
                "1ac1ae",
                {"85eb6b","b7489d","97a620","2c3333","80061b","9de75a","3b11ad","3c610f","d3acf0","390fb5","46cc18","d32b89"},
                "969401",
                "84f93e"
        )
    end
    --TODO Run through Locations and look for Nr = 1 and GamePackID = game_num
    ActiveGameData =
    {
        --Turn specific data
        PlayersTurn = {index = 1, Color = Players[1].Color, Name = Players[1].Name},
        Phase = {Name = "Dark Arts Events", index = 1},
        DarkArtsCardPlayed = 0,
        VillainsResolved = 0,
        HogwartsCardsPlayed = 0,
        AllyCardsPlayed = 0,
        GamePaused = false,
        AwaitingAction = false,
        VillainControl = 0,
        LimitHealthLossToOne = false,
        --TODO Change when Locations implemented
        --Location specific data
        MaxVillainControl = 4,
        DarkArtsCardDraw = 1
    }
    printGamePhase()
    delayedCall("ContinueGame",3)
end

function AddPlayer(PlayerColor,PlayerName,InterfaceObject,PlayZone,PlayFields,DiscardField,DrawField)
    Players[#Players + 1] =
    {
        index = #Players + 1,
        Health = 10,
        Influence = 100,
        Damage = 0,
        Color = PlayerColor,
        Name = PlayerName,
        Stunned = false,
        InterfaceObject = InterfaceObject,
        PlayFields = PlayFields,
        PlayZone = PlayZone,
        DiscardField = DiscardField,
        DrawField = DrawField,
        HealedThisTurn = 0,
        MustDiscard = {Cards = 0,CardType = nil},
        HasChoice = false,
        ChoiceOutcomes = {},
        TheChoice = 0
    }
end

function ContinueGame()
    --print("Continue game. Phase: " .. ActiveGameData.Phase.Name)
    if ActiveGameData.GamePaused == false then
        if ActiveGameData.Phase.index == 0 then --Start of game Phase
            --playDarkArts()
            ActiveGameData.Phase = {Name = "Dark Arts Events", index = 1}
            printGamePhase()
        elseif ActiveGameData.Phase.index == 1 then --Dark Arts Event Phase
            --print("Played Cards: " .. ActiveGameData.DarkArtsCardPlayed .. ". Should draw: " .. ActiveGameData.DarkArtsCardDraw)
            if ActiveGameData.DarkArtsCardPlayed < ActiveGameData.DarkArtsCardDraw then
                playDarkArts()
            else
                ActiveGameData.Phase = {Name = "Villains turn", index = 2}
                printGamePhase()
            end
        elseif ActiveGameData.Phase.index == 2 then --Villains Phase
            if ActiveGameData.VillainsResolved < #VillainsInPlay then
                ResolveNextVillain()
            else
                ActiveGameData.Phase = {Name = "Heroes Play", index = 3}
            end
        elseif ActiveGameData.Phase.index == 3 then --Heroes Play Phase
            printGamePhase()
            AddEndTurnButton()
            ActiveGameData.GamePaused = true
            ActiveGameData.Phase = {Name = "Awaiting End turn", index = 4}
        else
            return
        end
        delayedCall("ContinueGame",3)
    end
end

function printGamePhase()
    print("New Phase: " .. ActiveGameData.Phase.Name)
end

function AddEndTurnButton()
    local Buttonparam = {
        label = "End Turn",
        click_function = "EndTurn",
        function_owner = nil,
        --color={0,0,0,0},
        index = 10,
        position = { 0, 0.50, -3.4},--{16.50, 1.05, 5.00},{-1.6, 0.1, 1.1}
        rotation = {0,0,0},
        width = 1560,
        height = 240,
        --scale={x=1.5, y=1.5, z=1.5},
        font_size = 150,
        --font_color={1,1,1,95},
        tooltip="End your turn"
    }
    PlayerButtons = Players[ActiveGameData.PlayersTurn.index].InterfaceObject.getButtons()
    for i=1,#PlayerButtons,1 do
        if string.find(PlayerButtons[i].click_function,"EndTurn") then
            return
        end
    end
    Players[ActiveGameData.PlayersTurn.index].InterfaceObject.createButton(Buttonparam)
end

function EndTurn()
    if ActiveGameData.AwaitingAction == true or ActiveGameData.GamePaused == false then
        print("You can't end turn right now. Awaiting Player action")
        return
    end
    Players[ActiveGameData.PlayersTurn.index].Damage = 0
    Players[ActiveGameData.PlayersTurn.index].Influence = 0
    --Players[ActiveGameData.PlayersTurn.index].LimitHealthLossToOne = false
    for i=1,#Players,1 do
        if Players[i].Stunned == true then
            Players[i].Health = 10
            Players[i].Stunned = false
        end
    end

    -- Replenish shop
    buttonClickedReplenish()
    buttonClickedVillainDraw()
    if ActiveGameData.MaxVillainControl == ActiveGameData.VillainControl then
        buttonClickedLocation()
    end
    local CardsInHand = {}
    local DiscardZone = {}
    if Players[ActiveGameData.PlayersTurn.index].Color == "Blue" then
        buttonClickedDiscardHarry()
        buttonClickedDraw5CardsHarry()
        CardsInHand = Player.Blue.getHandObjects()
        DiscardZone = HarryDiscard_Zone
    elseif Players[ActiveGameData.PlayersTurn.index].Color == "White" then
        buttonClickedDiscardNeville()
        buttonClickedDraw5CardsNeville()
        CardsInHand = Player.White.getHandObjects()
        DiscardZone = NevilleDiscard_Zone
    elseif Players[ActiveGameData.PlayersTurn.index].Color == "Red" then
        buttonClickedDiscardRon()
        buttonClickedDraw5CardsRon()
        CardsInHand = Player.Red.getHandObjects()
        DiscardZone = RonDiscard_Zone
    elseif Players[ActiveGameData.PlayersTurn.index].Color == "Green" then
        buttonClickedDiscardHermione()
        buttonClickedDraw5CardsHermione()
        CardsInHand = Player.Green.getHandObjects()
        DiscardZone = HermioneDiscard_Zone
    end
    for i = 1,#CardsInHand,1 do
        CardsInHand[i].setPosition({DiscardZone.getPosition().x, DiscardZone.getPosition().y, DiscardZone.getPosition().z})
    end
    broadcastToAll(ActiveGameData.PlayersTurn.Name .. " ended his/her turn")
    local PlayerButtons = Players[ActiveGameData.PlayersTurn.index].InterfaceObject.getButtons()
    for i =1,#PlayerButtons,1 do
        if string.find(PlayerButtons[i].click_function,"EndTurn") then
            Players[ActiveGameData.PlayersTurn.index].InterfaceObject.removeButton(PlayerButtons[i].index)
            break
        end
    end
    local nextPlayerIndex = ActiveGameData.PlayersTurn.index + 1
    if nextPlayerIndex > #Players then nextPlayerIndex = 1 end
    ActiveGameData.PlayersTurn = {index = nextPlayerIndex, Color = Players[nextPlayerIndex].Color, Name = Players[nextPlayerIndex].Name}
    ActiveGameData.Phase = {Name = "Dark Arts Events", index = 1}
    ActiveGameData.DarkArtsCardPlayed = 0
    ActiveGameData.HogwartsCardsPlayed = 0
    ActiveGameData.AllyCardsPlayed = 0
    ActiveGameData.GamePaused = false
    ActiveGameData.VillainsResolved = 0
    RemoveThisTurnTriggers()
    delayedCall("ContinueGame",3)
end

--endregion Setup functions

--Replace GUIDs with your own!
objectTable = {
    "f2ff18","f21cd8",'14f1a0','a1b15e','e84f2e','8f6f1d','f4686c','fe3906',"c3482c","0b0257","a273e8","1671e1","2ee07b","78a1d6","b9c8c8","38eb6d","4a6b9a","0bf769","2ac0ff","45e188","6878aa","8a41fe","d4f4d4","2abbcb","f16d90","c91fdf","299b65","d99bd0","ad7447","50a77b","f4a2e0","fa087a","7e6b15","9f85af","18b311","c86088","3de612","a334ca","f1a019","6d745b","8358e6","28728f","9efc6d","339fd8","28d337","0a4925","fc9b65","9ba1a3","e60808","6dd0fc","ba9bf6","846c6b","50a7ef","5dd4cf","c57c2a","7a0eba", "36c34c", "03635a"}
-- Loop entries in the object table setting interactable to false
function not_interactable()
    --Loop entries in the object table setting interactable to false
    for i=1, #objectTable, 1 do
        obj = getObjectFromGUID(objectTable[i])
        if obj ~= nil then
            obj.interactable = false
        end
    end
end

--region Dark Arts functions
DarkArtsLookUp = {
    [1]={["DarkArtID"]=1,["Name"]="Petrification",["GamePackID"]=1,["OnRevealEffects"]="{Health(All,-1)}",["AfterPlayTriggers"]="{NoDrawCard(ThisTurn)}"},
    [2]={["DarkArtID"]=2,["Name"]="Expulso",["GamePackID"]=1,["OnRevealEffects"]="{Health(Self,-2)}",["AfterPlayTriggers"]=""},
    [3]={["DarkArtID"]=3,["Name"]="Flipendo",["GamePackID"]=1,["OnRevealEffects"]="{Health(Self,-1);DiscardCardVillain(Self,Any,1)}",["AfterPlayTriggers"]=""},
    [4]={["DarkArtID"]=4,["Name"]="He-Who-Must-Not-Be-Named",["GamePackID"]=1,["OnRevealEffects"]="{VillainControl(1)}",["AfterPlayTriggers"]=""},
    [5]={["DarkArtID"]=5,["Name"]="Hand of Glory",["GamePackID"]=2,["OnRevealEffects"]="{Health(Self,-1);VillainControl(1)}",["AfterPlayTriggers"]=""},
    [6]={["DarkArtID"]=6,["Name"]="Poison",["GamePackID"]=2,["OnRevealEffects"]="{Choice(All,{DiscardCardVillain(Self,Ally,1)},{Health(Self,-2)})}",["AfterPlayTriggers"]=""},
    [7]={["DarkArtID"]=7,["Name"]="Relashio",["GamePackID"]=2,["OnRevealEffects"]="{Choice(All,{DiscardCardVillain(Self,Item,1)},{Health(Self,-2)})}",["AfterPlayTriggers"]=""},
    [8]={["DarkArtID"]=8,["Name"]="Obliviate",["GamePackID"]=2,["OnRevealEffects"]="{Choice(All,{DiscardCardVillain(Self,Spell,1)},{Health(Self,-2)})}",["AfterPlayTriggers"]=""}
}


DarkArts = {
    [1]={["GUID"]="061c2a",["DarkArtID"]=4,["Name"]="He-Who-Must-Not-Be-Named"},
    [2]={["GUID"]="fcb3d8",["DarkArtID"]=3,["Name"]="Flipendo"},
    [3]={["GUID"]="b01e12",["DarkArtID"]=1,["Name"]="Petrification"},
    [4]={["GUID"]="f323fb",["DarkArtID"]=3,["Name"]="Flipendo"},
    [5]={["GUID"]="ec00a4",["DarkArtID"]=2,["Name"]="Expulso"},
    [6]={["GUID"]="ac7873",["DarkArtID"]=2,["Name"]="Expulso"},
    [7]={["GUID"]="8fabe2",["DarkArtID"]=4,["Name"]="He-Who-Must-Not-Be-Named"},
    [8]={["GUID"]="1238d2",["DarkArtID"]=4,["Name"]="He-Who-Must-Not-Be-Named"},
    [9]={["GUID"]="c91993",["DarkArtID"]=2,["Name"]="Expulso"},
    [10]={["GUID"]="3f8bf7",["DarkArtID"]=1,["Name"]="Petrification"},
    [11]={["GUID"]="3c3585",["DarkArtID"]=5,["Name"]="Hand of Glory"},
    [12]={["GUID"]="00751b",["DarkArtID"]=6,["Name"]="Poison"},
    [13]={["GUID"]="cb61c3",["DarkArtID"]=5,["Name"]="Hand of Glory"},
    [14]={["GUID"]="f563d6",["DarkArtID"]=7,["Name"]="Relashio"},
    [15]={["GUID"]="2e8663",["DarkArtID"]=8,["Name"]="Obliviate"}
}



function playDarkArts()
    local drawCard_parameters = {
        position = {darkArtsDiscard_Zone.getPosition().x, darkArtsDiscard_Zone.getPosition().y, darkArtsDiscard_Zone.getPosition().z},
        flip = true,
        top = true
    }
    local darkArtsCardPile = darkArtsDraw_Zone.getObjects()
    local cardsLeft = 0
    --print("Ready to draw Dark Art Card. ")-- .. "There is " .. str(table.getn(darkArtsCardPile)) .. " deck in draw area")
    --for i,v in ipairs(darkArtsCardPile) do
    --        cardsLeft = cardsLeft + 1
    --end

    cardsLeft = #darkArtsCardPile

    if cardsLeft == 0 then
        local darkArtsDiscard = darkArtsDiscard_Zone.getObjects()
        darkArtsDiscard[1].flip()
        darkArtsDiscard[1].shuffle()
        darkArtsDiscard[1].setPosition({darkArtsDraw_Zone.getPosition().x, darkArtsDraw_Zone.getPosition().y, darkArtsDraw_Zone.getPosition().z})
        darkArtsCardPile = darkArtsDiscard
        darkArtsCardPile[1].takeObject({
            position = {darkArtsDiscard_Zone.getPosition().x, darkArtsDiscard_Zone.getPosition().y, darkArtsDiscard_Zone.getPosition().z},
            flip = false,
            top = true
        })
        return
    end
    -- We are going to assume that only the deck is in the draw zone
    local darkArtsCardDrawn = ""
    if darkArtsCardPile[1].tag == "Deck" then
        darkArtsCardDrawn = darkArtsCardPile[1].takeObject(drawCard_parameters)
    elseif darkArtsCardPile[1].tag == "Card" then
        darkArtsCardPile[1].flip()
        darkArtsCardPile[1].setPositionSmooth({darkArtsDiscard_Zone.getPosition().x, darkArtsDiscard_Zone.getPosition().y, darkArtsDiscard_Zone.getPosition().z})
        darkArtsCardDrawn = darkArtsCardPile[1]
    end

    local DarkArtID = 0
    for i,v in ipairs(DarkArts) do
        --print("Comparing " .. object.guid .. " with " .. HogwartsCards.GUID[i])
        if DarkArts[i].GUID == darkArtsCardDrawn.guid then
            DarkArtID = DarkArts[i].DarkArtID
            break
        end
    end
    if DarkArtID == 0 then error("Dark Arts Card not yet implemented") end

    --print("DarkArtsCardID: " .. DarkArtID)
    local DarkArtsOnRevealEffect = ""
    local DarkArtsTriggerProcess = ""
    for i=1,#DarkArtsLookUp,1 do
        --print("Look up table DarkArtID: " .. DarkArtsLookUp[i].DarkArtID)
        if DarkArtsLookUp[i].DarkArtID == DarkArtID then
            DarkArtsOnRevealEffect = DarkArtsLookUp[i].OnRevealEffects
            DarkArtsTriggerProcess = DarkArtsLookUp[i].AfterPlayTriggers
            break
        end
    end
    if DarkArtsOnRevealEffect == "" then error("Dark Arts Card is missing OnRevealEffect") end
    ActiveGameData.DarkArtsCardPlayed = ActiveGameData.DarkArtsCardPlayed + 1
    if DarkArtsTriggerProcess ~= "" then
        SetupTrigger(DarkArtsTriggerProcess)
    end
    RunEffect(DarkArtsOnRevealEffect)
end
--endregion Dark Arts functions

--region Villain functions
VillainsLookup = {
    [1]={["VillainID"]=1,["AttackTokensAssigned"]=0,["Name"]="Quirinus Quirrel",["GUID"]="c4c858",["ActiveEffects"]="{Health(Self,-1)}",["Rewards"]="{Health(All,1),Influence(All,1)}",["Healthpoints"]=6,["InfluencePoints"]=0,["GamePackID"]=1,["IsVillain"]=1,["IsCreature"]=0,["TriggerEffect"]="",["Trigger"]="",["TriggerProcess"]=""},
    [2]={["VillainID"]=2,["AttackTokensAssigned"]=0,["Name"]="Crabbe & Goyle",["GUID"]="27cb9e",["ActiveEffects"]="",["Rewards"]="{DrawCard(All,1)}",["Healthpoints"]=5,["InfluencePoints"]=0,["GamePackID"]=1,["IsVillain"]=1,["IsCreature"]=0,["TriggerEffect"]="Health(Self,-1)",["Trigger"]="DiscardCardVillain",["TriggerProcess"]="{DiscardCardVillain({Health(Self,-1)})}"},
    [3]={["VillainID"]=3,["AttackTokensAssigned"]=0,["Name"]="Draco Malfoy",["GUID"]="9a4429",["ActiveEffects"]="",["Rewards"]="{VillainControl(-1)}",["Healthpoints"]=6,["InfluencePoints"]=0,["GamePackID"]=1,["IsVillain"]=1,["IsCreature"]=0,["TriggerEffect"]="Health(Self,-2)",["Trigger"]="VillainControlAdded",["TriggerProcess"]="{VillainControlAdded({Health(Self,-2)})}"},
    [4]={["VillainID"]=4,["AttackTokensAssigned"]=0,["Name"]="Tom Riddle",["GUID"]="7ed58c",["ActiveEffects"]="{ForEachAlly(Self,Choice({DiscardCardVillain(Self,Any,1)},{Health(Self,-2)}))}",["Rewards"]="{Choice(All,Health(Self,2),AllyFromDiscard(Self,1))}",["Healthpoints"]=6,["InfluencePoints"]=0,["GamePackID"]=2,["IsVillain"]=1,["IsCreature"]=0,["TriggerEffect"]="",["Trigger"]="",["TriggerProcess"]=""},
    [5]={["VillainID"]=5,["AttackTokensAssigned"]=0,["Name"]="Basilisk",["GUID"]="7ed58e",["ActiveEffects"]="",["Rewards"]="{DrawCard(All,1);VillainControl(-1)}",["Healthpoints"]=8,["InfluencePoints"]=0,["GamePackID"]=2,["IsVillain"]=1,["IsCreature"]=0,["TriggerEffect"]="",["Trigger"]="",["TriggerProcess"]="{NoDrawCard(Always)}"},
    [6]={["VillainID"]=6,["AttackTokensAssigned"]=0,["Name"]="Lucius Malfoy",["GUID"]="7ed58d",["ActiveEffects"]="",["Rewards"]="{Influence(All,1);VillainControl(-1)}",["Healthpoints"]=7,["InfluencePoints"]=0,["GamePackID"]=2,["IsVillain"]=1,["IsCreature"]=0,["TriggerEffect"]="",["Trigger"]="",["TriggerProcess"]="{VillainControlAdded({RemoveAttackFromAllVillains(1)})}"}
}

VillainsInPlay = {}

function AddVillain(GUID)
    for i=1,#VillainsLookup,1 do
        if VillainsLookup[i].GUID == GUID then
            VillainsInPlay[#VillainsInPlay + 1] = VillainsLookup[i]
            if VillainsLookup[i].TriggerProcess ~= "" then
                SetupTrigger(VillainsLookup[i].TriggerProcess)
            end
        end
    end
end

function ResolveNextVillain()
    if VillainsInPlay[ActiveGameData.VillainsResolved+1].ActiveEffects ~= "" then
        print(VillainsInPlay[ActiveGameData.VillainsResolved+1].Name .. " uses active ability")
        RunEffect(VillainsInPlay[ActiveGameData.VillainsResolved+1].ActiveEffects)
    else
        print(VillainsInPlay[ActiveGameData.VillainsResolved+1].Name .. " has no active ability")
    end
    ActiveGameData.VillainsResolved = ActiveGameData.VillainsResolved + 1
end

function AddAssignButtonToVillain(obj)
    obj.createButton({
        label = "Assign",
        click_function = "AssignAttackToken",
        function_owner = nil,
        --color={0,0,0,0},
        index = 5,
        position = {0, 0.5, 0.70},--{16.50, 1.05, 5.00},{-1.6, 0.1, 1.1}
        rotation = {0,0,0},
        width = 520,
        height = 80,
        --scale={x=1.5, y=1.5, z=1.5},
        font_size = 50,
        --font_color={1,1,1,95},
        tooltip="Assign Attack token"
    })
end

function AssignAttackToken(_obj,_color, alt_click)
    if Players[ActiveGameData.PlayersTurn.index].Damage == 0 then
        return
    else
        Players[ActiveGameData.PlayersTurn.index].Damage = Players[ActiveGameData.PlayersTurn.index].Damage - 1
        UpdatePlayerStats()
    end
    for i = 1,#VillainsInPlay,1 do
        if VillainsInPlay[i].GUID == _obj.guid then
            VillainsInPlay[i].AttackTokensAssigned = VillainsInPlay[i].AttackTokensAssigned + 1
            if VillainsInPlay[i].AttackTokensAssigned == VillainsInPlay[i].Healthpoints then
                RemoveTrigger(VillainsInPlay[i].TriggerProcess)
                RunEffect(VillainsInPlay[i].Rewards)
                table.remove(VillainsInPlay,i)
                DefeatVillain(_obj)
                --TODO if there are no more villains, the heroes have won!
                ResolveTriggers("VillainDefeat")
                return
            end
            _obj.call("setAttack",VillainsInPlay[i].AttackTokensAssigned)
        end
    end
end

function DefeatVillain(obj)
    obj.clearButtons()
    obj.script_code = ""
    obj.unlock()
    obj.flip()
    obj.setPositionSmooth({villainDiscard_Zone.getPosition().x, villainDiscard_Zone.getPosition().y, villainDiscard_Zone.getPosition().z})
end
--endregion Villain functions

--region Play card functions
HogwartsCardsLookUp = {
    [1]={["HogwartsCardID"]=1,["Name"]="Oliver Wood",["Type"]="Ally",["InfluenceCost"]=3,["GamePackID"]="1",["OnPlayEffects"]="{Attack(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{VillainDefeat(Once,{Health(Any,2)})}"},
    [2]={["HogwartsCardID"]=2,["Name"]="Quidditch Gear",["Type"]="Item",["InfluenceCost"]=3,["GamePackID"]="1",["OnPlayEffects"]="{Attack(Self,1);Health(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [3]={["HogwartsCardID"]=3,["Name"]="Wingardium Leviosa",["Type"]="Spell",["InfluenceCost"]=2,["GamePackID"]="1",["OnPlayEffects"]="{Influence(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{OnCardAcquire(Item,Everytime,Choice(PutAcquiredCardOnTopOfDeck,nil))}"},
    [4]={["HogwartsCardID"]=4,["Name"]="Lumos",["Type"]="Spell",["InfluenceCost"]=4,["GamePackID"]="1",["OnPlayEffects"]="{DrawCard(All,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [5]={["HogwartsCardID"]=5,["Name"]="Essence Of Dittany",["Type"]="Item",["InfluenceCost"]=2,["GamePackID"]="1",["OnPlayEffects"]="{Health(Any,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [6]={["HogwartsCardID"]=6,["Name"]="Reparo",["Type"]="Spell",["InfluenceCost"]=3,["GamePackID"]="1",["OnPlayEffects"]="{Choice(Self,Influence(Self,2),DrawCard(Self,1))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [7]={["HogwartsCardID"]=7,["Name"]="Incendio",["Type"]="Spell",["InfluenceCost"]=4,["GamePackID"]="1",["OnPlayEffects"]="{Attack(Self,1);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [8]={["HogwartsCardID"]=8,["Name"]="Albus Dumbledore",["Type"]="Ally",["InfluenceCost"]=8,["GamePackID"]="1",["OnPlayEffects"]="{Attack(All,1);Influence(All,1);Health(All,1);DrawCard(All,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [9]={["HogwartsCardID"]=9,["Name"]="Rubeus Hagrid",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="1",["OnPlayEffects"]="{Attack(Self,1);Health(All,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [10]={["HogwartsCardID"]=10,["Name"]="Descendo",["Type"]="Spell",["InfluenceCost"]=5,["GamePackID"]="1",["OnPlayEffects"]="{Attack(Self,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [11]={["HogwartsCardID"]=11,["Name"]="Sorting Hat",["Type"]="Item",["InfluenceCost"]=4,["GamePackID"]="1",["OnPlayEffects"]="{Influence(Self,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{OnCardAcquire(Ally,Everytime,Choice(PutAcquiredCardOnTopOfDeck,nil))}"},
    [12]={["HogwartsCardID"]=12,["Name"]="Golden Snitch",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="1",["OnPlayEffects"]="{Influence(Self,2);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [13]={["HogwartsCardID"]=13,["Name"]="Arthur Weasley",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="2",["OnPlayEffects"]="{Influence(All,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [14]={["HogwartsCardID"]=14,["Name"]="Polyjuice Potion",["Type"]="Item",["InfluenceCost"]=3,["GamePackID"]="2",["OnPlayEffects"]="{CopyPlayedAlly}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [15]={["HogwartsCardID"]=15,["Name"]="Expelliarmus",["Type"]="Spell",["InfluenceCost"]=6,["GamePackID"]="2",["OnPlayEffects"]="{Attack(Self,2);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [16]={["HogwartsCardID"]=16,["Name"]="Nimbus Two Thousand And One",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="2",["OnPlayEffects"]="{Attack(Self,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{VillainDefeat(Once,Influence(Self,2))}"},
    [17]={["HogwartsCardID"]=17,["Name"]="Finite",["Type"]="Spell",["InfluenceCost"]=3,["GamePackID"]="2",["OnPlayEffects"]="{VillainControl(-1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [18]={["HogwartsCardID"]=18,["Name"]="Dobby The House-Elf",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="2",["OnPlayEffects"]="{VillainControl(-1);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [19]={["HogwartsCardID"]=19,["Name"]="Fawkes The Phoenix",["Type"]="Ally",["InfluenceCost"]=5,["GamePackID"]="2",["OnPlayEffects"]="{Choice(Attack(Self,2);Health(All,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [20]={["HogwartsCardID"]=20,["Name"]="Molly Weasley",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="2",["OnPlayEffects"]="{Influence(All,1);Health(All,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [21]={["HogwartsCardID"]=21,["Name"]="Ginny Weasley",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="2",["OnPlayEffects"]="{Attack(Self,1);Influence(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [22]={["HogwartsCardID"]=22,["Name"]="Gilderoy Lockhart",["Type"]="Ally",["InfluenceCost"]=2,["GamePackID"]="2",["OnPlayEffects"]="{DrawCard(Self,1);DiscardCard(Self,Any,1)}",["DiscardEffects"]="{DrawCard(Self,1)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [23]={["HogwartsCardID"]=23,["Name"]="Butterbeer",["Type"]="Item",["InfluenceCost"]=3,["GamePackID"]="3",["OnPlayEffects"]="{InfluenceAndHealth(Any,1,1);InfluenceAndHealth(OtherThanPrevious,1,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [24]={["HogwartsCardID"]=24,["Name"]="Expecto Patronum",["Type"]="Spell",["InfluenceCost"]=5,["GamePackID"]="3",["OnPlayEffects"]="{Attack(Self,1);VillainControl(-1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [25]={["HogwartsCardID"]=25,["Name"]="Petrificus Totalus",["Type"]="Spell",["InfluenceCost"]=6,["GamePackID"]="3",["OnPlayEffects"]="{Attack(Self,1);StopVillainPower}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [26]={["HogwartsCardID"]=26,["Name"]="Crystal Ball",["Type"]="Item",["InfluenceCost"]=3,["GamePackID"]="3",["OnPlayEffects"]="{DrawCard(Self,2);DiscardCard(Self,AnyType,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [27]={["HogwartsCardID"]=27,["Name"]="Chocolate Frog",["Type"]="Item",["InfluenceCost"]=2,["GamePackID"]="3",["OnPlayEffects"]="{InfluenceAndHealth(Any,1,1)}",["DiscardEffects"]="{InfluenceAndHealth(Self,1,1)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [28]={["HogwartsCardID"]=28,["Name"]="Remus Lupin",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="3",["OnPlayEffects"]="{Attack(Self,1);Health(Any,3)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [29]={["HogwartsCardID"]=29,["Name"]="Sirius Black",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="3",["OnPlayEffects"]="{Attack(Self,2);Influence(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [30]={["HogwartsCardID"]=30,["Name"]="Sybill Trelawney",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="3",["OnPlayEffects"]="{DrawCard(Self,2);Choice(Self,{DiscardCard(Self,Spell,1);Influence(Self,2)},DiscardCard(Self,Any,1))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [31]={["HogwartsCardID"]=31,["Name"]="Marauders Map",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="3",["OnPlayEffects"]="{DrawCard(Self,2)}",["DiscardEffects"]="{DrawCard(All,1)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [32]={["HogwartsCardID"]=32,["Name"]="Severus Snape",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="4",["OnPlayEffects"]="{Attack(Self,1);Health(Self,2));RollDie(Slytherin)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [33]={["HogwartsCardID"]=33,["Name"]="Hogwarts: A History",["Type"]="Item",["InfluenceCost"]=4,["GamePackID"]="4",["OnPlayEffects"]="{RollDie(AnyHouse)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [34]={["HogwartsCardID"]=34,["Name"]="Protego",["Type"]="Spell",["InfluenceCost"]=5,["GamePackID"]="4",["OnPlayEffects"]="{Attack(Self,1);Health(Self,1)}",["DiscardEffects"]="{Attack(Self,1);Health(Self,1)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [35]={["HogwartsCardID"]=35,["Name"]="Pensieve",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="4",["OnPlayEffects"]="{InfluenceAndDrawCard(Any,1,1);InfluenceAndDrawCard(OtherThanPrevious,1,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [36]={["HogwartsCardID"]=36,["Name"]="Alastor Mad-Eye Moody",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="4",["OnPlayEffects"]="{Influence(Self,2);VillainControl(-1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [37]={["HogwartsCardID"]=37,["Name"]="Cedric Diggory",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="4",["OnPlayEffects"]="{Attack(Self,1);RollDie(Hufflepuff)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [38]={["HogwartsCardID"]=38,["Name"]="Accio",["Type"]="Spell",["InfluenceCost"]=4,["GamePackID"]="4",["OnPlayEffects"]="{Choice(Self,Influence(Self,2),DrawDiscardedCard(Item))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [39]={["HogwartsCardID"]=39,["Name"]="Filius Flitwick",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="4",["OnPlayEffects"]="{Influence(Self,1);DrawCard(Self,1);RollDie(Ravenclaw)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [40]={["HogwartsCardID"]=40,["Name"]="Pomona Sprout",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="4",["OnPlayEffects"]="{Influence(Self,1);Health(Any,2);RollDie(Hufflepuff)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [41]={["HogwartsCardID"]=41,["Name"]="Fleur Delacour",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="4",["OnPlayEffects"]="{Influence(Self,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{PlayCard(Ally,1,Health(Self,2))}"},
    [42]={["HogwartsCardID"]=42,["Name"]="Minerva McGonagall",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="4",["OnPlayEffects"]="{Influence(Self,1);Attack(Self,1);RollDie(Gryffindor)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [43]={["HogwartsCardID"]=43,["Name"]="Triwizard Cup",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="4",["OnPlayEffects"]="{Attack(Self,1);Influence(Self,1);Health(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [44]={["HogwartsCardID"]=44,["Name"]="Viktor Krum",["Type"]="Ally",["InfluenceCost"]=5,["GamePackID"]="4",["OnPlayEffects"]="{Attack(Self,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{VillainDefeat(Once,{Influence(Self,1);Health(Self,1)})}"},
    [45]={["HogwartsCardID"]=45,["Name"]="Stupefy",["Type"]="Spell",["InfluenceCost"]=6,["GamePackID"]="5",["OnPlayEffects"]="{Attack(Self,1);VillainControl(-1);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [46]={["HogwartsCardID"]=46,["Name"]="Stupefy",["Type"]="Spell",["InfluenceCost"]=6,["GamePackID"]="5",["OnPlayEffects"]="{Attack(Self,1);VillainControl(-1);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [47]={["HogwartsCardID"]=47,["Name"]="Cho Chang",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="5",["OnPlayEffects"]="{DrawCard(Self,3);DiscardCard(Self,Any,2);RollDie(Ravenclaw)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [48]={["HogwartsCardID"]=48,["Name"]="Fred Weasley",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="5",["OnPlayEffects"]="{Attack(Self,1);RollDie(Gryffindor)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{Weasley(Influence(All,1))}"},
    [49]={["HogwartsCardID"]=49,["Name"]="Luna Lovegood",["Type"]="Ally",["InfluenceCost"]=5,["GamePackID"]="5",["OnPlayEffects"]="{Influence(Self,1),RollDie(Ravenclaw)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{PlayCard(Item,1,Attack(Self,1))}"},
    [50]={["HogwartsCardID"]=50,["Name"]="Nymphadora Tonks",["Type"]="Ally",["InfluenceCost"]=5,["GamePackID"]="5",["OnPlayEffects"]="{Choice(Self,Influence(Self,3),Attack(Self,2),VillainControl(-1))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [51]={["HogwartsCardID"]=51,["Name"]="O.W.L.S",["Type"]="Item",["InfluenceCost"]=4,["GamePackID"]="5",["OnPlayEffects"]="{Influence(Self,2);",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [52]={["HogwartsCardID"]=52,["Name"]="Kingsley Shacklebolt",["Type"]="Ally",["InfluenceCost"]=7,["GamePackID"]="5",["OnPlayEffects"]="{Attack(Self,2);Health(Self,1);VillainControl(-1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [53]={["HogwartsCardID"]=53,["Name"]="George Weasley",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="5",["OnPlayEffects"]="{Attack(Self,1);RollDie(Gryffindor)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{Weasley(Health(All,1))}"},
    [54]={["HogwartsCardID"]=54,["Name"]="Confundus",["Type"]="Spell",["InfluenceCost"]=3,["GamePackID"]="6",["OnPlayEffects"]="{Attack(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{OnAllVillainsAttack(Once,VillainControl(-1))}"},
    [55]={["HogwartsCardID"]=55,["Name"]="Horace Slughorn",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="6",["OnPlayEffects"]="{Choice(All,Influence(Self,1),Health(Self,1));RollDie(Slytherin)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [56]={["HogwartsCardID"]=56,["Name"]="Felix Felicis",["Type"]="Item",["InfluenceCost"]=7,["GamePackID"]="6",["OnPlayEffects"]="{ChooseTwo(Attack(Self,2),Influence(Self,2),Health(Self,2),DrawCard(Self,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [57]={["HogwartsCardID"]=57,["Name"]="Elder Wand",["Type"]="Item",["InfluenceCost"]=7,["GamePackID"]="6",["OnPlayEffects"]="{Foreach(SpellPlayed,AttackAndHealth(Self,1,1))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [58]={["HogwartsCardID"]=58,["Name"]="Advanced Potion-Making",["Type"]="Item",["InfluenceCost"]=6,["GamePackID"]="6",["OnPlayEffects"]="{Health(All,2);IfMaxHealth(All,{Attack(Self,1),DrawCard(Self,1)})}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [59]={["HogwartsCardID"]=59,["Name"]="Deluminator",["Type"]="Item",["InfluenceCost"]=6,["GamePackID"]="6",["OnPlayEffects"]="{VillainControl(-2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [60]={["HogwartsCardID"]=60,["Name"]="Bezoar",["Type"]="Item",["InfluenceCost"]=4,["GamePackID"]="6",["OnPlayEffects"]="{Health(Any,3);DrawCard(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [61]={["HogwartsCardID"]=61,["Name"]="Sword Of Gryffindor",["Type"]="Item",["InfluenceCost"]=7,["GamePackID"]="7",["OnPlayEffects"]="{Attack(Self,2);RollDie(Gryffindor);RollDie(Gryffindor)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [62]={["HogwartsCardID"]=62,["Name"]="ArgusFilch & Mrs. Norris",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="B1",["OnPlayEffects"]="{DrawCard(Self,2);Choice(Self,DiscardCard(Self,Any,1),BanishCard(Self,Any,InHand))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [63]={["HogwartsCardID"]=63,["Name"]="Tergeo",["Type"]="Spell",["InfluenceCost"]=2,["GamePackID"]="B1",["OnPlayEffects"]="{Influence(Self,1);Choice(BanishCard(Self,Any,InHand),{BanishCard(Self,Item,InHand);DrawCard(Self,1)},nil}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [64]={["HogwartsCardID"]=64,["Name"]="Old Sock",["Type"]="Item",["InfluenceCost"]=1,["GamePackID"]="B1",["OnPlayEffects"]="{Influence(Self,1)}",["DiscardEffects"]="{Influence(Self,2)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{HouseElf(Attack(Self,2))}"},
    [65]={["HogwartsCardID"]=65,["Name"]="Fang",["Type"]="Ally",["InfluenceCost"]=3,["GamePackID"]="B1",["OnPlayEffects"]="{InfluenceAndHealth(Any,1,2)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [66]={["HogwartsCardID"]=66,["Name"]="Finite Incantatum",["Type"]="Spell",["InfluenceCost"]=6,["GamePackID"]="B1",["OnPlayEffects"]="{VillainControl(-1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="LimitDarkArtRevealToOnce",["AfterPlayTriggers"]=""},
    [67]={["HogwartsCardID"]=67,["Name"]="Harp",["Type"]="Item",["InfluenceCost"]=6,["GamePackID"]="B1",["OnPlayEffects"]="{Attack(Self,1);StopCreaturePower}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [68]={["HogwartsCardID"]=68,["Name"]="Immobulus",["Type"]="Spell",["InfluenceCost"]=3,["GamePackID"]="B2",["OnPlayEffects"]="{Attack(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{CreatureDefeat(Once,VillainControl(-1))}"},
    [69]={["HogwartsCardID"]=69,["Name"]="Buckbeak",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="B2",["OnPlayEffects"]="{DrawCard(Self,2),Choice(Discard(Self,Any,1),{Discard(Self,Ally,1);Attack(Self,2)})}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [70]={["HogwartsCardID"]=70,["Name"]="Monster Book Of Monsters",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="B2",["OnPlayEffects"]="{Attack(Self,1);RollDie(Beast)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [71]={["HogwartsCardID"]=71,["Name"]="Depulso",["Type"]="Spell",["InfluenceCost"]=3,["GamePackID"]="B2",["OnPlayEffects"]="{Choice(Influence(Self,2);BanishCard(Self,Item,InHandOrDiscard))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [72]={["HogwartsCardID"]=72,["Name"]="Erumpent Horn",["Type"]="Item",["InfluenceCost"]=5,["GamePackID"]="B3",["OnPlayEffects"]="{Health(Self,-2);Attack(Self,3)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [73]={["HogwartsCardID"]=73,["Name"]="Nox",["Type"]="Spell",["InfluenceCost"]=6,["GamePackID"]="B3",["OnPlayEffects"]="{Attack(Self,1);BanishCard(All,Any,InHandOrDiscard)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [74]={["HogwartsCardID"]=74,["Name"]="Lacewing Flies",["Type"]="Item",["InfluenceCost"]=2,["GamePackID"]="B3",["OnPlayEffects"]="{DrawCard(Any,1)}",["DiscardEffects"]="{Attack(Self,1)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [75]={["HogwartsCardID"]=75,["Name"]="Griphook",["Type"]="Ally",["InfluenceCost"]=6,["GamePackID"]="B3",["OnPlayEffects"]="{DrawCard(Self,3);Choice({DiscardCard(Self,Item,1);Influence(Self,2)},Discard(Self,Any,1));Choice({DiscardCard(Self,Item,1);Influence(Self,2)},Discard(Self,Any,1))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{PlayCard(Spell,2,{Health(Self,1);Attack(Self,1)})}"},
    [76]={["HogwartsCardID"]=76,["Name"]="Thestral",["Type"]="Ally",["InfluenceCost"]=4,["GamePackID"]="B3",["OnPlayEffects"]="{Choice(All,Influence(Self,1),Health(Self,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [77]={["HogwartsCardID"]=77,["Name"]="Kreacher The House-Elf",["Type"]="Ally",["InfluenceCost"]=5,["GamePackID"]="B3",["OnPlayEffects"]="{RollDie(Beast);BanishCard(Any,Any,InHandOrDiscard)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [78]={["HogwartsCardID"]=78,["Name"]="Alohomora",["Type"]="Spell",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Influence(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [79]={["HogwartsCardID"]=79,["Name"]="Trevor",["Type"]="Ally",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Choice(Attack(Self,1),Health(Self,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [80]={["HogwartsCardID"]=80,["Name"]="Remembrall",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Influence(Self,1)}",["DiscardEffects"]="{Influence(Self,2)}",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [81]={["HogwartsCardID"]=81,["Name"]="Mandrake",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Choice(Attack(Self,1),Health(Any,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [82]={["HogwartsCardID"]=82,["Name"]="Invisibility Cloak",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Influence(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="LimitHealthLossToOne",["AfterPlayTriggers"]=""},
    [83]={["HogwartsCardID"]=83,["Name"]="Hedwig",["Type"]="Ally",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Choice(Attack(Self,1),Health(Self,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [84]={["HogwartsCardID"]=84,["Name"]="Firebolt",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Attack(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{VillainDefeat(Once,{Influence(Self,1)})}"},
    [85]={["HogwartsCardID"]=85,["Name"]="Bertie Bott's Every-Flavour Beans",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Influence(Self,1),AttackForEveryAllyPlayed(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [86]={["HogwartsCardID"]=86,["Name"]="Pigwidgeon",["Type"]="Ally",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Choice(Attack(Self,1),Health(Self,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [87]={["HogwartsCardID"]=87,["Name"]="Cleansweep 11",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Attack(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{VillainDefeat(Once,{Influence(Self,1)})}"},
    [88]={["HogwartsCardID"]=88,["Name"]="The Tales of Beedle the Bard",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Choice(Influence(Self,2),Influence(All,1))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""},
    [89]={["HogwartsCardID"]=89,["Name"]="Time-Turner",["Type"]="Item",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Influence(Self,1)}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]="{OnCardAcquire(Spell,Everytime,Choice(PutAcquiredCardOnTopOfDeck,nil))}"},
    [90]={["HogwartsCardID"]=90,["Name"]="Crookshanks",["Type"]="Ally",["InfluenceCost"]=0,["GamePackID"]="0",["OnPlayEffects"]="{Choice(Attack(Self,1),Health(Self,2))}",["DiscardEffects"]="",["BanishEffects"]="",["InHandTriggers"]="",["AfterPlayTriggers"]=""}
}

HogwartsCards = {
    [1]={["GUID"]="f338bf",["HogwartsCardID"]=1,["Name"]="Oliver Wood"},
    [2]={["GUID"]="6a5c72",["HogwartsCardID"]=2,["Name"]="Quidditch Gear"},
    [3]={["GUID"]="d35268",["HogwartsCardID"]=2,["Name"]="Quidditch Gear"},
    [4]={["GUID"]="201b76",["HogwartsCardID"]=2,["Name"]="Quidditch Gear"},
    [5]={["GUID"]="ddd3d5",["HogwartsCardID"]=2,["Name"]="Quidditch Gear"},
    [6]={["GUID"]="c5d600",["HogwartsCardID"]=3,["Name"]="Wingardium Leviosa"},
    [7]={["GUID"]="5dc634",["HogwartsCardID"]=3,["Name"]="Wingardium Leviosa"},
    [8]={["GUID"]="4f8fbe",["HogwartsCardID"]=3,["Name"]="Wingardium Leviosa"},
    [9]={["GUID"]="7f0965",["HogwartsCardID"]=4,["Name"]="Lumos"},
    [10]={["GUID"]="35d285",["HogwartsCardID"]=4,["Name"]="Lumos"},
    [11]={["GUID"]="e5f9ce",["HogwartsCardID"]=5,["Name"]="Essence Of Dittany"},
    [12]={["GUID"]="c96f33",["HogwartsCardID"]=5,["Name"]="Essence Of Dittany"},
    [13]={["GUID"]="e6f9ce",["HogwartsCardID"]=5,["Name"]="Essence Of Dittany"},
    [14]={["GUID"]="a43fab",["HogwartsCardID"]=5,["Name"]="Essence Of Dittany"},
    [15]={["GUID"]="e142c9",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [16]={["GUID"]="8778a4",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [17]={["GUID"]="574b87",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [18]={["GUID"]="f36859",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [19]={["GUID"]="3996cd",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [20]={["GUID"]="5bdf6d",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [21]={["GUID"]="5bdf5d",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [22]={["GUID"]="5bdf4d",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [23]={["GUID"]="5bdf3d",["HogwartsCardID"]=6,["Name"]="Reparo"},
    [24]={["GUID"]="de8c25",["HogwartsCardID"]=7,["Name"]="Incendio"},
    [25]={["GUID"]="4a484b",["HogwartsCardID"]=7,["Name"]="Incendio"},
    [26]={["GUID"]="4de8d7",["HogwartsCardID"]=7,["Name"]="Incendio"},
    [27]={["GUID"]="de8c24",["HogwartsCardID"]=7,["Name"]="Incendio"},
    [28]={["GUID"]="6bed7f",["HogwartsCardID"]=7,["Name"]="Incendio"},
    [29]={["GUID"]="9f5e52",["HogwartsCardID"]=7,["Name"]="Incendio"},
    [30]={["GUID"]="568d18",["HogwartsCardID"]=8,["Name"]="Albus Dumbledore"},
    [31]={["GUID"]="d4972f",["HogwartsCardID"]=9,["Name"]="Rubeus Hagrid"},
    [32]={["GUID"]="7a3a65",["HogwartsCardID"]=10,["Name"]="Descendo"},
    [33]={["GUID"]="665a01",["HogwartsCardID"]=10,["Name"]="Descendo"},
    [34]={["GUID"]="c0d113",["HogwartsCardID"]=11,["Name"]="Sorting Hat"},
    [35]={["GUID"]="f9fb39",["HogwartsCardID"]=12,["Name"]="Golden Snitch"},
    [36]={["GUID"]="13ddf0",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [37]={["GUID"]="cc7ac1",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [38]={["GUID"]="72f128",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [39]={["GUID"]="cf5144",["HogwartsCardID"]=79,["Name"]="Trevor"},
    [40]={["GUID"]="a59783",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [41]={["GUID"]="b8d75a",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [42]={["GUID"]="50694c",["HogwartsCardID"]=80,["Name"]="Remembrall"},
    [43]={["GUID"]="bfb71a",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [44]={["GUID"]="b4a3f2",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [45]={["GUID"]="5d3a72",["HogwartsCardID"]=81,["Name"]="Mandrake"},
    [46]={["GUID"]="177eb6",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [47]={["GUID"]="8f3d5f",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [48]={["GUID"]="b1cc0c",["HogwartsCardID"]=82,["Name"]="Invisibility Cloak"},
    [49]={["GUID"]="f468f7",["HogwartsCardID"]=83,["Name"]="Hedwig"},
    [50]={["GUID"]="13bfa1",["HogwartsCardID"]=84,["Name"]="Firebolt"},
    [51]={["GUID"]="86ae06",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [52]={["GUID"]="652b9a",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [53]={["GUID"]="bc125a",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [54]={["GUID"]="c18393",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [55]={["GUID"]="8f3d5f",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [56]={["GUID"]="8f3d4f",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [57]={["GUID"]="a14d25",["HogwartsCardID"]=85,["Name"]="Bertie Bott's Every-Flavour Beans"},
    [58]={["GUID"]="22aba9",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [59]={["GUID"]="917f4e",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [60]={["GUID"]="a78ae6",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [61]={["GUID"]="ae48fb",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [62]={["GUID"]="dc6a71",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [63]={["GUID"]="e9c5b4",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [64]={["GUID"]="99bfdd",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [65]={["GUID"]="6e80ff",["HogwartsCardID"]=86,["Name"]="Pigwidgeon"},
    [66]={["GUID"]="ce4de2",["HogwartsCardID"]=87,["Name"]="Cleansweep 11"},
    [67]={["GUID"]="eab4ef",["HogwartsCardID"]=88,["Name"]="The Tales of Beedle the Bard"},
    [68]={["GUID"]="140e7f",["HogwartsCardID"]=89,["Name"]="Time-Turner"},
    [69]={["GUID"]="9504d8",["HogwartsCardID"]=90,["Name"]="Crookshanks"},
    [70]={["GUID"]="9fbfab",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [71]={["GUID"]="9fbfbb",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [72]={["GUID"]="faec32",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [73]={["GUID"]="9fbfcb",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [74]={["GUID"]="9fbfdb",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [75]={["GUID"]="2a4a12",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [76]={["GUID"]="9fbfeb",["HogwartsCardID"]=78,["Name"]="Alohomora"},
    [77]={["GUID"]="2ae466",["HogwartsCardID"]=19,["Name"]="Fawkes the Phoenix"},
    [78]={["GUID"]="d22b23",["HogwartsCardID"]=18,["Name"]="Dobby The House-Elf"},
    [79]={["GUID"]="288219",["HogwartsCardID"]=15,["Name"]="Expelliarmus"},
    [80]={["GUID"]="247bc2",["HogwartsCardID"]=14,["Name"]="Polyjuice Potion"},
    [81]={["GUID"]="f6edd5",["HogwartsCardID"]=15,["Name"]="Expelliarmus"},
    [82]={["GUID"]="aac2b8",["HogwartsCardID"]=14,["Name"]="Polyjuice Potion"},
    [83]={["GUID"]="999936",["HogwartsCardID"]=17,["Name"]="Finite"},
    [84]={["GUID"]="d3ad19",["HogwartsCardID"]=13,["Name"]="Arthur Weasley"},
    [85]={["GUID"]="1e82a2",["HogwartsCardID"]=16,["Name"]="Nimbus Two Thousand And One"},
    [86]={["GUID"]="5724f7",["HogwartsCardID"]=22,["Name"]="Gilderoy Lockhart"},
    [87]={["GUID"]="4c0548",["HogwartsCardID"]=21,["Name"]="Ginny Weasley"},
    [88]={["GUID"]="31a098",["HogwartsCardID"]=16,["Name"]="Nimbus Two Thousand And One"},
    [89]={["GUID"]="f1cf86",["HogwartsCardID"]=17,["Name"]="Finite"},
    [90]={["GUID"]="dcdb89",["HogwartsCardID"]=20,["Name"]="Molly Weasley"}
}

function GetCardFromGUID(GUID)
    local HogwartsCardID = 0
    for i=1,#HogwartsCards,1 do
        --print("Comparing " .. object.guid .. " with " .. HogwartsCards.GUID[i])
        if HogwartsCards[i].GUID == GUID then
            HogwartsCardID = HogwartsCards[i].HogwartsCardID
            break
        end
    end
    if HogwartsCardID == 0 then error("This Hogwarts card is not yet in the list of GUID's") end
    local HogwartsCard = ""
    for i=1,#HogwartsCardsLookUp,1 do
        if HogwartsCardsLookUp[i].HogwartsCardID == HogwartsCardID then
            HogwartsCard = HogwartsCardsLookUp[i]
            break
        end
    end
    if HogwartsCard == "" then
        error("This Hogwarts card is not yet in the look up table")
    end
    return HogwartsCard
end

function onObjectEnterZone(zone, object)
    --print("Object " .. object.guid .. " just entered zone " .. zone.guid)
    -- Right now it only handles play cards entering White player's play zone
    if Players ~= nil then --The game has started
        -- Player tries to play a card in the Play area
        if zone.guid == Players[ActiveGameData.PlayersTurn.index].PlayZone and ActiveGameData.Phase.index == 4 and not object.hasTag("Played") and not object.isSmoothMoving()  then
            --TODO if Game is paused, send the card back into player's hand
            --print("Object " .. object.guid .. " just entered the play zone")
            local ObjectIsHogwartsCard = false
            local HogwartsCardID = 0
            local HogwartsCard = {}
            for i=1,#HogwartsCards,1 do
                --print("Comparing " .. object.guid .. " with " .. HogwartsCards.GUID[i])
                if HogwartsCards[i].GUID == object.guid then
                    ObjectIsHogwartsCard = true
                    HogwartsCardID = HogwartsCards[i].HogwartsCardID
                    HogwartsCard = GetCardFromGUID(object.guid)
                    --CurrentTurn.CardsPlayed[CurrentTurn.CardsPlayednum+1] = HogwartsCards[i].HogwartsCardID
                    break
                end
            end
            if ObjectIsHogwartsCard then
                local cardPlacementZone = getObjectFromGUID(Players[ActiveGameData.PlayersTurn.index].PlayFields[ActiveGameData.HogwartsCardsPlayed +1])
                object.addTag("Played")
                object.interactable = false
                object.setPositionSmooth({cardPlacementZone.getPosition().x, cardPlacementZone.getPosition().y, cardPlacementZone.getPosition().z})
                ActiveGameData.HogwartsCardsPlayed  = ActiveGameData.HogwartsCardsPlayed + 1
                if HogwartsCard.Type == "Ally" then
                    ActiveGameData.AllyCardsPlayed = ActiveGameData.AllyCardsPlayed + 1
                end
                -- print("Object " .. object.guid .. " entered zone " .. zone.guid)
                PlayCardEffect(HogwartsCardID)
            end
        end

        -- Player tries to put a card in the Discard area
        for i = 1,#Players,1 do
            if Players[i].DiscardField == zone.guid and Players[i].MustDiscard.Cards > 0 and not object.isSmoothMoving() then
                DiscardedCard = GetCardFromGUID(object.guid)
                print("Must Discard Card of type " .. Players[i].MustDiscard.CardType .. " and Card is of type " .. DiscardedCard.Type)
                if Players[i].MustDiscard.CardType == "Any" or DiscardedCard.Type == Players[i].MustDiscard.CardType then
                    --object.addTag("Discarded")
                    Players[i].MustDiscard.Cards = Players[i].MustDiscard.Cards - 1
                    if DiscardedCard.DiscardEffects ~= "" then
                        RunEffect(DiscardedCard.DiscardEffects,i)
                    end
                    local DiscardField = getObjectFromGUID(Players[i].DiscardField)
                    object.setPositionSmooth({DiscardField.getPosition().x, DiscardField.getPosition().y, DiscardField.getPosition().z})

                    UnpauseGame()
                else
                    --TODO Put Card back into players hand
                end
            end
        end
    end
end

function UnpauseGame()
    local AllCardsThatMustBeDiscarded = 0
    local AllChoicesThatMustBeMade = 0
    for j = 1,#Players,1 do
        if Players[j].MustDiscard.Cards > 0 then
            AllCardsThatMustBeDiscarded = AllCardsThatMustBeDiscarded + Players[j].MustDiscard.Cards
            broadcastToAll(Players[j].Name .. " still has to discard " .. Players[j].MustDiscard.Cards .. " Card(s)")
        end
        if Players[j].HasChoice then
            AllChoicesThatMustBeMade = AllChoicesThatMustBeMade + 1
            broadcastToAll(Players[j].Name .. " still has a choice to make")
        end
    end
    if AllCardsThatMustBeDiscarded == 0 and AllChoicesThatMustBeMade == 0 then
        if ActiveGameData.Phase.index ~= 4 then
            ActiveGameData.GamePaused = false
        end
        ActiveGameData.AwaitingAction = false
        delayedCall("ContinueGame",1)
    end
end

function PlayCardEffect(HogwartsCardID)
    local PlayEffect = ""
    for i=1,#HogwartsCardsLookUp,1 do
        if HogwartsCardsLookUp[i].HogwartsCardID == HogwartsCardID then
            PlayEffect = HogwartsCardsLookUp[i].OnPlayEffects
            if HogwartsCardsLookUp[i].AfterPlayTriggers ~= "" then
                SetupTrigger(HogwartsCardsLookUp[i].AfterPlayTriggers)
            end
            break
        end
    end
    if PlayEffect == "" then
        error("This Hogwarts card is not yet in the look up table")
    end
    RunEffect(PlayEffect)
end
--endregion Play card functions

--region Effects functions
EffectProcessLookup = {
    [1]={["Name"]="{Attack(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [2]={["Name"]="{Attack(Self,1);Health(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [3]={["Name"]="{Attack(Self,1);Health(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [4]={["Name"]="{Influence(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [5]={["Name"]="{DrawCard(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [6]={["Name"]="{Health(Any,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Any",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Target",["ChoicesAmount"]=1,["Choice1"]="{Health(Self,2)}",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [7]={["Name"]="{Choice(Self,Influence(Self,2),DrawCard(Self,1))}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Effect",["ChoicesAmount"]=2,["Choice1"]="{Influence(Self,2)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=2,["Choice2"]="{DrawCard(Self,1)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [8]={["Name"]="{Attack(Self,1);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [9]={["Name"]="{Attack(Self,1);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [10]={["Name"]="{Attack(All,1);Influence(All,1);Health(All,1);DrawCard(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=4,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [11]={["Name"]="{Attack(All,1);Influence(All,1);Health(All,1);DrawCard(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=4,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [12]={["Name"]="{Attack(All,1);Influence(All,1);Health(All,1);DrawCard(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=3,["SequenceAmount"]=4,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [13]={["Name"]="{Attack(All,1);Influence(All,1);Health(All,1);DrawCard(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=4,["SequenceAmount"]=4,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [14]={["Name"]="{Attack(Self,1);Health(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [15]={["Name"]="{Attack(Self,1);Health(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [16]={["Name"]="{Attack(Self,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [17]={["Name"]="{Influence(Self,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [18]={["Name"]="{Influence(Self,2);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [19]={["Name"]="{Influence(Self,2);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [20]={["Name"]="{Choice(Attack(Self,1),Health(Self,2))}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Effect",["ChoicesAmount"]=2,["Choice1"]="{Attack(Self,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(Self,2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=2,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [21]={["Name"]="{Choice(Attack(Self,1),Health(Any,2))}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Effect",["ChoicesAmount"]=2,["Choice1"]="{Attack(Self,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(Any,2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [22]={["Name"]="{Health(Self,-2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=-2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [23]={["Name"]="{Health(All,-1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [24]={["Name"]="{Health(Self,-1);DiscardCardVillain(Self,Any,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [25]={["Name"]="{Health(Self,-1);DiscardCardVillain(Self,Any,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="Any",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DiscardCardVillain",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [26]={["Name"]="{VillainControl(1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Game",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=nil,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="VillainControl",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [27]={["Name"]="{Health(Self,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [28]={["Name"]="{DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [29]={["Name"]="{Health(Self,-1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [30]={["Name"]="{VillainControl(-1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Game",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=nil,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="VillainControl",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [31]={["Name"]="{Health(All,1),Influence(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [32]={["Name"]="{Health(All,1),Influence(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [33]={["Name"]="{Influence(Self,1),AttackForEveryAllyPlayed(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [34]={["Name"]="{Influence(Self,1),AttackForEveryAllyPlayed(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="AttackForEveryAllyPlayed",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [35]={["Name"]="{Choice(Influence(Self,2),Influence(All,1))}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{Influence(Self,2)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=2,["Choice2"]="{Influence(All,1)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [36]={["Name"]="{Influence(All,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [37]={["Name"]="{Health(Self,-1);VillainControl(1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [38]={["Name"]="{Health(Self,-1);VillainControl(1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Game",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="VillainControl",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [39]={["Name"]="{Choice(All,{DiscardCardVillain(Self,Ally,1)},{Health(Self,-2)})}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Effect",["ChoicesAmount"]=2,["Choice1"]="{DiscardCardVillain(Self,Ally,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(Self,-2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [40]={["Name"]="{Choice(All,{DiscardCardVillain(Self,Item,1)},{Health(Self,-2)})}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Effect",["ChoicesAmount"]=2,["Choice1"]="{DiscardCardVillain(Self,Item,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(Self,-2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [41]={["Name"]="{Choice(All,{DiscardCardVillain(Self,Spell,1)},{Health(Self,-2)})}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="Effect",["ChoicesAmount"]=2,["Choice1"]="{DiscardCardVillain(Self,Spell,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(Self,-2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [42]={["Name"]="{DiscardCardVillain(Self,Ally,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="Ally",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DiscardCardVillain",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [43]={["Name"]="{DiscardCardVillain(Self,Item,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="Item",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DiscardCardVillain",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [44]={["Name"]="{DiscardCardVillain(Self,Spell,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="Spell",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DiscardCardVillain",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [45]={["Name"]="{Influence(All,1);VillainControl(-1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [46]={["Name"]="{Influence(All,1);VillainControl(-1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Game",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="VillainControl",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [47]={["Name"]="{DrawCard(All,1);VillainControl(-1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [48]={["Name"]="{DrawCard(All,1);VillainControl(-1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Game",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="VillainControl",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [49]={["Name"]="{DiscardCardVillain(Self,Any,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="Any",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DiscardCardVillain",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [50]={["Name"]="{ForEachAlly(Self,Choice({DiscardCardVillain(Self,Any,1)},{Health(Self,-2)}))}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="ForEachAlly",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{DiscardCardVillain(Self,Any,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(Self,-2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [51]={["Name"]="{Influence(All,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [52]={["Name"]="{CopyPlayedAlly}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="CopyPlayedAlly",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [53]={["Name"]="{Attack(Self,2);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [54]={["Name"]="{Attack(Self,2);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [55]={["Name"]="{RemoveAttackFromAllVillains(1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Villain",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="RemoveAttackFromAllVillains",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [56]={["Name"]="{VillainControl(-1);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Game",["PlayerTarget"]="",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="VillainControl",["Choice1Type"]="Effect",["Choice1Repetitions"]=-1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [57]={["Name"]="{VillainControl(-1);DrawCard(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [58]={["Name"]="{Choice(Attack(Self,2);Health(All,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{Attack(Self,2)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{Health(All,2)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [59]={["Name"]="{Health(All,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [60]={["Name"]="{Influence(All,1);Health(All,2)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [61]={["Name"]="{Influence(All,1);Health(All,2)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=2,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [62]={["Name"]="{Attack(Self,1);Influence(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Attack",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [63]={["Name"]="{Attack(Self,1);Influence(Self,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [64]={["Name"]="{DrawCard(Self,1);DiscardCard(Self,Any,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DrawCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [65]={["Name"]="{DrawCard(Self,1);DiscardCard(Self,Any,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="Any",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="DiscardCard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [66]={["Name"]="{InfluenceAndHealth(Any,1,1);InfluenceAndHealth(OtherThanPrevious,1,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Any",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{InfluenceAndHealth(Self,1,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [67]={["Name"]="{InfluenceAndHealth(Any,1,1);InfluenceAndHealth(OtherThanPrevious,1,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="OtherThanPrevious",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{InfluenceAndHealth(Self,1,1)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [68]={["Name"]="{InfluenceAndHealth(Self,1,1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Influence",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [69]={["Name"]="{InfluenceAndHealth(Self,1,1)}",["EffectProcessDescription"]="",["SequenceNr"]=2,["SequenceAmount"]=2,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="Health",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [70]={["Name"]="{Choice(All,Health(Self,2),AllyFromDiscard(Self,1))}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="All",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{Health(Self,2)}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="{AllyFromDiscard(1)}",["Choice2Type"]="EffectProcess",["Choice2Repetitions"]=1,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [71]={["Name"]="{AllyFromDiscard(1)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="AllyFromDiscard",["Choice1Type"]="Effect",["Choice1Repetitions"]=1,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [72]={["Name"]="{Choice(PutAcquiredCardOnTopOfDeck,nil)}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Choice",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=1,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="{PutAcquiredCardOnTopOfDeck}",["Choice1Type"]="EffectProcess",["Choice1Repetitions"]=1,["Choice2"]="nil",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""},
    [73]={["Name"]="{PutAcquiredCardOnTopOfDeck}",["EffectProcessDescription"]="",["SequenceNr"]=1,["SequenceAmount"]=1,["EffectProcessType"]="Player",["PlayerTarget"]="Self",["Conditional"]="",["SpecialParam"]="",["HasChoice"]=0,["ChoiceType"]="",["ChoicesAmount"]=nil,["Choice1"]="PutAcquiredCardOnTopOfDeck",["Choice1Type"]="Effect",["Choice1Repetitions"]=nil,["Choice2"]="",["Choice2Type"]="",["Choice2Repetitions"]=nil,["Choice3"]="",["Choice3Type"]="",["Choice3Repetitions"]=""}
}





--Target is a Player index is used for EffectProcesses with Self Target in order to change target
function RunEffect(EffectProcessName,Target)
    if Target == nil then Target = ActiveGameData.PlayersTurn.index end
    --Creating EffectProcess sequence based on EffectProcess Name
    local EffectProcess = { }
    local ExpectedSequenceAmount = 0
    for i = 1,#EffectProcessLookup,1 do
        if EffectProcessLookup[i].Name == EffectProcessName then
            EffectProcess[#EffectProcess + 1] = EffectProcessLookup[i]
            ExpectedSequenceAmount = EffectProcessLookup[i].SequenceAmount
        end
    end
    if ExpectedSequenceAmount ~= #EffectProcess then
        error("Effect Process Error in look up table: Expected Sequence Amount is " .. ExpectedSequenceAmount .. " but only " .. #EffectProcess .. " was found")
    elseif #EffectProcess == 0 then
        error("EffectProcessName " .. EffectProcessName .. " not found in look up table")
    end

    --Run through all Effect Process sequences
    for i=1,#EffectProcess,1 do
        if EffectProcess[i].EffectProcessType ~= "Choice" then
            if EffectProcess[i].PlayerTarget == "Any" then
                OfferChoices(EffectProcess[i].Choice1,Players)
            elseif EffectProcess[i].Choice1 == "Health" then
                if EffectProcess[i].PlayerTarget == "Self" then
                    if Players[Target].Stunned == false then
                        Players[Target].Health = Players[Target].Health + EffectProcess[i].Choice1Repetitions
                        if HasInvisibilityCloak(Target) == true and EffectProcess[i].Choice1Repetitions < -1 then
                            Players[Target].Health = Players[Target].Health - (1+EffectProcess[i].Choice1Repetitions)
                        end
                    end
                elseif EffectProcess[i].PlayerTarget == "All" then
                    for j=1,#Players,1 do
                        if Players[j].Stunned == false then
                            Players[j].Health = Players[j].Health + EffectProcess[i].Choice1Repetitions
                            if HasInvisibilityCloak(j) == true and EffectProcess[i].Choice1Repetitions < -1 then
                                Players[j].Health = Players[j].Health - (1+EffectProcess[i].Choice1Repetitions)
                            end
                        end
                    end
                else error("Unknown PlayerTarget " .. EffectProcess[i].PlayerTarget .. " in EffectProcess look up table")
                end
                for j=1,#Players,1 do

                    if Players[j].Stunned == true then
                        broadcastToAll("Player is already stunned.")
                    elseif Players[j].Health > 10 then
                        Players[j].Health = 10
                    elseif Players[j].Health < 0 then
                        Players[j].Health = 0
                    end
                end
                ResolveTriggers("Health")
            elseif EffectProcess[i].Choice1 == "Influence" then
                if EffectProcess[i].PlayerTarget == "Self" then
                    Players[Target].Influence = Players[Target].Influence + EffectProcess[i].Choice1Repetitions
                elseif EffectProcess[i].PlayerTarget == "All" then
                    for j=1,#Players,1 do
                        Players[j].Influence = Players[j].Influence + EffectProcess[i].Choice1Repetitions
                    end
                else error("Unknown PlayerTarget " .. EffectProcess[i].PlayerTarget .. " in EffectProcess look up table")
                end
            elseif EffectProcess[i].Choice1 == "Attack" then
                if EffectProcess[i].PlayerTarget == "Self" then
                    Players[Target].Damage = Players[Target].Damage + EffectProcess[i].Choice1Repetitions
                elseif EffectProcess[i].PlayerTarget == "All" then
                    for j=1,#Players,1 do
                        Players[j].Damage = Players[j].Damage + EffectProcess[i].Choice1Repetitions
                    end
                else error("Unknown PlayerTarget " .. EffectProcess[i].PlayerTarget .. " in EffectProcess look up table")
                end
            elseif EffectProcess[i].Choice1 == "DrawCard" then
                local DrawCardBlocked = false
                for j=1,#ActiveTriggerProcesses,1 do
                    if ActiveTriggerProcesses[j].Trigger == "NoDrawCard" then
                        DrawCardBlocked = true
                    end
                end
                if DrawCardBlocked == false then
                    if EffectProcess[i].PlayerTarget == "Self" then
                        for j=1,EffectProcess[i].Choice1Repetitions,1 do
                            DrawCard(Players[Target].Color)
                        end
                    elseif EffectProcess[i].PlayerTarget == "All" then
                        for j=1,#Players,1 do
                            for k=1,EffectProcess[i].Choice1Repetitions,1 do
                                DrawCard(Players[j].Color)
                            end
                        end
                    else error("Unknown PlayerTarget " .. EffectProcess[i].PlayerTarget .. " in EffectProcess look up table")
                    end
                end
            elseif EffectProcess[i].Choice1 == "DiscardCard" or EffectProcess[i].Choice1 == "DiscardCardVillain" then
                if EffectProcess[i].PlayerTarget == "Self" then
                    if EffectProcess[i].SpecialParam == "Any" then
                        StartDiscardProcess(Target,EffectProcess[i].Choice1Repetitions)
                    else
                        StartDiscardProcess(Target,EffectProcess[i].Choice1Repetitions,EffectProcess[i].SpecialParam)
                    end
                    ResolveTriggers(EffectProcess[i].Choice1,Target)
                else
                    --TODO Implement for all players
                    error("Not implemented fot other than Self")
                end
            elseif EffectProcess[i].Choice1 == "VillainControl" then
                ActiveGameData.VillainControl = ActiveGameData.VillainControl + EffectProcess[i].Choice1Repetitions
                if ActiveGameData.VillainControl < 0 then ActiveGameData.VillainControl = 0 end
                if ActiveGameData.VillainControl > ActiveGameData.MaxVillainControl then ActiveGameData.VillainControl = ActiveGameData.MaxVillainControl end
                if EffectProcess[i].Choice1Repetitions > 0 then
                    for j=1,EffectProcess[i].Choice1Repetitions,1 do
                        addSkull()
                    end
                else
                    for j=-1,EffectProcess[i].Choice1Repetitions,-1 do
                        removeSkull()
                    end
                end
                if EffectProcess[i].Choice1Repetitions > 0 then
                    ResolveTriggers("VillainControlAdded")
                else
                    ResolveTriggers("VillainControlRemoved")
                end
            elseif EffectProcess[i].Choice1 == "AttackForEveryAllyPlayed" then
                --print(ActiveGameData.PlayersTurn.Name .. " gains attack for every Ally played which is " .. ActiveGameData.AllyCardsPlayed)
                if EffectProcess[i].PlayerTarget == "Self" then
                    Players[Target].Damage = Players[Target].Damage + ActiveGameData.AllyCardsPlayed
                else
                    error("Not implemented fot other than Self")
                end
            elseif EffectProcess[i].Choice1 == "PutAcquiredCardOnTopOfDeck" then
                if EffectProcess[i].PlayerTarget == "Self" then
                    local TargetDiscardField = getObjectFromGUID(Players[Target].DiscardField)
                    local TargetDrawField = getObjectFromGUID(Players[Target].DrawField)
                    for j, v in pairs(TargetDiscardField.getObjects()) do
                        if v.tag == 'Deck' then
                            TargetDiscardField.getObjects()[i].takeObject({
                                position = {TargetDrawField.getPosition().x, TargetDrawField.getPosition().y, TargetDrawField.getPosition().z},
                                flip = true,
                                top = true
                            })
                        elseif v.tag == 'Card' then
                            TargetDiscardField.getObjects()[i].flip()
                            TargetDiscardField.getObjects()[i].setPositionSmooth({TargetDrawField.getPosition().x, TargetDrawField.getPosition().y, TargetDrawField.getPosition().z})
                        end
                    end
                else
                    error("Not implemented fot other than Self")
                end
            elseif EffectProcess[i].Choice1 == "Nothing" then
                -- Nothing happens as expected
            else
                print("Effect " .. EffectProcess[i].Choice1 .. " has not yet been implemented")
            end
            UpdatePlayerStats()
        else
            local PlayersWithChoice = {}
            if EffectProcess[i].PlayerTarget == "All" then
                PlayersWithChoice = Players
            else
                PlayersWithChoice = {Players[Target]}
            end
            for j=1,#PlayersWithChoice,1 do
                local Choices = {EffectProcess[i].Choice1,EffectProcess[i].Choice2}
                if EffectProcess[i].Choice3 ~= "" then Choices[#Choices+1] = EffectProcess[i].Choice3 end
                OfferChoices(Choices,PlayersWithChoice[j].index)
            end

        end

    end

    ResolvePlayerHealthStatus()
end

function DrawCard(PlayerColor)
    if PlayerColor == "Blue" then
        buttonClickedDraw1CardHarry()
    elseif PlayerColor == "White" then
        buttonClickedDraw1CardNeville()
    elseif PlayerColor == "Red" then
        buttonClickedDraw1CardRon()
    elseif PlayerColor == "Green" then
        buttonClickedDraw1CardHermione()
    end
end

function ResolvePlayerHealthStatus()
    for i=1,#Players,1 do
        if Players[i].Health == 0 and Players[i].Stunned == false then
            Players[i].Stunned = true
            Players[i].Health = "Stunned"
            Players[i].Damage = 0
            Players[i].Influence = 0
            UpdatePlayerStats()
            ActiveGameData.VillainControl = ActiveGameData.VillainControl + 1
            if ActiveGameData.VillainControl > ActiveGameData.MaxVillainControl then
                ActiveGameData.VillainControl = ActiveGameData.MaxVillainControl
            else
                addSkull()
            end

            local CardsToDiscard = math.floor(#Player[Players[i].Color].getHandObjects(1) / 2)
            StartDiscardProcess(i,CardsToDiscard)
            --Cannot be Healed until end of turn
        end
    end
end

function UpdatePlayerStats()
    for i = 1,#Players,1 do
        --Players[i].InterfaceObject.editButton({
        --    index = 0,
        --    label = Players[ActiveGameData.PlayersTurn.index].Damage
        --})
        --Players[i].InterfaceObject.editButton({
        --    index = 1,
        --    label = Players[ActiveGameData.PlayersTurn.index].Influence
        --})
        --Players[i].InterfaceObject.editButton({
        --    index = 2,
        --    label = Players[ActiveGameData.PlayersTurn.index].Health
        --})
        --Players[i].InterfaceObject.call("add_subtract")
        local parameters = {
            Health = Players[i].Health,
            Damage = Players[i].Damage,
            Influence = Players[i].Influence
        }
        Players[i].InterfaceObject.call("setvalues",parameters)
    end
end
--endregion Effects functions

--region Trigger functions
TriggerProcessLookup = {
    [1]={["Name"]="{VillainDefeat(Once,{Health(Any,2)})}",["Trigger"]="VillainDefeat",["Prevents"]=0,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=1,["EffectType"]="",["Effect"]="{Health(Any,2)}",["TimesTriggered"]=0},
    [2]={["Name"]="{OnCardAcquire(Item,Everytime,Choice(PutAcquiredCardOnTopOfDeck,nil))}",["Trigger"]="OnCardAcquire(Item)",["Prevents"]=0,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="{Choice(PutAcquiredCardOnTopOfDeck,nil)}",["TimesTriggered"]=nil},
    [3]={["Name"]="{OnCardAcquire(Ally,Everytime,Choice(PutAcquiredCardOnTopOfDeck,nil))}",["Trigger"]="OnCardAcquire(Ally)",["Prevents"]=0,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="{Choice(PutAcquiredCardOnTopOfDeck,nil)}",["TimesTriggered"]=nil},
    [4]={["Name"]="{OnCardAcquire(Spell,Everytime,Choice(PutAcquiredCardOnTopOfDeck,nil))}",["Trigger"]="OnCardAcquire(Spell)",["Prevents"]=0,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="{Choice(PutAcquiredCardOnTopOfDeck,nil)}",["TimesTriggered"]=nil},
    [5]={["Name"]="{NoDrawCard(ThisTurn)}",["Trigger"]="NoDrawCard",["Prevents"]=1,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="",["TimesTriggered"]=nil},
    [6]={["Name"]="{DiscardCardVillain({Health(Self,-1)})}",["Trigger"]="DiscardCardVillain",["Prevents"]=0,["ActiveTurn"]="UntilRemoved",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="{Health(Self,-1)}",["TimesTriggered"]=nil},
    [7]={["Name"]="{VillainControlAdded({Health(Self,-2)})}",["Trigger"]="VillainControlAdded",["Prevents"]=0,["ActiveTurn"]="UntilRemoved",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="{Health(Self,-2)}",["TimesTriggered"]=nil},
    [8]={["Name"]="LimitHealthLossToOne",["Trigger"]="Special",["Prevents"]=1,["ActiveTurn"]="WhileInHand",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="",["TimesTriggered"]=nil},
    [9]={["Name"]="{VillainDefeat(Once,{Influence(Self,1)})}",["Trigger"]="VillainDefeat",["Prevents"]=0,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=1,["EffectType"]="",["Effect"]="{Influence(Self,1)}",["TimesTriggered"]=0},
    [10]={["Name"]="{NoDrawCard(Always)}",["Trigger"]="NoDrawCard",["Prevents"]=1,["ActiveTurn"]="UntilRemoved",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="",["TimesTriggered"]=nil},
    [11]={["Name"]="{VillainControlAdded({RemoveAttackFromAllVillains(1)})}",["Trigger"]="VillainControlAdded",["Prevents"]=0,["ActiveTurn"]="UntilRemoved",["TriggerLimit"]=nil,["EffectType"]="",["Effect"]="{RemoveAttackFromAllVillains(1)}",["TimesTriggered"]=nil},
    [12]={["Name"]="{VillainDefeat(Once,{Influence(Self,2)})}",["Trigger"]="VillainDefeat",["Prevents"]=0,["ActiveTurn"]="ThisTurn",["TriggerLimit"]=1,["EffectType"]="",["Effect"]="{Influence(Self,2)}",["TimesTriggered"]=nil}
}


ActiveTriggerProcesses = {}

function SetupTrigger(TriggerProcess)
    local newTriggerProcess = ""
    for i=1,#TriggerProcessLookup,1 do
        if TriggerProcessLookup[i].Name == TriggerProcess then
            --print("Setting up TriggerProcess " .. TriggerProcess .. " with Trigger " .. TriggerProcessLookup[i].Trigger)
            newTriggerProcess = TriggerProcessLookup[i]
            break
        end
    end
    if newTriggerProcess == "" then error("TriggerProcess " .. TriggerProcess .. " was not found in look up table") end
    ActiveTriggerProcesses[#ActiveTriggerProcesses+1] = newTriggerProcess
end

function RemoveTrigger(TriggerProcess)
    for i=1,#ActiveTriggerProcesses,1 do
        if ActiveTriggerProcesses[i].Name == TriggerProcess.Name and ActiveTriggerProcesses[i].ActiveTurn == TriggerProcess.ActiveTurn then
            table.remove(ActiveTriggerProcesses,i)
            break
        end
    end
end

function SetInHandTrigger(GUID,PlayerColor)
    local index = 0
    for i = 1,#Players,1 do
        if Players[i].Color == PlayerColor then
            index = i
        end
    end
    HogwartsCard = GetCardFromGUID(GUID)
    if HogwartsCard.InHandTriggers == "LimitHealthLossToOne" then
        Players[index].LimitHealthLossToOne = true
    end
end

function HasInvisibilityCloak(index)
    local CardsInHand = {}
    if Players[index].Color == "Blue" then
        CardsInHand = Player.Blue.getHandObjects()
    elseif Players[index].Color == "White" then
        CardsInHand = Player.White.getHandObjects()
    elseif Players[index].Color == "Red" then
        CardsInHand = Player.Red.getHandObjects()
    elseif Players[index].Color == "Green" then
        CardsInHand = Player.Green.getHandObjects()
    end
    for i=1,#CardsInHand,1 do
        local HogwartsCard = GetCardFromGUID(CardsInHand[i].guid)
        if HogwartsCard.InHandTriggers == "LimitHealthLossToOne" then
            return true
        end
    end
    return false
end

--This function is used to fire any triggers matching an Event that just happened
function ResolveTriggers(TriggerEvent,PlayerTarget)
    local TriggeredTriggerProcess = ""
    for i=1,#ActiveTriggerProcesses,1 do
        if ActiveTriggerProcesses[i].Trigger == TriggerEvent then
            TriggeredTriggerProcess = ActiveTriggerProcesses[i].Effect
            if ActiveTriggerProcesses[i].TriggerLimit ~= nil then
                if ActiveTriggerProcesses[i].TriggerLimit > ActiveTriggerProcesses[i].TimesTriggered then
                    RunEffect(TriggeredTriggerProcess)
                    ActiveTriggerProcesses[i].TimesTriggered = ActiveTriggerProcesses[i].TimesTriggered + 1
                end
            else
                RunEffect(TriggeredTriggerProcess,PlayerTarget)
            end
        end
    end
    --if TriggeredTriggerProcess == "" then print("No Active trigger for Trigger Event " .. TriggerEvent) end
end

function RemoveThisTurnTriggers()
    local newActiveTriggerProcesses = {}
    for i=1,#ActiveTriggerProcesses,1 do
        if ActiveTriggerProcesses[i].ActiveTurn ~= "ThisTurn" then
            newActiveTriggerProcesses[#newActiveTriggerProcesses+1] = ActiveTriggerProcesses[i]
        end
    end
    ActiveTriggerProcesses = newActiveTriggerProcesses
end

--endregion Trigger functions

--region Choices functions

--EffectProcesses are either an array of EffectProcesses to choose from or a single EffectProcess where you need to choose a target
--Targets can either be nil (Active turn player chooses an EffectProcess), a single Player index (other player chooses an EffectProcess), Players array (Active turn Player chooses a Player to get EffectProcess) or "Villain" (Active turn player Chooses a Villain for the EffectProcess)

function OfferChoices(EffectProcesses, Targets)
    ActiveGameData.GamePaused = true
    ActiveGameData.AwaitingAction = true
    local Buttonbase = {
        label = "",
        click_function = "",
        function_owner = nil,
        --color={0,0,0,0},
        index = 6,
        position = {},--{16.50, 1.05, 5.00},{-1.6, 0.1, 1.1}
        rotation = {0,0,0},
        width = 820,
        height = 80,
        --scale={x=1.5, y=1.5, z=1.5},
        font_size = 50,
        --font_color={1,1,1,95},
        tooltip="???"
    }
    local Choicebuttonparam = {}

    if type(EffectProcesses) == "table" then
        if Targets ~= nil then
            PlayerWithChoice = Targets
        else
            PlayerWithChoice = ActiveGameData.PlayersTurn.index
        end
        Players[PlayerWithChoice].ChoiceOutcomes = {outcomes = EffectProcesses,Target = PlayerWithChoice}
        Players[PlayerWithChoice].HasChoice = true
        --print("Health of Player: " .. Players[ActiveGameData.PlayersTurn.index].Health)
        for i=1,#EffectProcesses,1 do
            Choicebuttonparam = Buttonbase
            Choicebuttonparam.click_function = "Choice" .. i
            local ypos = 0
            if i == 1 then ypos = 0.5 elseif i == 2 then ypos = 0.8 elseif i == 3 then ypos = 1.1 elseif i == 4 then ypos = 1.4 end
            Choicebuttonparam.position = { 0.0, 0.50, ypos}
            Choicebuttonparam.label = EffectProcesses[i]
            Choicebuttonparam.tooltip = EffectProcesses[i]
            Choicebuttonparam.index = Choicebuttonparam.index + i
            local buttonInterface = Players[PlayerWithChoice].InterfaceObject
            --print("Interface GUID: " .. buttonInterface.guid)
            buttonInterface.createButton(Choicebuttonparam)
        end
    else
        --print("Health of Player: " .. Players[ActiveGameData.PlayersTurn.index].Health)
        for i=1,#Targets,1 do
            Players[Targets[i].index].ChoiceOutcomes = {outcomes = EffectProcesses}
            Players[Targets[i].index].HasChoice = true
            Choicebuttonparam = Buttonbase
            Choicebuttonparam.click_function = "Choice" .. i
            local ypos = 0
            if i == 1 then ypos = 0.5 elseif i == 2 then ypos = 0.8 elseif i == 3 then ypos = 1.1 elseif i == 4 then ypos = 1.4 end
            Choicebuttonparam.position = { 0.0, 0.50, ypos}
            Choicebuttonparam.label = Targets[i].Name
            Choicebuttonparam.tooltip = "Use " .. EffectProcesses .. " on " .. Targets[i].Name
            Choicebuttonparam.index = Choicebuttonparam.index + i
            local buttonInterface = Players[ActiveGameData.PlayersTurn.index].InterfaceObject
            --print("Interface GUID: " .. buttonInterface.guid)
            buttonInterface.createButton(Choicebuttonparam)
        end
    end
end

function Choice(PlayerIndex)
    RemoveChoiceButtons(PlayerIndex)
    Players[PlayerIndex].HasChoice = false
    if type(Players[PlayerIndex].ChoiceOutcomes.outcomes) == "table" then
        RunEffect(Players[PlayerIndex].ChoiceOutcomes.outcomes[Players[PlayerIndex].TheChoice],Players[PlayerIndex].ChoiceOutcomes.Target)
    else
        RunEffect(Players[PlayerIndex].ChoiceOutcomes.outcomes,Players[PlayerIndex].TheChoice)
    end

    --Unpause game if there is no more choices to be made
    UnpauseGame()
end

function Choice1(obj, player_color, alt_click)
    Players[GetPlayerByInterfaceObject(obj)].TheChoice = 1
    Choice(GetPlayerByInterfaceObject(obj))
    --delayedCall("Choice",0.3)
end

function Choice2(obj, player_color, alt_click)
    Players[GetPlayerByInterfaceObject(obj)].TheChoice = 2
    Choice(GetPlayerByInterfaceObject(obj))
    --delayedCall("Choice",0.3)
end

function Choice3(obj, player_color, alt_click)
    Players[GetPlayerByInterfaceObject(obj)].TheChoice = 3
    Choice(GetPlayerByInterfaceObject(obj))
    --delayedCall("Choice",0.3)
end

function Choice4(obj, player_color, alt_click)
    Players[GetPlayerByInterfaceObject(obj)].TheChoice = 4
    Choice(GetPlayerByInterfaceObject(obj))
    --delayedCall("Choice",0.3)
end

function GetPlayerByInterfaceObject(obj)
    for i=1,#Players,1 do
        if Players[i].InterfaceObject == obj then
            return i
        end
    end
end

function RemoveChoiceButtons(PlayerIndex)
    if PlayerIndex == nil then
        PlayerIndex = ActiveGameData.PlayersTurn.index
    end
    local choiceButtons = Players[PlayerIndex].InterfaceObject.getButtons()
    for i =1,#choiceButtons,1 do
        if string.find(choiceButtons[i].click_function,"Choice") then
            Players[PlayerIndex].InterfaceObject.removeButton(choiceButtons[i].index)
        end
    end
    --local buttonsToRemove = 0
    --if type(ChoiceOutcomes.outcomes) == "table" then
    --    buttonsToRemove = #(ChoiceOutcomes.outcomes)
    --    else
    --    buttonsToRemove = #Players
    --end
    ----print("Removing " .. buttonsToRemove .. " buttons")
    --for i=6+buttonsToRemove,7,-1 do
    --    Players[ActiveGameData.PlayersTurn.index].InterfaceObject.removeButton(i)
    --end
end

function StartDiscardProcess(PlayerIndex,numberofcards,CardType)
    ActiveGameData.GamePaused = true
    ActiveGameData.AwaitingAction = true
    local text = ""
    if CardType ~= nil then
        text = " of type " .. CardType
    else
        CardType = "Any"
    end
    --print("StartDiscardProcess called with Player index: " .. PlayerIndex)
    broadcastToAll(Players[PlayerIndex].Name .. " must discard a Card" .. text,{r=1, g=1, b=1})
    Players[PlayerIndex].MustDiscard.Cards = numberofcards
    Players[PlayerIndex].MustDiscard.CardType = CardType
end
--endregion Choices functions